# オーダー概要

オーダー概要画面では、ワークフローのオーダーを管理できます。

- [オーダーステータス](/order-states) ごとに処理中のオーダーを確認できます。
- 実行中のオーダーをキャンセルするなど、オーダーステータスの変更も可能です。
- この画面には、[実行計画](/daily-plan) によって追加されたオーダーと、オンデマンドで追加されたオー ダーが表示されます。

## オーダーステータス選択パネル

左側のパネルには、ステータスごとのオーダー数が表示されます。ステータスまたは番号をクリックすると、[オーダー]パネルに関連するオーダーが表示されます。

## タグパネル

中央のパネルは、タグでオーダーをフィルタリングできるタブで構成されています。

- **ワークフロータグ **は、[ジョブ定義 - インベントリー - ワークフロー](/configuration-inventory-workflows) から設定したワークフロータグを選択できます。
- **オーダータグ** は、[ジョブ定義 - インベントリー - スケジュール](/configuration-inventory-schedules) から設定したオーダータグを選択できます。

タグは + と - のアイコンから選択し、検索アイコンで検索することができます。タグの表示は[設定 - JOC](/settings-joc) から有効にする必要があります。

## オーダーパネル

このパネルは指定されたステータスのオーダーリストを表示します：

- **オーダーID** は、オーダーに割り当てられた一意の識別子です。
  - 三角アイコンをクリックすると、オーダーに割り当てられた変数が表示されます。
- **ワークフロー** は、ワークフローに割り当てられた一意の名前です。
  - **ワークフロー名** をクリックすると[ワークフロー](/workflows) 画面に移動します。
  - 鉛筆アイコンをクリックすると、[ジョブ定義 - インベントリー - ワークフロー](/configuration-inventory-workflows) 画面に移動します。
- **ラベル** は、ワークフローのラベルからオーダーの位置を示します。ラベルがない場合は、ジョブ位置を示します。
- **ステート** は、[オーダーステータス](/order-states) を示します。
  - オーダーステータスにマウスカーソルを合わせると、詳細が表示されます。例えば、*待機中* オーダーは、*プロセスを待機中*、*通知を待機中* などの理由を示します。
- **スケジュール** は、オーダーの開始日時を示します。

## 履歴パネル

オーダーIDをクリックすると、ウィンドウ下部に履歴パネルが表示されます。パネルには[オーダー履歴]と[監査ログ]のサブタブがあります。

### オーダー履歴

- **オーダーID**はオーダーに割り当てられた一意の識別子です。矢印アイコンをクリックすると、オーダー変数が表示されます。
- **ラベル**は、ワークフローにおけるオーダーの最新の位置を示します。ユーザーはワークフローオーダーに **ラベル** を割り当てることができます。
- **履歴ステータス**は、オーダーにおける最新の結果を示します。
  - オーダーが完了した場合、*履歴ステータス*は *成功* または *失敗* となります。
  - オーダーが完了していない場合、*履歴ステータス* は *進行中* となります。
- **予定時刻** は、オーダーが予定された最初の日時を示します。
- **開始時間** は、オーダーが開始された有効な日時を示します。
- **終了時刻** は、オーダーが完了した日時を示します。

#### ログ出力へのアクセス

- **オーダーID**：*履歴* パネルで[オーダーID]をクリックすると、そのオーダーのログ出力が[オーダーログ画面](/order-log) から表示されます。 ログには、ワークフローで実行されたジョブによって作成された出力も含まれます。
- **ダウンロードアイコン**：をクリックすると、オーダーのログをファイルにダウンロードします。

デフォルトでは、オーダーログの表示は 10MB に制限されています。ユーザーは[設定 - JOC](/settings-joc)から制限を調整できます。

### 操作ログ

*操作ログ* は、オーダーに対して行われた変更操作を示します。

- **日時** は、操作が実行された日付を示します。
- **アカウント** は、操作を実行したユーザーアカウントを示します。
- **リクエスト** は、呼び出された REST API エンドポイントを示します。
- **カテゴリー** は、オーダーをキャンセルする場合はCONTROLLER、[Daily Plan](/daily-plan) からオーダーを作成する場合はDAILYPLANなど、操作の分類を指定します。
- **コメント** は、オーダーが変更された理由を説明します。JOC コックピットは、オブジェクトを変更するときに理由を指定するように設定できます。
  - この設定は[プロファイル - 設定値](/profile-preferences) から指定できます。
  - [設定 - JOC](/settings-joc) ページから強制設定できます。
- **作業時間** **コメント** の指定と同様に、オーダーを変更する際に操作に費やした時間を追加できます。
- **チケットリンク** オーダーを変更する際に、*コメント*の指定と同様にチケットシステムへの参照を追加することができます。

## 操作

### オーダー操作

オーダーごとにアクションメニューが表示されます。

*保留*、*予定*、*進行中*、*実行中*、*一時停止*、*指示待ち*、*待機中*、*失敗* の状態のオーダーに対して、以下の操作が提供されます：

- **優先順位の変更** 
  - オーダーが並列処理を制限するワークフローの *ロック* 命令を使用している場合、その *優先順位* は *待機中*　のオーダーのキュー内の位置を決定します。
  - *優先度*　はマイナス、0、正の整数、またはショートカットから指定します。*優先度* は高い方が優先されます。ショートカットには以下の値があります：
    - **低**： -20000
    - **中低**： -10000
    - **中**：0
    - **中高**:10000
    - **高**：20000
- **キャンセル**： 実行中のジョブまたはワークフロー命令を完了し、オーダーを終了します。ワークフローのステータスは失敗となります。
- **キャンセル／強制終了**： 実行中ジョブを強制終了し、オーダーを終了します。オーダーは失敗ステータスでワークフローを終了します。
- **キャンセル／リセット**： 実行中ジョブを強制終了し、オーダーを終了します。オーダーは失敗ステータスでワークフローを終了します。
- **一時停止**： オーダーを一時停止します。実行中のオーダーは、実行中のジョブまたはワークフロー命令が完了すると中断されます。
- **一時停止／強制終了**： 実行中のジョブを強制終了し、オーダーを一時停止します。
- **一時停止／リセット**は、実行中のワークフロー命令を即座にリセットし、オーダーを *一時停止* します。このオプションは、実行中のオーダーのタスクの強制終了と組み合わせることができます。
- **復旧**は、*一時停止* または *失敗* した再開可能なオーダーを継続します。

*完了* ステータスのオーダーと、*失敗* ステータスの一時停止されたオーダーには、以下の操作が可能です：

- **ワークフロー完了** オーダーを終了します。 
  - *完了* のオーダーは、ワークフローから *成功* の履歴を残します。
  - *失敗/中断* オーダーは、ワークフローから *失敗* の履歴を残します。

オーダーのステータスに応じて、その他の操作を行うことができます。

### 一括操作

一括操作は、関連するチェックボックスからオーダーを選択する際に使用できます。個別のオーダーと同じ操作が可能です。

オーダーを選択すると、ウィンドウ上部に一括操作用のボタンが表示されます。

## フィルター

ユーザーは、フィルターを適用してオーダーを制限することができます。フィルターボタンはウィンドウ上部にあります。

### 日付範囲フィルターボタン

日付範囲からオーダーを選択することができます：

- **全て** は、表示される過去と未来の日付にスケジュールされた全てのオーダーを表示します。
- **本日** は、[プロファイル - 設定値](/profile-preferences) のタイムゾーンから計算される現在の日のオーダーが含まれます。
- **今から1時間** は、次の1時間以内に開始するオーダーが含まれます。
- **今から12時間** は、次の12時間以内に開始するオーダーが含まれます。
- **今から24時間** は、翌24時間以内に開始するオーダーが含まれます。
- **翌日** は、翌日末までのオーダーが含まれます。
- **今から7日間** は、翌7日以内に開始すべきオーダーが含まれます。

### ステータスフィルターボタン

オーダーステータス選択パネルと同様に、オーダーステータスごとにフィルターボタンが用意されています。

### 日付範囲フィルター

*進行中*、*実行中*、*失敗*、*完了* ステータスのオーダーに対して、オーダーがステータスを保持する日付と時刻を指定できます。

絶対日付または相対日付を指定できます。

### 結果フィルター

一致する *オーダーID* と *ワークフロー名* に表示を限定します。表示されているオーダーに適用され、大文字と小文字は区別されません。

## 参照

### コンテキストヘルプ

- [ジョブ定義 - インベントリー - スケジュール](/configuration-inventory-schedules)
- [ジョブ定義 - インベントリー - ワークフロー](/configuration-inventory-workflows)
- [実行計画](/daily-plan)
- [オーダーログ表示](/order-log)
- [オーダーステータス](/order-states)
- [プロファイル - 設定値](/profile-preferences)
- [設定 - JOC](/settings-joc)
- [ワークフロー - オーダー追加](/workflows-orders-add)

###Product Knowledge Base

- [JS7 - Orders](https://kb.sos-berlin.com/display/JS7/JS7+-+Orders)

