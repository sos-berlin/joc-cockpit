# ジョブ定義 - インベントリー - ワークフロー - ジョブオプション

*ワークフロー* 画面では、ワークフロー命令を処理する有向非巡回グラフ(DAG)を作成できます。
ジョブをクリックすると、ジョブの詳細を指定するためのタブがいくつか表示されます。2つ目のタブは *ジョブオプション* です。

## よく使用するジョブオプション

- **最大並列実行タスク数** は、ジョブが実行できる並列インスタンス数を指定します。複数のオーダーがワークフローを処理する場合、並行してジョブを実行することができます。**最大並列実行タスク数** に加えて、スタンドアロンエージェントとエージェントクラスターによって強制されるプロセス制限が適用されます。
- **重大度** は、ジョブの失敗時の重大度を指定し、ジョブの失敗に関する通知で利用できます。

### ジョブ実行時間

- **タイムアウト** は、ジョブを実行する最大実行時間を指定します。ジョブ実行時間が *タイムアウトt* を超えた場合、ジョブの *グレースタイムアウト* 設定によってエージェントからキャンセルされます。入力は以下のフォーマットで指定できます：
  - *1* または *1s*: 数値または *s* に続く数値で、*タイムアウト* を秒単位で指定します。
  - *1m 2d 3h*：最大実行期間として、1ヶ月2日3時間を指定します。
  - *01:02:03*：最大実行時間として1時間2分3秒を指定します。
- **実行時間過小警告** 指定された時間より早くジョブが終了する場合、警告と関連する通知を出します。入力フォーマットは以下の通りです：
  - *1* または *1s*: 数値または *s* が続く数値で、実行期間を秒単位で指定します。
  - *01:02:03*：実行期間を1時間2分3秒で指定します。
  - *30%*：ジョブの過去の実行の平均よりも30%短い実行期間を指定します。この計算では、[クリーンアップサービス](/service-cleanup) によって削除される[タスク履歴](/history-tasks) を使用します。
- **実行時間超過警告** ジョブ実行時間が指定された時間を超える場合、警告と関連する通知を発生します。入力フォーマットは以下の通りです：
  - *1* または *1s*: 数値または *s* が続く数値で、実行期間を秒単位で指定します。
  - *01:02:03*：実行期間を1時間2分3秒で指定します。
  - *30%*：ジョブの過去の実行の平均よりも30%長い実行期間を指定します。この計算では、[クリーンアップサービス](/service-cleanup) によって削除される[タスク履歴](/history-tasks) を使用します。

### ログ出力

- **stderr出力でエラー** は、ジョブが stderr チャンネルに出力を書き込んだ場合、エージェントがそのジョブを失敗させることを指定します。このチェックはジョブの *戻り値* (シェルジョブの場合: 終了コード) のチェックに加えて行われます。
- **stderr出力で警告** は *stderr出力でエラー* と同じチェックを行います。しかし、ジョブは失敗せず、警告が発生し、通知が作成されます。

### ジョブ許可時間

*許可時間* は、ジョブがいつ開始できるか、いつスキップされるべきか、ジョブが実行される絶対的な期間を指定します。詳細は[JS7 - Admission Times for Jobs](https://kb.sos-berlin.com/display/JS7/JS7+-+Admission+Times+for+Jobs) を参照してください。

- **許可時間ではないときスキップ** は、ジョブの *許可時間* がオーダーの日付と一致しない場合、ジョブをスキップすることを指定します。例えば、ジョブの *許可時間* は週末を除くことができ、その結果ジョブは月曜日から金曜日まで実行され、土曜日から日曜日にスケジュールされたオーダーはスキップされます。ユーザーは、オーダーがジョブに到着する日付ではなく、オーダーがスケジュールされる日付が重要であることを考慮する必要があります。もしオーダーのスケジュールされた日付が *許可時間* と一致しても、オーダーが *許可時間* 外に到着した場合、ジョブはスキップされず、オーダーは次の *許可時間* を待つことになります。
- **許可時間終了時終了** は、ジョブが *許可時間* で指定された時間を超えた場合、エージェントがそのジョブをキャンセルすることを指定します。
- **許可時間**は、*期間表示* からジョブが実行できる日数と時間を指定することができます。

#### 許可時間タイプ

*許可時間タイプ* ではジョブの開始日を指定することができます。さらに、*許可時間タイプ* を特定の月に限定することもできます。

- **平日** は、ジョブを実行する曜日を指定します。
- **特定曜日** は、月の第一月曜日や最終月曜日などの相対的な平日を指定します。
- **特定日** は、1年の特定の日を指定します。
- **日数** は、月の最初の日や最後の日など、月の相対的な日を指定します。

#### 実行時間

**実行時間** は、*開始時間* と *実行時間* から指定します：

- **開始時間** は、HH:MM:SS の形式で指定します。
- **時間時間** は、以下のフォーマットで指定します：
  - *1*または*1s*：数値または数値の後に*s*を続けたもので、*実行時間* を秒単位で指定します。
  - *1m 2d 3h*: *実行時間* に1ヶ月2日3時間を指定します。
  - *01:02:03*：*実行時間* に1時間2分3秒を指定します。

## ジョブオプションは、*オプション* から選択できます.

*ジョブ定義 - インベントリー*画面ではウィンドウ上部に *オプション* スライダーが表示されます。このスライダーを使用すると、追加オプションが利用可能になります。

- **グレースタイムアウト** は Unix のジョブに適用され、*タイムアウト* を超えた時、またはユーザーの介入によって強制的に終了させられた時に SIGTERM シグナルを送ります。もしジョブがSIGTERMに応答して終了しない場合、*グレースタイムアウト* に設定した時間の後にエージェントはSIGKILLシグナルを送り、強制的にジョブを終了させます。詳細は[JS7 - FAQ - How does JobScheduler terminate Jobs](https://kb.sos-berlin.com/display/JS7/JS7+-+FAQ+-+How+does+JobScheduler+terminate+Jobs) と[JS7 - Agent Operation](https://kb.sos-berlin.com/display/JS7/JS7+-+Agent+Operation) を参照してください。
- *互換モード* は JobScheduler の V.1.x のユーザのために *v1* 互換性レベルを提供します。互換モードでは以下の動作が変更されます：
  - *環境変数* は指定する必要はなく、すべてのワークフロー変数に対して自動的に作成されます。環境変数の名前は *SCHEDULER_PARAM_* から大文字のみで接頭辞が付けられます。
  - ジョブ引数を使用するために、互換モードは対応するタブを提供します。

### ジョブの再起動

- **再開できないジョブ** は、エージェントの停止またはキャンセル時に、エージェントまたはその監視システムによって強制終了されたジョブに適用されます。デフォルトでは、ジョブは再起動可能とみなされ、エージェントの再起動時に再起動されます。ユーザーはチェックボックスを有効にすることで、この動作を防ぐことができます。

### 異なるユーザーアカウントを使用した Windows ジョブの実行

以下のオプションは、Windows のエージェントで実行されるジョブに対して、ジョブがユーザーコンテキストを切り替えるように指定します。[JS7 - Running Jobs as a different User](https://kb.sos-berlin.com/display/JS7/JS7+-+Running+Jobs+as+a+different+User) を参照してください。

- **認証キー** は、Windows Credential Manager でターゲットユーザーアカウントの認証情報を保持するエントリのキーを指定します。
- **プロファイル読み込み** は、レジストリエントリを含むターゲットユーザアカウントのプロファイルをジョブ開始時にロードするかどうかを指定します。

##参照

### コンテキストヘルプ

- [クリーンアップサービス](/service-cleanup)
- [ジョブ定義 - インベントリー - ワークフロー](/configuration-inventory-workflows)
  - [ジョブ定義 - インベントリー - ワークフロー - プロパティ](/configuration-inventory-workflows-job-properties)
  - [ジョブ定義 - インベントリー - ワークフロー - ノードプロパティ](/configuration-inventory-workflows-job-node-properties)
  - [ジョブ定義 - インベントリー - ワークフロー - 通知](/configuration-inventory-workflows-job-notifications)
  - [ジョブ定義 - インベントリー - ワークフロー - ジョブタグ](/configuration-inventory-workflows-job-tags)
- [タスク履歴ß](/history-tasks)

###Product Knowledge Base

- [JS7 - Admission Times for Jobs](https://kb.sos-berlin.com/display/JS7/JS7+-+Admission+Times+for+Jobs).
- [JS7 - Agent Operation](https://kb.sos-berlin.com/display/JS7/JS7+-+Agent+Operation)
- [JS7 - Assignment of Variables](https://kb.sos-berlin.com/display/JS7/JS7+-+Assignment+of+Variables)
- [JS7 - Expressions for Variables](https://kb.sos-berlin.com/display/JS7/JS7+-+Expressions+for+Variables)
- [JS7 - FAQ - How does JobScheduler terminate Jobs](https://kb.sos-berlin.com/display/JS7/JS7+-+FAQ+-+How+does+JobScheduler+terminate+Jobs)
- [JS7 - Job Instruction](https://kb.sos-berlin.com/display/JS7/JS7+-+Job+Instruction)
- [JS7 - Order Variables](https://kb.sos-berlin.com/display/JS7/JS7+-+Order+Variables)
- [JS7 - Running Jobs as a different User](https://kb.sos-berlin.com/display/JS7/JS7+-+Running+Jobs+as+a+different+User)

