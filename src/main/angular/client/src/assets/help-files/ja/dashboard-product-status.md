# 製品ステータス

製品ステータスパネルは、以下のJS7製品に関する情報を提供します：

- **JOCコックピット**はスケジューリング環境の監視と制御、ジョブインベントリの管理に使用されます。
- **コントローラ**はエージェントをオーケストレーションし、オーダー、ワークフロー、ジョブのデプロイメントを管理します。
- **エージェント**はジョブを実行します。 

JS7 製品はスタンドアローンでもアクティブ・パッシブ・クラスタリングでも運用可能です。

## コンポーネントステータスと接続ステータス

### JOC コックピット

JOC コックピットはデータベースとコントローラーインスタンスに接続します。

- コンポーネントステータス
  - コンポーネントステータスは、JOC Cockpitの長方形の左上にあるタイルの色で示されます。
  - **緑色のタイル**は健全なJOCコックピットインスタンスを示します。
  - **赤色のタイルはステータスが不明であることを示します。 
- データベース接続ステータス
  - **緑色の線は健全な接続を示します。
  - **黄色の線は、JOC Cockpitがデータベースへのハートビートを逃している場合など、接続に問題があることを示します。
- コントローラ接続ステータス
  - **緑色の線は、コントローラへの接続が正常であることを示します。
  - **赤色の線は、コントローラへの接続に失敗したことを示します。

### コントローラ

コントローラはエージェントインスタンスに接続します。Controllerクラスタでは、メンバーは双方向接続を保持します。

- コンポーネントのステータス
  - コンポーネントのステータスは、Controllerの長方形の左上にあるタイルの色で示されます。
  - **緑色のタイル**は正常なControllerインスタンスを示します。
  - **黄色で表示されているタイルは、実行中の不健全なControllerインスタンスです。 
  - **赤色のタイルは、*不明*なステータスを示します。 
- クラスタ接続のステータス
  - **緑色の線**は、Controllerインスタンス間でアクティブに同期している健全なクラスタを示します。
  - **黄色で表示されている行は、ペアリングしているControllerインスタンスへの接続がうまくいっていないことを示します。
  - **赤色の線は、Controllerインスタンス間の接続に失敗したことを示します。

## オペレーション

### JOC コックピットの操作

健全な JOC コックピットインスタンスに対して提供される操作です：

- クラスタ内の**スイッチオーバー**は、アクティブな役割をスタンバイ・インスタンスに渡します。操作はスタンバイインスタンスに提供されます。
- **Update URL** は表示URLを変更できます。JOCコックピットはいくつかのURLからアクセスできる場合があり、最初に使用されたものが表示されます。これがユーザの望むものでない場合、ユーザは表示されるべき URL を指定できます。この操作はJOC CockpitのURLを変更するのではなく、その表示を変更します。

ブラウザが接続されているインスタンスに対して提供されるJOC Cockpitに対する操作：

- **サービスの再起動** Cluster Service、Proxy Service、履歴サービスなどすべてのサービスを再起動します。 
- **特定のサービスを再起動することができます：
  - **クリーンアップサービス**は、保存期間を超えた古い情報からデータベースをパージします。
  - **実行計画サービス**は、デイリープランのオーダーを作成します。このサービスは1日1回実行され、オーダーを作成し、コントローラーとエージェントに送信します。
  - **履歴サービス**は、*Proxy Service*を介してControllerからジョブの履歴とログ出力を受信します。
  - **ログ通知サービス**は、登録されたコントローラーとエージェントインスタンスからエラーと警告を受信する syslog サービスです。
  - **Monitor Service** は *Monitor* ビューの通知を作成し、オプションでアラートをメールで送信します。
  - **プロキシサービス**は、アクティブなコントローラインスタンスへの接続を確立します。これにより、コントローラにコマンドを送信したり、ジョブの履歴やログ出力を受信したりできます。
- **Run Service** サービスを直ちに実行します：
  - **Cleanup Service** データベースをパージします。
  - **実行計画サービス**は、実行計画用のオーダーを作成します。サービスは1日に何回でも実行できます。個別に実行しても、設定によって指定された時点でサービスが実行されることはありません。
- **JOCコックピットのjoc.logファイルをgzip形式の.gzファイルからダウンロードできます。

### コントローラー操作

コントローラインスタンスでは、各インスタンスの矩形内にある 3 点のアクションメニューから以下の操作が可能です：

- **Terminate**、**Terminate and Restart**はインスタンスをシャットダウンします。クラスタ内のアクティブなインスタンスの場合、メニューは拡張されます：
  - **switch-over** でアクティブな役割をスタンバイ・インスタンスに渡します。
  - **スイッチ・オーバーなし**：アクティブ・ロールをアクティブ・インスタンスに残します。ユーザーはフェイルオーバーが行われず、どのインスタンスもアクティブにならないことに注意する必要があります。
- **Cancel**、**Cancel and Restart**はインスタンスを強制的に終了します。クラスタ内のアクティブなインスタンスに適用すると、強制的にフェイルオーバーされます：
  - **with fail-over**はアクティブな役割をスタンバイ・インスタンスに渡します。
- **Download Log** コントローラのcontroller.logファイルをgzip形式の.gzファイルからダウンロードできます。

クラスタステータスの矩形では、3ドットのアクションメニューから以下の操作が可能です：

- **Switch-over**はアクティブな役割をスタンバイインスタンスに渡します。この操作はクラスタが結合されている場合に使用できます。
- **Confirm loss of Controller Instance**は、クラスタ内のControllerインスタンスがクラッシュしたときにJOC Cockpitインスタンスが利用できなかった場合に適用されます。JOC Cockpitはクラスタの証人として必要です。この場合、クラッシュ時にスタンバイしていたControllerインスタンスを確認し、スタンバイインスタンスがシャットダウンしてアクティブインスタンスが再開できることを確認する必要があります。

