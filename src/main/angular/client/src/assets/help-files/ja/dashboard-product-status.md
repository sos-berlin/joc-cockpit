# ダッシュボード - プロダクトステータス

プロダクトステータスウィジェットは、以下のJS7製品に関する情報を提供します：

- **JOCコックピット** は、実行環境の監視と制御、インベントリーの管理に使用されます。
- **コントローラー** は、エージェントを管理し、オーダー、ワークフロー、ジョブの配置を管理します。
- **エージェント** は、ジョブを実行します。

JS7 製品はスタンドアローンでもクラスタリングでも運用可能です。

## コンポーネントステータスと接続ステータス

### JOCコックピット

JOCコックピットはデータベースとコントローラーインスタンスに接続します。

- コンポーネントステータス
  - コンポーネントステータスは、JOCコックピットの枠の左上にあるタイルの色で示されます。
  - **緑色のタイル** は、正常なJOCコックピットを示します。
  - **赤色のタイル** は、ステータスが不明であることを示します。 
- データベース接続ステータス
  - **緑色の線** は正常な接続を示します。
  - **黄色の線** は、JOCコックピットがデータベースへのハートビートを逃している場合など、接続に問題があることを示します。
- コントローラー接続ステータス
  - **緑色の線** は、コントローラーへの接続が正常であることを示します。
  - **赤色の線** は、コントローラーへの接続に失敗したことを示します。

### コントローラー

コントローラーはエージェントに接続します。コントローラークラスターでは、メンバーは双方向接続を保持します。

- コンポーネントステータス
  - コンポーネントのステータスは、コントローラーの枠の左上にあるタイルの色で示されます。
  - **緑色のタイル** は正常なコントローラーを示します。
  - **黄色のタイル** は、クラスターが成立していないような、実行中でも正常ではないコントローラーです。
  - **赤色のタイル** は、*不明* なステータスを示します。 
- クラスター接続のステータス
  - **緑色の線** は、コントローラー間でアクティブに同期している正常なクラスターを示します。
  - **黄色の線** は、クラスターメンバーのコントローラーへの接続が不安定なことを示します。
  - **赤色の線** は、コントローラー間の接続に失敗していることを示します。

## 操作

### JOCコックピットの操作

正常なJOCコックピットへの操作：

- **切替** は、アクティブな役割をスタンバイ側に渡します。操作はスタンバイ側で可能です。
- **URL更新** は表示URLを変更できます。JOCコックピットはいくつかのURLからアクセスできる場合があり、最初に使用されたものが表示されます。これがユーザの望むものでない場合、ユーザは表示されるべきURLを指定できます。この操作はJOCコックピットのURLを変更するのではなく、その表示を変更します。

ブラウザが接続しているJOCコックピット操作：

- **サービス再起動** は、クラスターサービス、プロキシーサービス、ヒストリーサービスなどのすべてのサービスを再起動できます。 
- **サービス再起動** から、以下の特定のサービスを再起動することができます：
  - **クリーンアップサービス** は、保存期間を超えた履歴情報をデータベースから削除します。
  - **デイリープランサービス** は、実行計画のオーダーを作成します。このサービスは1日1回自動実行され、オーダーを作成し、コントローラーとエージェントに登録します。
  - **ヒストリーサービス** は、*プロキシーサービス* を介してコントローラーからジョブの実行履歴とログ出力を受信します。
  - **ログ通知サービス** は、登録されているコントローラーとエージェントからエラーと警告を受信する syslog サービスです。
  - **モニターサービス** は *モニター* 画面の通知を作成し、オプションでアラートをメールで送信します。
  - **プロキシーサービス** は、アクティブなコントローラーへの接続を確立します。これにより、コントローラーにコマンドを送信したり、ジョブ実行履歴やログ出力を受信したりできます。
- **サービス実行** は、以下のサービスを直ちに実行できます：
  - **クリーンアップサービス** は、 保存期間を超えた履歴情報をデータベースから削除します。
  - **デイリープランサービス**は、実行計画のオーダーを作成します。デイリープランサービスは1日に何回でも実行できます。個別に実行しても、設定によって指定された時点でサービスが実行されることはありません。
- **ログダウンロード** は、JOCコックピットのjoc.logファイルをgzip形式の.gzファイルでダウンロードできます。

### コントローラー操作

各コントローラーは、枠の左上にあるアクションメニューから以下の操作が可能です：

- **終了**、**終了後再開** は、コントローラーをシャットダウンします。クラスター内のアクティブなインスタンスの場合、メニューは拡張されます：
  - **切替** は、アクティブの役割をスタンバイコントローラーに渡します。
  - **切替さない** は、アクティブの役割をアクティブコントローラーに残します。ユーザーはフェイルオーバーが行われず、どのインスタンスもアクティブにならないことに注意する必要があります。
- **強制中断**、**強制中断後再開** は、コントローラーを強制的に終了します。クラスター内のアクティブなコントローラーに適用すると、強制的にフェイルオーバーされます。
  - **フェイルオーバーする** は、アクティブな役割をスタンバイコントローラーに渡します。
- **ログダウンロード** は、コントローラーのcontroller.logファイルをgzip形式の.gzファイルでダウンロードできます。

クラスターステータスの枠では、アクションメニューから以下の操作が可能です：

- **切替** は、アクティブな役割をスタンバイコントローラーに渡します。この操作はクラスターが接続されている場合に使用できます。
- **ノードロストが確認されました** は、クラスター内コントローラーがクラッシュしたときにJOCコックピットが利用できなかった場合に適用されます。JOCコックピットはクラスターの状態監視として必要です。この場合、クラッシュ時にスタンバイしていたコントローラーを確認し、スタンバイコントローラーがシャットダウンしてアクティブコントローラーが再開できることを確認する必要があります。
