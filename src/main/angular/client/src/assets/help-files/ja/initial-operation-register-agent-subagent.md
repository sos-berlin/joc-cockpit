# 初期設定 - サブエージェント登録

初期設定は、コントローラー、エージェント、JOCコックピットのインストール後に行います。サブエージェントの登録は、[初期設定  - クラスターエージェント登録](/initial-operation-register-agent-cluster) 完了後に行います。

## アーキテクチャー

### エージェント

- **スタンドアロンエージェント**は、オンプレミスやVM/コンテナからリモートマシン上でジョブを実行します。エージェントは個別に運用され、コントローラによって管理されます。
- **クラスターエージェント**
  - **ディレクターエージェント**は、クラスターエージェント内の *サブエージェント* を管理します。ディレクターエージェントはアクティブパッシブクラスタリングで2つのインスタンスから運用され、コントローラーによって管理されます。
  - **サブエージェント**はオンプレミスのリモートマシンやVM/コンテナからジョブを実行します。これらはクラスターエージェントのワーカーノードと考えることができ、*ディレクターエージェント* によって管理されます。

### 接続

- **スタンドアロンエージェント**、 **ディレクターエージェント** は、*コントローラー* から接続されます。
- クラスターエージェント内の **サブエージェント** は、*ディレクターエージェント* から接続されます。

## サブエージェントの登録

ユーザーは、ディレクターエージェントのサーバーからサブエージェントのサーバーへのネットワーク接続が利用可能であること、およびファイアウォールルールがサブエージェントのポートへの接続を許可していることを確認する必要があります。

メインメニューバーのホイールアイコンから *コントローラー・エージェント管理* 画面を開き、クラスターエージェントのアクションメニューから *サブエージェント追加* を選択します。これにより、サブエージェントを登録するためのポップアップウィンドウが表示されます。

ユーザーは以下の入力を行います：

- **サブエージェントID** は、サブエージェントの一意な識別子で、サブエージェントの有効期間中は変更できません。*サブエージェントID* はジョブやワークフローでは表示されません。
- **タイトル** は、サブエージェントの説明です。
- **URL** は、Director エージェントがサブエージェントに接続するために使用するプロトコル、ホスト、ポート番号の URL を指定します。 例: http://localhost:4445
  - サブエージェントがHTTP を使用する場合、URL は *http* から始まります。サブエージェントが HTTPS 用に設定されている場合、*https* から始まります。
  - サブエージェントがディレクターエージェントと同じマシンにインストールされている場合、ホスト名は *localhost* になります。そうでない場合は、サブエージェントのホストの FQDN を指定します。
  - サブエージェントの *ポート番号* はインストール時に設定します。
  - **サブエージェントクラスター作成** オプションで、サブエージェントのサブエージェントクラスターを作成できます。[初期設定 - サブエージェントクラスター登録](/initial-operation-register-agent-subagent-cluster) を参照してください。

登録に成功すると、サブエージェントが[リソース - エージェント](/resources-agents) 画面に表示されます。

## 参照

### コンテキストヘルプ

- [ダッシュボード - システムステータス](/dashboard-product-status)
- [初期設定 - エージェントクラスター登録](/initial-operation-register-agent-cluster)
- [初期設定 - コントローラー登録](/initial-operation-register-controller)
- [初期設定 - サブエージェントクラスター登録](/initial-operation-register-agent-subagent-cluster)

###Product Knowledge Base

- [JS7 - Agent Cluster](https://kb.sos-berlin.com/display/JS7/JS7+-+Agent+Cluster)
- [JS7 - Management of Agent Clusters](https://kb.sos-berlin.com/display/JS7/JS7+-+Management+of+Agent+Clusters)

