# ジョブ定義 - インベントリー - カレンダー

*カレンダー*では、[実行計画](/daily-plan) からオーダーを作成するために[ジョブ定義 - インベントリー - スケジュール](/configuration-inventory-schedules) で使用されるルールベースのカレンダーを指定することができます。 詳細は[JS7 - Calendars](https://kb.sos-berlin.com/display/JS7/JS7+-+Calendars) を参照してください。

- カレンダーはワークフローが実行される日を指定します。
  - **カレンダー** は、ワークフローが実行される日を指定します。
  - **ワークフロー** が、実行されない日を指定します。
- スケジュール 
  - 営業日カレンダーと休業日カレンダーの任意の数への参照を保持します。
  - ワークフロー実行のオーダーを実行する時点を決定します。 

カレンダーは以下のパネルで管理します：

- ウィンドウの左側にある[ジョブ定義 - インベントリー - ナビゲーションパネル](/configuration-inventory-navigation) では、カレンダーのフォルダーごとにナビゲーションが可能です。また、カレンダーに対する操作も可能です。
- ウィンドウ右側の *カレンダーパネル* には、カレンダー設定の詳細が表示されます。

## カレンダーパネル

カレンダーでは以下の入力が可能です：

- **名称** は、カレンダー固有の識別子で、[オブジェクト命名規則](/object-naming-rules) に準じます。
- **タイトル** は、カレンダーの目的などの説明を記述します。
- **タイプ** は、営業日カレンダーまたは休業日カレンダーのいずれかです。
- **有効開始**、**有効終了** は、オプションでカレンダーの有効期間を指定します。有効期間前と有効期間を過ぎると、カレンダーは結果の日を返しません。有効期間を指定しない場合、カレンダーは無制限に有効です。

### 周期

周期には 2 つの種類があり、組み合わせることができます：

- **周期含む**は、正の日数を指定します。
- **周期除く** は、結果のリストから削除される日を指定します。

*周期除く* の意味するところは、指定された日付の使用を拒否し、一致する日に *周期含む*　を上書きするということです。

営業日カレンダーの例：

- 月～金の *周期含む* を仮定します。
- 1月1日や5月1日などの祝祭日には、*周期除く* を設定します。
- **休業日** タイプで指定したスケジュールで使用する場合。
  - **休業日** の前 
    - 1月1日が月曜日の場合、オーダーは *周期含む* の一部ではなく、*周期除く* の一部でもない、前の日曜日に作成されます。 
    - 1月1日が土曜日の場合、*周期含む* からオーダーが作成される前日が金曜日であるため、オーダーは作成されません。
  - **休業日** の後
    - 1月1日が土曜日である場合、オーダーは次の日曜日に作成されます。この日曜日は、*周期含む* の一部ではなく、*周期除く* の一部でもありません。 
    - 1月1日が日曜日の場合、次の非営業日は月曜日であり、*周期含む*からオーダーが作成されるため、オーダーは作成されません。

休業日カレンダーを使用する場合は、対応するルールが適用されます： *周期含む* は休業日を指定し、*周期含む* は営業日を指定します。

カレンダーは、*周期* をいくつでも保持できます。*周期の追加* ボタンは、*含まれる周期* と *除外される周期* のそれぞれに対して提供されます。

#### 周期タイプ

*周期* を追加するときは、いくつかのタイプを選択できます：

  - **平日** は、曜日を指定します。
  - **特定曜日** は、月の最初または最後の月曜日など、相対的な曜日を指定します。
  - **特定日** は、年の月日を指定します。
  - **日数** は、月の最初の日や最後の日など、月の相対的な日を指定します。
  - **毎** は、2日ごと、1週間ごと、3ヶ月ごとなどの定期的な期間を指定します。この場合、日数のカウントを開始する *有効開始* 日を指定する必要があります。
  - **国民の祝日** は、既知の祝祭日を指定します。**祝祭日** は正式なものではなく、地域によって異なります。
  - **休業日カレンダー** は、現在のカレンダーの休業日カレンダーから関連する日を除外します。

*周期タイプ* は、同じまたは異なる *周期タイプ* を繰り返し適用することで組み合わせることができます。

#### 例

第 2 営業日ごとに返されるカレンダーの例を想定します：

- 月～金は営業日、土～日は非営業日とします。
- 1月1日、5月1日を祝祭日とします。

2営業日ごとのカウントは、週末と祝祭日を除く必要があります：

- 営業日カレンダーを下記のように作成します。
  - *周期含む* を使用して、営業日カレンダーを作成します：周期タイプに *平日* を追加し、*毎日* を選択します。その結果、年間すべての曜日が保持されます。
  - *周期除く* を使用して、**毎** を使用し、間隔に *2*、単位に *日* を選択します。 *有効開始* を指定します。この結果、日数が半分になります。
  - *周期除く* を使用して、**国民の祝日** を追加し、*国*と*年*を選択します。これにより、結果の日数がさらに制限されます。

アクションメニューから *プレビュー表示* をクリックすると、週末と祝日を除く2営業日ごとの結果がカレンダーに表示されます。

別の方法として、スケジュールの *制限* から **毎** *周期タイプ*を指定することもできます。

## カレンダーの操作

利用可能な操作については[ジョブ定義 - インベントリー - ナビゲーションパネル](/configuration-inventory-navigation) を参照してください。

## 参照

### コンテキストヘルプ

- [ジョブ定義 - インベントリー - ナビゲーションパネル]](/configuration-inventory-navigation)
- [ジョブ定義 - インベントリー - スケジュール - ランタイム]Schedules - Run-time](/configuration-inventory-schedules-run-time)
- [実行計画](/daily-plan)
- [オブジェクト命名規則](/object-naming-rules)

###Product Knowledge Base

- [JS7 - Calendars](https://kb.sos-berlin.com/display/JS7/JS7+-+Calendars)
- [JS7 - Schedules](https://kb.sos-berlin.com/display/JS7/JS7+-+Schedules)

