# 実行計画

実行計画] ビューでは、今後実行予定のオーダーの概要が表示され、[日次計画] を管理できます。 

[Daily Plan Service](/service-daily-plan) を使用して、実行計画のオーダーを作成し、コントローラに送信します。このサービスはバックグラウンドで実行され、毎日、数日先のオーダーの計画と提出を行います。

実行計画は、[Cleanup Service](/service-cleanup) によって実行されるデータベースのパージの対象となります。

カレンダーパネル*に関する操作については、[Daily Plan - Calendar](/daily-plan-calendar) を参照してください。

## オーダー状態

実行計画には、以下のいずれかの状態を保持するオーダーが含まれます：

- **計画中**：計画中**: オーダーは作成されましたが、コントローラとエージェントに *提出* されていません。
- **提出済み**：Submitted**：オーダーがコントローラーとエージェントに転送され、自律的にオー ダーが開始されます。このステータスは、今後実行予定のオーダーと実行中のオーダーに適用されます。
- **完了**：オーダーが完了しました。[Order History](/history-orders) ビューで、実行が成功したか失敗したかを確認できます。

## オーダー状態の遷移

実行計画には以下の状態遷移があります：

<pre>
      ┌──────────────────┐
      ▼ ▲
   Create                │
      │                  │
      ▼ │
  ┌───├──────┐   Remove  ▲
  │ 計画 │───────────────────────┘
  オーダー │───────────────────────────────────────────────────────────────────────────┘ ┐
  ┖───┌──────┘           ▲
      │                  │
   Submit                │
      │                  │
      ▼ │
  ┌───├───────┐          │
  │ Submitted │          │
  オーダー
  ┖───┌───────┘          │
      │ │
      キャンセル
      ├──────────────────┘
      │ ▲
   Execute / Let Run     │
      │ │
      ▼ │
  ┌───├───────┐          │
  │ Finished  │          │
  オーダー
  ┖───┌───────┘          │
      │ │
      キャンセル
      ┖──────────────────┘
</pre>

## 実行計画パネル

### オーダー・ステータス・パネル

オペレーションは、オーダーのアクションメニューから個別に、または一括して利用できます。

以下のフィルターボタンは、操作の範囲を制限します： 

- **すべて**：すべて**: どのステータスのオーダーにも適用されます。
- **予定**：予定**: **送信**および**削除**操作は、コントローラに*送信*されていない*予定*のオーダーに適用できます。
- **提出済み**：実行**および*キャンセル**操作は、コントローラーおよびエージェントに*提出*された*オーダーに適用できます。
- **完了**：キャンセル**操作は、完了したオーダーに適用できます。
- **Late**は、オーダーが予定より遅れて開始されたことを示す、オーダー状態の追加フィルタです。

#### ライフサイクルオペレーション

- **オーダーを実行させる**。
  - 提出された*オーダーに適用されると、オーダーは直ちに開始されます。一括操作の範囲内のオーダーは同時に開始されます。
- **オーダーを送信します。
  - 計画*オーダーに適用されると、*提出*ステータスに設定され、コントローラとエージェントに転送されます。
- **オーダーをキャンセルします。
  - 提出済み*オーダーに適用された場合、オーダーはコントローラーとエージェントから回収され、*計画*ステータスに設定されます。
- **オーダーを削除します。
  - 実行計画*オーダーに適用されると、オーダーは実行計画から削除されます。後に実行される日次計画サービスでは、指定された日付にオーダーが追加されることはありません。
- **オーダーをコピーします。
  - **開始時間**：オーダーを将来の実行計画にコピーします。日付/時間の入力は、オーダーの開始時間の変更と同様です。
  - **実行計画の割り当てを保持します：日次計画の割り当てを保持**：通知ボードのカレンダーベースの依存関係は、元の日次計画の日付に解決されます。
  - **Ignore Job Admission Times**：ジョブは特定の日やタイムスロットで実行するように制限することができます。到着したオーダーは次の利用可能なタイムスロットを待たなければなりません。このオプションにより、ジョブはそのような制限から独立して開始されます。

#### 開始時間の変更

- **今すぐ**：オーダーはすぐに開始されます。
- **指定日**：指定の日時にオーダーが開始されます。カレンダーベースの依存関係を解決する場合、オーダーには関連する実行計画の日付が割り当てられます。
- **現在時刻との相対**：例えば、*15* で 15 秒後に開始、*01:30:15* で 1 時間 30 分 15 秒後に開始します。
- **開始時間に対する相対時間**：Orders will start with a positive or negative offset to their original start time in seconds or in hours, 
例えば、*-04:00:00*は4時間早く、*+12:00:00*は12時間遅く開始します。カレンダーベースの依存関係を解決する場合、オーダーは実行計画の日付に割り当てられます。

#### パラメータ設定の変更

変数を指定する関連ワークフローでは、値を変更できます。一括処理で使用する場合、すべてのオーダーに同じ変数値が適用されます。

- **変数の変更 
  - ワークフローがデフォルト値のない変数を指定している場合、オーダーは関連 する値を指定する必要があります。
  - ワークフローがデフォルト値を持つ変数を指定した場合、オーダーからの指定は任意です。

オーダーがワークフローの最初のノードからではなく、後のノードから開始される場合は、位置を指定することができます。

- **ブロック位置**：Try/Catch*、*Resource Lock*、*Fork/Join* などのブロック命令を保持するワークフ ローでは、関連する命令を選択できます。
- **開始位置**：Start Position**が指定されていない場合、オーダーはワークフローまたは*Block Position*の最初のノードから開始されます。
  - Block Position**が指定されない場合、ワークフロー内の最上位命令からオーダーを開始します。
  - ブロック位置*が指定された場合、開始位置はブロック内の同じレベルのノードとなります。
- **終了位置**：
  - ブロック位置**が指定されていない場合、オーダーが終了するワークフロー内のトップレベル命令を選択することができます。
  - ブロック位置**が指定された場合、オーダーが終了する前に、ブロック内の任意の同レベルノードを指定することができます。
  - 複数の *End Position* を指定することができます。

#### 優先順位の変更

- **優先度**：
  - オーダーがワークフローで並列処理を制限する *リソースロック* 命令に適合する場合、その *優先順位* は待機中の*オーダーのキュー内の位置を決定します。
  - *優先度*は負、0、正の整数、または提供されるショートカットから指定します。優先度*は高い方が優先されます。ショートカットには以下の値があります：
    - **Low**： -20000
    - **通常**以下： -10000
    - **通常**：0
    - **標準以上10000
    - **高い**：20000

## 参考文献

### コンテキストヘルプ

-[Cleanup Service](/service-cleanup)
-[Daily Plan - Calendar](/daily-plan-calendar)
-[Daily Plan Service](/service-daily-plan)
-[Order History](/history-orders)
-[Settings - Daily Plan](/settings-daily-plan)

###Product Knowledge Base

-[JS7 - Daily Plan](https://kb.sos-berlin.com/display/JS7/JS7+-+Daily+Plan)

