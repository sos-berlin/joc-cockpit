# IDサービス管理 - ロール管理

IDサービスは、認証と認可によって JOCコックピットへのアクセスを管理制御します。[IDサービス管理](/identity-services) を参照してください。

認証のために、JS7 はロールベースアクセスモデル（RBAC）を提供します。

- ロールは利用可能な権限から自由に設定できます、
- ユーザーは1つまたは複数のロールを割り当てでき、それらのロールは権限に割り当てられます。

JS7 にはデフォルトで [JS7 - Default Roles and Permissions](https://kb.sos-berlin.com/display/JS7/JS7+-+Default+Roles+and+Permissions) が提供されていますが、ユーザーで変更または削除が可能です：

| ロール | 目的 | パーミッション |
| ----- | ----- | ----- |
| administrator | ITプロセスやビジネスプロセスの責任を持たない技術的な役割です。| JS7製品の起動、再起動、切り替えなどのすべての権限が含まれます。|
| api_user | API経由でJS7にアクセスする監視システムなどのアプリケーションを対象としています。| 通常、読み取り専用のパーミッションを付与しますが、オーダーを管理したり、ワークフローを展開したりするパーミッションも与えられるています|
| application_manager | 変更管理（Change Management）などのワークフローに関する知識を持つエンジニアの役割です。このロールは必ずしも日常業務には関与しません。| このロールには、コントローラー、クラスタ構成、証明書、およびカスタマイズに関する管理タスクのパーミッションが含まれます。さらに、JS7インベントリーを管理するパーミッションも含まれます。ユーザーアカウントの管理は含まれません。|
| business_user | このロールは、IT運用の責任者ではなく、ビジネスプロセスの責任者である可能性があり、ワークフローの実行状況について常に情報を得たいと考えているバックオフィスユーザーを対象としています。| このロールは、読み取り専用のパーミッションを提供します。|
| incident_manager | サービスデスク業務を担当するためのもので、具体的には1次・2次サポート、インシデント対応、および障害管理を含みます。 | このロールは*application_manager*ロールに基づき、ログファイルへのアクセスなど、インシデント管理に必要なコントローラーとエージェントのフルパーミッションを追加します。|
| it_operator | ワークフローと実行計画の日常運用のためのロールです。| このロールは、読み取り専用パーミッションを付与します。その上に、オーダーを管理し、ワークフローをデプロイするためのパーミッションが付与されます。|

ユーザーは、必要に応じて未使用のロールを削除し、ロールのパーミッションを調整することが推奨されます。

## ロールの範囲

ロールは以下のスコープに対して指定されます：

- すべてのロールは1つまたは複数のインベントリーフォルダに制限できます。
- すべてのロールには、JOCコックピットでの操作のためのパーミッションが割り当てられます。
- すべてのロールには、すべてのコントローラーに対するデフォルト操作のパーミッションが割り当てられます。
- すべてのロールには、コントローラーごとに追加のパーミッションを割り当てることができます。

パーミッションは、関連する範囲で次のいずれかの状態を指定します：

- パーミッションが割り当てられていない状態、
- パーミッションが付与されています、
- パーミッションは無効です。

各ユーザーアカウントのパーミッションは、すべてのロールから統合されます：

- JOCコックピット
  - 1つのロールの範囲でパーミッションが未割り当ての場合、追加のロールがパーミッションを付与できます。どのロールにもパーミッションが付与されていない場合、結果のパーミッションからは付与されません。
  - 1つのロールの範囲でパーミッションが許可されている場合、結果的にパーミッションが許可されます。
  - 単一ロールの範囲でパーミッションが拒否された場合、結果のパーミッションから拒否されます。拒否されたパーミッションは許可されたパーミッションに優先します。
- コントローラー
  - デフォルトの範囲でパーミッションが未割り当ての場合、個々のコントローラーの範囲で関連するコントローラーのパーミッションを許可することができます。
  - デフォルトの範囲でパーミッションが付与されている場合は、 デフォルトですべてのコントローラーに適用されます。
  - 指定したコントローラーにパーミッションが付与された場合は、 そのコントローラーのパーミッションにそのパーミッションが含まれます。
  - 指定したコントローラーに対してパーミッションが拒否された場合は、 同じコントローラーに対してデフォルトおよび他のロールで 与えられたパーミッションが上書きされます。
  - デフォルトでパーミッションが拒否された場合は、 どのコントローラーに対しても同じパーミッションが上書きされます。

## ロールに対する操作

サブビューの右上にある関連ボタンから、以下の操作が可能です：

- **アカウント** は、選択したアカウントに割り当てられたロールに表示を限定します。
- **インポート** は、以前にエキスポートされたロールから生成された JSON 形式のファイルから、ロール情報をインポートできます。
- **コントローラー追加** は、特定のコントローラーを追加できます。
- **ロール追加** は、新しいロールを作成できます。

### ロールに対する操作

ロールの一覧から、ロールをドラッグ＆ドロップで別の位置に移動できます。この操作はロールの処理には影響しません。

各ロールのアクションメニューからは、以下の操作が可能です：

- **編集** は、ロールの名前を変更できます。変更は、任意のユーザ・アカウントが割り当てられている既存のロールを対象とします。
- **新規** は、ロールを新しいロールにコピーします。ユーザは新しいロールの名前を指定します。
- **削除** は、ロールをインベントリーから削除し、そのロールが割り当てられているすべてのユーザアカウントから削除します。

### ロールの一括操作

1つ以上のロールを選択すると、以下の一括操作が可能になります：

- **エキスポート** では、選択したロールの構成を保持するJSON形式のファイルをダウンロードできます。エクスポートされたファイルは、同じJOCコックピットまたは別のJOCコックピットでインポートするために使用できます。
- **コピー** は、後で同じ JOCコックピットの別の ID サービスに貼り付けるために、内部クリップボードにロールを追加します。
- **削除** は、選択したロールをインベントリーおよびロールが割り当てられているユーザアカウントから消去します。

##参照

### コンテキストヘルプ
- [IDサービス管理 - パーミッション](/identity-service-permissions)
- [IDサービス管理](/identity-services)

###Product Knowledge Base
- [JS7 - Default Roles and Permissions](https://kb.sos-berlin.com/display/JS7/JS7+-+Default+Roles+and+Permissions)
- [JS7 - Identity Services](https://kb.sos-berlin.com/display/JS7/JS7+-+Identity+Services)

