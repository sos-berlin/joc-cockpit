# アイデンティティサービスの役割

アイデンティティサービスは、認証と承認によって JOC コックピットへのアクセスを制御します。[Identity Services](/identity-services) を参照してください。

認証のために、JS7 は役割ベースのアクセスモデル（RBAC）を提供します。

- ロールは利用可能な権限から自由に設定できます、
- ユーザは1つまたは複数のロールを割り当てられ、それらのロールは結果として得られる権限にマージされます。

JS7 には以下のものが同梱されています -[JS7 - Default Roles and Permissions](https://kb.sos-berlin.com/display/JS7/JS7+-+Default+Roles+and+Permissions) ユーザーの意思で変更または削除が可能です：

| Role | Purpose | Permissions |
| ----- | ----- | ----- |
| 管理者｜これはITプロセスとビジネスプロセスにおける責任を持たない技術的な役割です。| この役割には、JS7製品の起動、再起動、切り替えなどのすべての権限が含まれます。|
| api_user｜このロールは、API経由でJS7にアクセスするシステムモニターなどのアプリケーションを対象としています。| このロールはできれば閲覧権限を付与します。その上に、オーダーを管理したり、ワークフローを展開したりする権限が与えられます。|
| アプリケーションマネージャ（application_manager）｜変更管理（Change Management）などのワークフローに関する深い知識を持つエンジニアの役割です。このロールは必ずしも日常業務には関与しません。| このロールには、Controllerインスタンス、クラスタ構成、証明書、およびカスタマイズに関する管理タスクの権限が含まれます。さらに、JS7インベントリを管理する権限も含まれます。ユーザーアカウントの管理は含まれません。|
| business_user｜このロールは、IT運用の責任者ではなく、ビジネスプロセスの責任者である可能性があり、ワークフローの実行状況について常に情報を得たいと考えているバックオフィスユーザーを対象としています。| このロールは、読み取り専用のパーミッションを提供します。|
| このロールは*application_manager*ロールに基づき、ログファイルへのアクセスなど、インシデント管理に必要なコントローラとエージェントのフルパーミッションを追加します。|
| it_operator｜ワークフローと実行計画の日常運用のためのロールです。| このロールは、好ましくはビュー権限を付与します。その上に、オーダーを管理し、ワークフローをデプロイするための権限が付与されます。|

ユーザは、必要に応じて未使用のロールを削除し、ロールの権限を調整することが推奨されます。

## ロールの範囲

ロールは以下のスコープに対して指定されます：

- すべてのロールは1つまたは複数のインベントリフォルダに制限できます。
- すべてのロールには、JOCコックピットでの操作のための権限セットが割り当てられます。
- すべてのロールには、すべてのコントローラに対するデフォルト操作の権限セットが割り当てられます。
- すべてのロールには、コントローラごとに追加の権限セットを割り当てることができます。

権限は、関連するスコープで次のいずれかの状態を指定します：

- パーミッションが割り当てられていない状態、
- 権限が付与されています、
- パーミッションは拒否されています。

パーミッションは、ユーザアカウントの結果としてのパーミッションに対して、すべてのロールからマージされます：

- JOCコックピット
  - 1つのロールのスコープでパーミッションが未割り当ての場合、追加のロールがパーミッションを付与できます。どのロールにもパーミッションが付与されていない場合、結果のパーミッションからは付与されません。
  - 1つのロールのスコープでパーミッションが許可されている場合、結果的にパーミッションが許可されます。
  - 単一ロールのスコープでパーミッションが拒否された場合、結果のパーミッションから拒否されます。拒否されたパーミッションは許可されたパーミッションに優先します。
- コントローラ
  - デフォルトのスコープでパーミッションが未割り当ての場合、個々のコントローラのスコープで関連するコントローラのパーミッションを許可することができます。
  - デフォルトのスコープでパーミッションが付与されている場合は、 デフォルトですべてのコントローラに適用されます。
  - 指定したコントローラにパーミッションが付与された場合は、 そのコントローラのパーミッションにそのパーミッションが含まれます。
  - 指定したコントローラに対してパーミッションが拒否された場合は、 同じコントローラに対してデフォルトスコープおよび他のロールで 与えられたパーミッションが上書きされます。
  - デフォルトスコープでパーミッションが拒否された場合は、 どのコントローラに対しても同じパーミッションが上書きされます。

## ロールに対する操作

サブビューの右上にある関連ボタンから、以下の操作が可能です：

- **アカウント**は選択したアカウントに割り当てられたロールに表示を限定します。
- ロールの**エクスポート**から作成されたJSON形式のファイルからロールをインポートします。
- **コントローラの追加**では、特定のコントローラのスコープを追加できます。
- **ロールの追加**では、新しいロールを作成できます。

### 単一のロールに対する操作

ロールの一覧から、ロールをドラッグ＆ドロップで別の位置に移動できます。この操作はロールの処理には影響しません。

各ロールの3点アクションメニューからは、以下の操作が可能です：

- **編集**」では、ロールの名前を変更できます。変更は、任意のユーザ・アカウントが割り当てられている既存のロールを対象とします。
- **Duplicate**はロールを新しいロールにコピーします。ユーザは新しいロールの名前を指定します。
- **Delete**はロールをインベントリから削除し、そのロールが割り当てられているすべてのユーザアカウントから削除します。

### ロールの一括操作

1つ以上のロールを選択すると、以下の一括操作が可能になります：

- **エクスポート**では、選択したロールの構成を保持するJSON形式のファイルをダウンロードできます。エクスポートされたファイルは、同じJOC Cockpitインスタンスまたは別のJOC Cockpitインスタンスでインポートするために使用できます。
- **コピー**は、後で同じ JOC Cockpit インスタンスの別の ID サービスに貼り付けるために、内部クリップボードにロールを追加します。
- **選択したロールをインベントリおよびロールが割り当てられているユーザアカウントから消去します。

##参照

### コンテキストヘルプ

-[Identity Service - Permissions](/identity-service-permissions)
-[Identity Services](/identity-services)

###Product Knowledge Base

-[JS7 - Default Roles and Permissions](https://kb.sos-berlin.com/display/JS7/JS7+-+Default+Roles+and+Permissions)
-[JS7 - Identity Services](https://kb.sos-berlin.com/display/JS7/JS7+-+Identity+Services)
- [JS7 - ユーザーアカウント、ロール、およびパーミッションの管理](https://kb.sos-berlin.com/display/JS7/JS7+-+Management+of+User+Accounts%2C+Roles+and+Permissions)

