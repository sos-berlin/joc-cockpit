<div class="modal-header">
  <h4 class="modal-title">
    <span *ngIf="!data" translate>user.label.generalSetting</span>
    <span *ngIf="data">
      <span translate>user.label.settingFor</span>:
      {{data.identityServiceName}}
    </span>
  </h4>
  <button type="button" class="close" aria-label="Close" (click)="activeModal.destroy()">
    <span aria-hidden="true" class="fa fa-times-circle"></span>
  </button>
</div>
<form #myForm="ngForm" (ngSubmit)="onSubmit()">
  <div class="modal-body p-a">
    <div class="hide" [ngClass]="{'show': display}">
      <app-audit-log-input [comments]="comments" [sizeX]="4" [sizeY]="6"></app-audit-log-input>
    </div>
    <div *ngIf="!data">
      <div class="form-group row" [ngClass]="{'has-error' : ((timeout.dirty || timeout.touched) && timeout.invalid)}">
        <label class="col-sm-4 form-control-label" [nz-tooltip]="'user.tooltips.general.sessionTimeout' | translate"
               [nzTooltipMouseEnterDelay]="0.5" translate>user.label.sessionTimeout
          <sup class="text-danger text-sm">*</sup>
        </label>
        <div class="col-sm-6">
          <input [appAutofocus]="true" type="text" class="form-control" required name="timeout"
                 [placeholder]="'user.placeholder.sessionTimeout' | translate" #timeout="ngModel"
                 validateSessionTimeReqex
                 [(ngModel)]="currentObj.sessionTimeout">
          <div *ngIf="timeout.invalid && (timeout.dirty || timeout.touched)" class="text-danger help-block">
            <div *ngIf="timeout.errors.required">
              <div translate>common.message.requiredError</div>
            </div>
          </div>
        </div>
      </div>
      <div class="form-group row"
           [ngClass]="{'has-error' : ((pwd.dirty || pwd.touched) && pwd.invalid) || !isLengthMatch}">
        <label class="col-sm-4 form-control-label" [nz-tooltip]="'user.tooltips.general.initialPassword' | translate"
               [nzTooltipMouseEnterDelay]="0.5" translate>user.label.initialPassword
          <sup class="text-danger text-sm">*</sup>
        </label>
        <div class="col-sm-6">
          <input [hidden]="passwordFields.first" type="password" class="form-control" required name="initialPassword1"
                 [placeholder]="'user.placeholder.initialPassword' | translate" (blur)="changePswd('PASSWORD')"
                 autocomplete="off" #pwd="ngModel" [(ngModel)]="currentObj.initialPassword1">
          <input [hidden]="!passwordFields.first" type="text" class="form-control" required name="initialPassword"
                 [placeholder]="'user.placeholder.initialPassword' | translate" (blur)="changePswd('TEXT')"
                 autocomplete="off" #pwd="ngModel" [(ngModel)]="currentObj.initialPassword">
          <i class="fa pswd-hide-icon2" [ngClass]="!passwordFields.first ? 'fa-eye' : 'fa-eye-slash'"
             (click)="passwordFields.first = !passwordFields.first"></i>
          <div *ngIf="pwd.invalid && (pwd.dirty || pwd.touched)" class="text-danger help-block">
            <div *ngIf="pwd.errors.required">
              <div translate>common.message.requiredError</div>
            </div>
          </div>
          <div *ngIf="!isLengthMatch" class="text-danger help-block">
            <div translate>user.message.minPasswordLength</div>
          </div>
        </div>
      </div>
      <div class="form-group row"
           [ngClass]="{'has-error' : ((minPasswordLength.dirty || minPasswordLength.touched) && minPasswordLength.invalid)}">
        <label class="col-sm-4 form-control-label" [nz-tooltip]="'user.tooltips.general.minPasswordLength' | translate"
               [nzTooltipMouseEnterDelay]="0.5" translate>user.label.minPasswordLength
          <sup class="text-danger text-sm">*</sup>
        </label>
        <div class="col-sm-6">
          <nz-input-number required name="minPasswordLength"
                           [nzPlaceHolder]="'user.placeholder.minPasswordLength' | translate" [nzMin]="0"
                           #minPasswordLength="ngModel"
                           [(ngModel)]="currentObj.minPasswordLength"
                           (ngModelChange)="isLengthMatch = true"></nz-input-number>
          <div *ngIf="minPasswordLength.invalid && (minPasswordLength.dirty || minPasswordLength.touched)"
               class="text-danger help-block">
            <div *ngIf="minPasswordLength.errors.required">
              <div translate>common.message.requiredError</div>
            </div>
          </div>
        </div>
      </div>
    </div>
    <!------------------------------------BEGIN VAULT-------------------------------------------->
    <div *ngIf="data && data.identityServiceType.match('VAULT')">
      <div class="form-group row">
        <label class="col-sm-4 form-control-label" [nz-tooltip]="'user.tooltips.vault.iamVaultUrl' | translate"
               [nzTooltipMouseEnterDelay]="0.5" translate>user.label.iamVaultUrl
          <sup class="text-danger text-sm">*</sup>
        </label>
        <div class="col-sm-6" [ngClass]="{'has-error' : ((vaultUrl.dirty || vaultUrl.touched) && vaultUrl.invalid)}">
          <input [appAutofocus]="true" type="url" class="form-control" required #vaultUrl="ngModel" name="iamVaultUrl"
                 [placeholder]="'user.placeholder.iamVaultUrl' | translate" [(ngModel)]="currentObj.iamVaultUrl">
          <div *ngIf="vaultUrl.invalid && (vaultUrl.dirty || vaultUrl.touched)" class="text-danger help-block">
            <div *ngIf="vaultUrl.errors.required">
              <div translate>common.message.requiredError</div>
            </div>
          </div>
        </div>
      </div>
      <div class="form-group row">
        <label class="col-sm-4 form-control-label"
               [nz-tooltip]="'user.tooltips.vault.iamVaultAuthenticationMethodPath' | translate"
               [nzTooltipMouseEnterDelay]="0.5" translate>user.label.iamVaultAuthenticationMethodPath
          <sup class="text-danger text-sm">*</sup>
        </label>
        <div class="col-sm-6"
             [ngClass]="{'has-error' : ((methodPath.dirty || methodPath.touched) && methodPath.invalid)}">
          <input type="text" class="form-control" required #methodPath="ngModel" name="iamVaultAuthenticationMethodPath"
                 [placeholder]="'user.placeholder.iamVaultAuthenticationMethodPath' | translate"
                 [(ngModel)]="currentObj.iamVaultAuthenticationMethodPath">
          <div *ngIf="methodPath.invalid && (methodPath.dirty || methodPath.touched)" class="text-danger help-block">
            <div *ngIf="methodPath.errors.required">
              <div translate>common.message.requiredError</div>
            </div>
          </div>
        </div>
      </div>
      <div class="form-group row">
        <label class="col-sm-4 form-control-label"
               [nz-tooltip]="'user.tooltips.vault.iamVaultTrustStorePath' | translate" [nzTooltipMouseEnterDelay]="0.5"
               translate>user.label.iamVaultTrustStorePath</label>
        <div class="col-sm-6">
          <input type="text" class="form-control" name="iamVaultTruststorePath"
                 [(ngModel)]="currentObj.iamVaultTruststorePath"
                 [placeholder]="'user.placeholder.iamVaultTrustStorePath' | translate">
        </div>
      </div>
      <div class="form-group row">
        <label class="col-sm-4 form-control-label"
               [nz-tooltip]="'user.tooltips.vault.iamVaultTrustStorePassword' | translate"
               [nzTooltipMouseEnterDelay]="0.5"
               translate>user.label.iamVaultTrustStorePassword</label>
        <div class="col-sm-6">
          <input type="{{!passwordFields.third ? 'password' : 'text'}}" class="form-control"
                 name="iamVaultTruststorePassword" autocomplete="off"
                 [(ngModel)]="currentObj.iamVaultTruststorePassword"
                 [placeholder]="'user.placeholder.iamVaultTrustStorePassword' | translate">
          <i class="fa pswd-hide-icon2" [ngClass]="!passwordFields.third ? 'fa-eye' : 'fa-eye-slash'"
             (click)="passwordFields.third = !passwordFields.third"></i>
        </div>
      </div>
      <div class="form-group row">
        <label class="col-sm-4 form-control-label"
               [nz-tooltip]="'user.tooltips.vault.iamVaultTrustStoreType' | translate" [nzTooltipMouseEnterDelay]="0.5"
               translate>user.label.iamVaultTrustStoreType
          <sup *ngIf="currentObj.iamVaultTruststorePath" class="text-danger text-sm">*</sup>
        </label>
        <div class="col-sm-6" [ngClass]="{'has-error' : ((storePath.dirty || storePath.touched) && storePath.invalid)}">
          <input name="iamVaultTruststoreType" #storePath="ngModel"
                 [required]="(currentObj.iamVaultTruststorePath && currentObj.iamVaultTruststorePath.length > 0) ? true : false"
                 [placeholder]="'user.placeholder.iamVaultTrustStoreType' | translate" class="form-control"
                 [(ngModel)]="currentObj.iamVaultTruststoreType" [nzAutocomplete]="auto"/>
          <nz-autocomplete #auto>
            <nz-auto-option *ngFor="let option of keyStoreTypes" [nzValue]="option" [nzLabel]="option">
              <span>{{option}}</span>
            </nz-auto-option>
          </nz-autocomplete>
        </div>
      </div>
      <div class="form-group row" *ngIf="data.identityServiceType === 'VAULT-JOC-ACTIVE'">
        <label class="col-sm-4 form-control-label"
               [nz-tooltip]="'user.tooltips.vault.iamVaultApplicationToken' | translate"
               [nzTooltipMouseEnterDelay]="0.5"
               translate>user.label.iamVaultApplicationToken
          <sup class="text-danger text-sm">*</sup>
        </label>
        <div class="col-sm-6" [ngClass]="{'has-error' : ((token.dirty || token.touched) && token.invalid)}">
          <input type="text" class="form-control" required name="iamVaultApplicationToken" #token="ngModel"
                 [(ngModel)]="currentObj.iamVaultApplicationToken"
                 [placeholder]="'user.placeholder.iamVaultApplicationToken' | translate">
        </div>
      </div>
    </div>
    <!------------------------------------BEGIN KEYCLOAK----------------------------------------->
    <div *ngIf="data && data.identityServiceType.match('KEYCLOAK')">
      <div class="form-group row">
        <label class="col-sm-4 form-control-label" [nz-tooltip]="'user.tooltips.keycloak.iamKeycloakUrl' | translate"
               [nzTooltipMouseEnterDelay]="0.5" translate>user.label.iamKeycloakUrl
          <sup class="text-danger text-sm">*</sup>
        </label>
        <div class="col-sm-6"
             [ngClass]="{'has-error' : ((keycloakUrl.dirty || keycloakUrl.touched) && keycloakUrl.invalid)}">
          <input [appAutofocus]="true" type="url" class="form-control" required #keycloakUrl="ngModel"
                 name="iamKeycloakUrl"
                 [placeholder]="'user.placeholder.iamKeycloakUrl' | translate" [(ngModel)]="currentObj.iamKeycloakUrl">
          <div *ngIf="keycloakUrl.invalid && (keycloakUrl.dirty || keycloakUrl.touched)" class="text-danger help-block">
            <div *ngIf="keycloakUrl.errors.required">
              <div translate>common.message.requiredError</div>
            </div>
          </div>
        </div>
      </div>
      <div class="form-group row" *ngIf="data.identityServiceType === 'KEYCLOAK'">
        <label class="col-sm-4 form-control-label"
               [nz-tooltip]="'user.tooltips.keycloak.iamKeycloakAdminAccount' | translate"
               [nzTooltipMouseEnterDelay]="0.5"
               translate>user.label.iamKeycloakAdminAccount
          <sup class="text-danger text-sm">*</sup>
        </label>
        <div class="col-sm-6"
             [ngClass]="{'has-error' : ((iamKeycloakAdminAccount.dirty || iamKeycloakAdminAccount.touched) && iamKeycloakAdminAccount.invalid)}">
          <input type="text" class="form-control" required #iamKeycloakAdminAccount="ngModel"
                 name="iamKeycloakAdminAccount" [placeholder]="'user.placeholder.iamKeycloakAdminAccount' | translate"
                 [(ngModel)]="currentObj.iamKeycloakAdminAccount">
          <div
            *ngIf="iamKeycloakAdminAccount.invalid && (iamKeycloakAdminAccount.dirty || iamKeycloakAdminAccount.touched)"
            class="text-danger help-block">
            <div *ngIf="iamKeycloakAdminAccount.errors.required">
              <div translate>common.message.requiredError</div>
            </div>
          </div>
        </div>
      </div>
      <div class="form-group row" *ngIf="data.identityServiceType === 'KEYCLOAK'">
        <label class="col-sm-4 form-control-label"
               [nz-tooltip]="'user.tooltips.keycloak.iamKeycloakAdminPassword' | translate"
               [nzTooltipMouseEnterDelay]="0.5"
               translate>user.label.iamKeycloakAdminPassword</label>
        <div class="col-sm-6">
          <input type="{{!passwordFields.third ? 'password' : 'text'}}" class="form-control"
                 name="iamKeycloakAdminPassword" autocomplete="off" [(ngModel)]="currentObj.iamKeycloakAdminPassword"
                 [placeholder]="'user.placeholder.iamKeycloakAdminPassword' | translate">
          <i class="fa pswd-hide-icon2" [ngClass]="!passwordFields.third ? 'fa-eye' : 'fa-eye-slash'"
             (click)="passwordFields.third = !passwordFields.third"></i>
        </div>
      </div>
      <div class="form-group row">
        <label class="col-sm-4 form-control-label"
               [nz-tooltip]="'user.tooltips.keycloak.iamKeycloakTrustStorePath' | translate"
               [nzTooltipMouseEnterDelay]="0.5"
               translate>user.label.iamKeycloakTrustStorePath</label>
        <div class="col-sm-6">
          <input type="text" class="form-control" name="iamKeycloakTruststorePath"
                 [(ngModel)]="currentObj.iamKeycloakTruststorePath"
                 [placeholder]="'user.placeholder.iamKeycloakTrustStorePath' | translate">
        </div>
      </div>
      <div class="form-group row">
        <label class="col-sm-4 form-control-label"
               [nz-tooltip]="'user.tooltips.keycloak.iamKeycloakTrustStorePassword' | translate"
               [nzTooltipMouseEnterDelay]="0.5" translate>user.label.iamKeycloakTrustStorePassword</label>
        <div class="col-sm-6">
          <input type="{{!passwordFields.fourth ? 'password' : 'text'}}" class="form-control"
                 name="iamKeycloakTruststorePassword" autocomplete="off"
                 [(ngModel)]="currentObj.iamKeycloakTruststorePassword"
                 [placeholder]="'user.placeholder.iamKeycloakTrustStorePassword' | translate">
          <i class="fa pswd-hide-icon2" [ngClass]="!passwordFields.fourth ? 'fa-eye' : 'fa-eye-slash'"
             (click)="passwordFields.fourth = !passwordFields.fourth"></i>
        </div>
      </div>
      <div class="form-group row">
        <label class="col-sm-4 form-control-label"
               [nz-tooltip]="'user.tooltips.keycloak.iamKeycloakTrustStoreType' | translate"
               [nzTooltipMouseEnterDelay]="0.5"
               translate>user.label.iamKeycloakTrustStoreType
          <sup *ngIf="currentObj.iamKeycloakTruststorePath" class="text-danger text-sm">*</sup>
        </label>
        <div class="col-sm-6" [ngClass]="{'has-error' : ((storePath.dirty || storePath.touched) && storePath.invalid)}">
          <input name="iamKeycloakTruststoreType" #storePath="ngModel"
                 [required]="(currentObj.iamKeycloakTruststorePath && currentObj.iamKeycloakTruststorePath.length > 0) ? true : false"
                 [placeholder]="'user.placeholder.iamKeycloakTrustStoreType' | translate" class="form-control"
                 [(ngModel)]="currentObj.iamKeycloakTruststoreType" [nzAutocomplete]="auto"/>
          <nz-autocomplete #auto>
            <nz-auto-option *ngFor="let option of keyStoreTypes" [nzValue]="option" [nzLabel]="option">
              <span>{{option}}</span>
            </nz-auto-option>
          </nz-autocomplete>
        </div>
      </div>
      <div class="form-group row">
        <label class="col-sm-4 form-control-label"
               [nz-tooltip]="'user.tooltips.keycloak.iamKeycloakClientId' | translate" [nzTooltipMouseEnterDelay]="0.5"
               translate>user.label.iamKeycloakClientId</label>
        <div class="col-sm-6">
          <input type="text" class="form-control" name="iamKeycloakClientId"
                 [(ngModel)]="currentObj.iamKeycloakClientId"
                 [placeholder]="'user.placeholder.iamKeycloakClientId' | translate">
        </div>
      </div>
      <div class="form-group row">
        <label class="col-sm-4 form-control-label"
               [nz-tooltip]="'user.tooltips.keycloak.iamKeycloakClientSecret' | translate"
               [nzTooltipMouseEnterDelay]="0.5"
               translate>user.label.iamKeycloakClientSecret</label>
        <div class="col-sm-6">
          <input type="{{!passwordFields.third ? 'password' : 'text'}}" class="form-control"
                 name="iamKeycloakClientSecret" [(ngModel)]="currentObj.iamKeycloakClientSecret"
                 [placeholder]="'user.placeholder.iamKeycloakClientSecret' | translate">
          <i class="fa pswd-hide-icon2" [ngClass]="!passwordFields.third ? 'fa-eye' : 'fa-eye-slash'"
             (click)="passwordFields.third = !passwordFields.third"></i>
        </div>
      </div>
      <div class="form-group row">
        <label class="col-sm-4 form-control-label" [nz-tooltip]="'user.tooltips.keycloak.iamKeycloakRealm' | translate"
               [nzTooltipMouseEnterDelay]="0.5" translate>user.label.iamKeycloakRealm</label>
        <div class="col-sm-6">
          <input type="text" class="form-control" name="iamKeycloakRealm" [(ngModel)]="currentObj.iamKeycloakRealm"
                 [placeholder]="'user.placeholder.iamKeycloakRealm' | translate">
        </div>
      </div>
    </div>
    <!------------------------------------BEGIN LDAP--------------------------------------------->
    <div *ngIf="data && data.identityServiceType.match('LDAP')">
      <nz-tabset class="m-t-n-8">
        <nz-tab [nzTitle]="'user.tab.simpleMode' | translate">
          <div class="m-l-12 m-r-12">
            <div class="form-group row">
              <label class="col-sm-4 form-control-label" [nz-tooltip]="'user.tooltips.ldap.iamLdapHost' | translate"
                     [nzTooltipMouseEnterDelay]="0.5" translate>user.usermode.label.iamLdapHost
                <sup class="text-danger text-sm">*</sup>
              </label>
              <div class="col-sm-6" [ngClass]="{'has-error' : ((host.dirty || host.touched) && host.invalid)}">
                <input [appAutofocus]="true" type="text" class="form-control" name="iamLdapHost" required
                       #host="ngModel"
                       (blur)="changeField()" [(ngModel)]="userObj.iamLdapHost"
                       [placeholder]="'user.usermode.placeholder.iamLdapHost' | translate">
              </div>
            </div>
            <div class="form-group row">
              <label class="col-sm-4 form-control-label" [nz-tooltip]="'user.tooltips.ldap.iamLdapProtocol' | translate"
                     [nzTooltipMouseEnterDelay]="0.5" translate>user.usermode.label.iamLdapProtocol
                <sup class="text-danger text-sm">*</sup>
              </label>
              <div class="col-sm-6">
                <nz-select name="iamLdapProtocol" required [(ngModel)]="userObj.iamLdapProtocol"
                           (ngModelChange)="changeConfiguration($event)">
                  <nz-option *ngFor="let option of iamLdapProtocols"
                             [nzLabel]="'user.usermode.label.'+ option.text | translate"
                             [nzValue]="option.value"></nz-option>
                </nz-select>
              </div>
            </div>
            <div class="form-group row">
              <label class="col-sm-4 form-control-label" [nz-tooltip]="'user.tooltips.ldap.iamLdapPort' | translate"
                     [nzTooltipMouseEnterDelay]="0.5" translate>user.usermode.label.iamLdapPort
                <sup class="text-danger text-sm">*</sup>
              </label>
              <div class="col-sm-6" [ngClass]="{'has-error' : ((port.dirty || port.touched) && port.invalid)}">
                <input type="text" class="form-control" name="iamLdapPort" required #port="ngModel"
                       (blur)="changeField()" [(ngModel)]="userObj.iamLdapPort"
                       [placeholder]="'user.usermode.placeholder.iamLdapPort' | translate">
              </div>
            </div>
            <div class="form-group row">
              <label class="col-sm-4" [nz-tooltip]="'user.tooltips.ldap.iamLdapAD' | translate"
                     [nzTooltipMouseEnterDelay]="0.5" translate>user.usermode.label.iamLdapAD</label>
              <div class="col-sm-6">
                <label nz-checkbox [(ngModel)]="userObj.iamLdapAD" (ngModelChange)="checkConfirmation($event, 'AD')"
                       name="iamLdapAD"></label>
              </div>
            </div>
            <div class="form-group row">
              <label class="col-sm-4" [nz-tooltip]="'user.tooltips.ldap.iamLdapADWithSamAccount' | translate"
                     [nzTooltipMouseEnterDelay]="0.5" translate>user.usermode.label.iamLdapADWithSamAccount</label>
              <div class="col-sm-6">
                <label nz-checkbox [nzDisabled]="!userObj.iamLdapAD" [(ngModel)]="userObj.iamLdapADwithSamAccount"
                       (ngModelChange)="checkConfirmation($event, 'samAccount')" name="iamLdapADWithSamAccount"></label>
              </div>
            </div>
            <div class="form-group row">
              <label class="col-sm-4" [nz-tooltip]="'user.tooltips.ldap.iamLdapWithMemberOf' | translate"
                     [nzTooltipMouseEnterDelay]="0.5" translate>user.usermode.label.iamLdapWithMemberOf</label>
              <div class="col-sm-6">
                <label nz-checkbox [(ngModel)]="userObj.iamLdapWithMemberOf"
                       (ngModelChange)="checkConfirmation($event, 'MemberOf')" name="iamLdapWithMemberOf"></label>
              </div>
            </div>
            <div class="form-group row">
              <label class="col-sm-4 form-control-label"
                     [nz-tooltip]="'user.tooltips.ldap.iamLdapUserDnTemplate' | translate"
                     [nzTooltipMouseEnterDelay]="0.5"
                     translate>user.label.iamLdapUserDnTemplate
                <sup class="text-danger text-sm">*</sup>
              </label>
              <div class="col-sm-6"
                   [ngClass]="{'has-error' : ((dnTemplate.dirty || dnTemplate.touched) && dnTemplate.invalid)}">
                <input type="text" required class="form-control" name="iamLdapUserDnTemplate" (blur)="changeInput('Dn')"
                       [placeholder]="'user.placeholder.iamLdapUserDnTemplate' | translate" #dnTemplate="ngModel"
                       [(ngModel)]="currentObj.iamLdapUserDnTemplate">
              </div>
            </div>
            <div class="form-group row">
              <label class="col-sm-4 form-control-label"
                     [nz-tooltip]="'user.tooltips.ldap.iamLdapSearchBase' | translate" [nzTooltipMouseEnterDelay]="0.5"
                     translate>user.label.iamLdapSearchBase
                <sup *ngIf="userObj.iamLdapWithMemberOf" class="text-danger text-sm">*</sup>
              </label>
              <div class="col-sm-6"
                   [ngClass]="{'has-error' : ((searchBase.dirty || searchBase.touched) && searchBase.invalid)}">
                <input type="text" class="form-control" name="iamLdapSearchBase"
                       [required]="userObj.iamLdapWithMemberOf" #searchBase="ngModel"
                       [placeholder]="'user.placeholder.iamLdapSearchBase' | translate"
                       [(ngModel)]="currentObj.iamLdapSearchBase">
              </div>
            </div>
            <div class="form-group row">
              <label class="col-sm-4 form-control-label"
                     [nz-tooltip]="'user.tooltips.ldap.iamLdapUserSearchFilter' | translate"
                     [nzTooltipMouseEnterDelay]="0.5"
                     translate>user.label.iamLdapUserSearchFilter</label>
              <div class="col-sm-6">
                <input type="text" class="form-control" name="iamLdapUserSearchFilter"
                       [placeholder]="'user.placeholder.iamLdapUserSearchFilter' | translate"
                       [(ngModel)]="currentObj.iamLdapUserSearchFilter">
              </div>
            </div>
          </div>
        </nz-tab>
        <nz-tab [nzTitle]="'user.tab.expertMode' | translate">
          <div class="m-l-12 m-r-12">
            <div class="form-group row">
              <div class="col-md-12" translate>user.label.general</div>
            </div>
            <div class="p-a b-a">
              <div class="form-group row">
                <label class="col-sm-4 form-control-label"
                       [nz-tooltip]="'user.tooltips.ldap.iamLdapServerUrl' | translate" [nzTooltipMouseEnterDelay]="0.5"
                       translate>user.label.iamLdapServerUrl
                  <sup class="text-danger text-sm">*</sup>
                </label>
                <div class="col-sm-6"
                     [ngClass]="{'has-error' : ((iamLdapServerUrl.dirty || iamLdapServerUrl.touched) && iamLdapServerUrl.invalid)}">
                  <input type="url" class="form-control" required #iamLdapServerUrl="ngModel" name="iamLdapServerUrl"
                         (blur)="changeInput('URL')" [placeholder]="'user.placeholder.iamLdapServerUrl' | translate"
                         [(ngModel)]="currentObj.iamLdapServerUrl">
                </div>
              </div>
              <div class="form-group row">
                <label class="col-sm-4 form-control-label"
                       [nz-tooltip]="'user.tooltips.ldap.iamLdapReadTimeout' | translate"
                       [nzTooltipMouseEnterDelay]="0.5"
                       translate>user.label.iamLdapReadTimeout
                </label>
                <div class="col-sm-6"
                     [ngClass]="{'has-error' : ((iamLdapReadTimeout.dirty || iamLdapReadTimeout.touched) && iamLdapReadTimeout.invalid)}">
                  <nz-input-number name="iamLdapReadTimeout"
                                   [nzPlaceHolder]="'user.placeholder.iamLdapReadTimeout' | translate" [nzMin]="0"
                                   #iamLdapReadTimeout="ngModel"
                                   [(ngModel)]="currentObj.iamLdapReadTimeout"></nz-input-number>
                </div>
              </div>
              <div class="form-group row">
                <label class="col-sm-4 form-control-label"
                       [nz-tooltip]="'user.tooltips.ldap.iamLdapConnectTimeout' | translate"
                       [nzTooltipMouseEnterDelay]="0.5"
                       translate>user.label.iamLdapConnectTimeout
                </label>
                <div class="col-sm-6"
                     [ngClass]="{'has-error' : ((iamLdapConnectTimeout.dirty || iamLdapConnectTimeout.touched) && iamLdapConnectTimeout.invalid)}">
                  <nz-input-number name="iamLdapConnectTimeout"
                                   [nzPlaceHolder]="'user.placeholder.iamLdapConnectTimeout' | translate" [nzMin]="0"
                                   #iamLdapConnectTimeout="ngModel"
                                   [(ngModel)]="currentObj.iamLdapConnectTimeout"></nz-input-number>
                </div>
              </div>
              <div class="form-group row">
                <label class="col-sm-4" [nz-tooltip]="'user.tooltips.ldap.iamLdapUseStartTls' | translate"
                       [nzTooltipMouseEnterDelay]="0.5" translate>user.label.iamLdapUseStartTls</label>
                <div class="col-sm-6">
                  <label nz-checkbox [(ngModel)]="currentObj.iamLdapUseStartTls"
                         (ngModelChange)="checkConfirmation($event, 'StartTls')" name="iamLdapUseStartTls"></label>
                </div>
              </div>
              <div class="form-group row">
                <label class="col-sm-4" [nz-tooltip]="'user.tooltips.ldap.iamLdapHostNameVerification' | translate"
                       [nzTooltipMouseEnterDelay]="0.5" translate>user.label.iamLdapHostNameVerification</label>
                <div class="col-sm-6">
                  <label nz-checkbox [(ngModel)]="currentObj.iamLdapHostNameVerification"
                         name="iamLdapHostNameVerification"></label>
                </div>
              </div>
              <div class="form-group row">
                <label class="col-sm-4 form-control-label"
                       [nz-tooltip]="'user.tooltips.ldap.iamLdapTrustStorePath' | translate"
                       [nzTooltipMouseEnterDelay]="0.5"
                       translate>user.label.iamLdapTrustStorePath</label>
                <div class="col-sm-6">
                  <input type="text" class="form-control" name="iamLdapTruststorePath" autocomplete="off"
                         [(ngModel)]="currentObj.iamLdapTruststorePath"
                         [placeholder]="'user.placeholder.iamLdapTrustStorePath' | translate">
                </div>
              </div>
              <div class="form-group row">
                <label class="col-sm-4 form-control-label"
                       [nz-tooltip]="'user.tooltips.ldap.iamLdapTrustStorePassword' | translate"
                       [nzTooltipMouseEnterDelay]="0.5" translate>user.label.iamLdapTrustStorePassword</label>
                <div class="col-sm-6">
                  <input type="{{!passwordFields.third ? 'password' : 'text'}}" class="form-control"
                         name="iamLdapTruststorePassword" autocomplete="off"
                         [(ngModel)]="currentObj.iamLdapTruststorePassword"
                         [placeholder]="'user.placeholder.iamLdapTrustStorePassword' | translate">
                  <i class="fa pswd-hide-icon2" [ngClass]="!passwordFields.third ? 'fa-eye' : 'fa-eye-slash'"
                     (click)="passwordFields.third = !passwordFields.third"></i>
                </div>
              </div>
              <div class="row">
                <label class="col-sm-4 form-control-label"
                       [nz-tooltip]="'user.tooltips.ldap.iamLdapTrustStoreType' | translate"
                       [nzTooltipMouseEnterDelay]="0.5"
                       translate>user.label.iamLdapTrustStoreType
                  <sup *ngIf="currentObj.iamLdapTruststorePath" class="text-danger text-sm">*</sup>
                </label>
                <div class="col-sm-6"
                     [ngClass]="{'has-error' : ((ldapTruststorePath.dirty || ldapTruststorePath.touched) && ldapTruststorePath.invalid)}">
                  <input name="iamLdapTruststoreType"
                         [required]="(currentObj.iamLdapTruststorePath && currentObj.iamLdapTruststorePath.length>0) ? true : false"
                         #ldapTruststorePath="ngModel"
                         [placeholder]="'user.placeholder.iamLdapTrustStoreType' | translate"
                         class="form-control" [(ngModel)]="currentObj.iamLdapTruststoreType" [nzAutocomplete]="auto"/>
                  <nz-autocomplete #auto>
                    <nz-auto-option *ngFor="let option of keyStoreTypes" [nzValue]="option" [nzLabel]="option">
                      <span>{{option}}</span>
                    </nz-auto-option>
                  </nz-autocomplete>
                </div>
              </div>
            </div>
            <div class="form-group row m-t">
              <div class="col-md-12" translate>user.label.authentication</div>
            </div>
            <div class="p-a b-a">
              <div class="form-group row">
                <label class="col-sm-4 form-control-label"
                       [nz-tooltip]="'user.tooltips.ldap.iamLdapUserDnTemplate' | translate"
                       [nzTooltipMouseEnterDelay]="0.5"
                       translate>user.label.iamLdapUserDnTemplate
                  <sup class="text-danger text-sm">*</sup>
                </label>
                <div class="col-sm-6"
                     [ngClass]="{'has-error' : ((dnTemplate.dirty || dnTemplate.touched) && dnTemplate.invalid)}">
                  <input type="text" required class="form-control" name="iamLdapUserDnTemplate"
                         (blur)="changeInput('Dn')" [placeholder]="'user.placeholder.iamLdapUserDnTemplate' | translate"
                         #dnTemplate="ngModel" [(ngModel)]="currentObj.iamLdapUserDnTemplate">
                </div>
              </div>
              <div class="form-group row">
                <label class="col-sm-4 form-control-label"
                       [nz-tooltip]="'user.tooltips.ldap.iamLdapSystemUser' | translate"
                       [nzTooltipMouseEnterDelay]="0.5"
                       translate>user.label.iamLdapSystemUser</label>
                <div class="col-sm-6">
                  <input type="text" class="form-control" name="iamLdapSystemUser" autocomplete="off"
                         [(ngModel)]="currentObj.iamLdapSystemUser"
                         [placeholder]="'user.placeholder.iamLdapSystemUser' | translate">
                </div>
              </div>
              <div class="row">
                <label class="col-sm-4 form-control-label"
                       [nz-tooltip]="'user.tooltips.ldap.iamLdapSystemPassword' | translate"
                       [nzTooltipMouseEnterDelay]="0.5"
                       translate>user.label.iamLdapSystemPassword</label>
                <div class="col-sm-6">
                  <input type="{{!passwordFields.fourth ? 'password' : 'text'}}" class="form-control"
                         name="iamLdapSystemPassword" autocomplete="off" [(ngModel)]="currentObj.iamLdapSystemPassword"
                         [placeholder]="'user.placeholder.iamLdapSystemPassword' | translate">
                  <i class="fa pswd-hide-icon2" [ngClass]="!passwordFields.fourth ? 'fa-eye' : 'fa-eye-slash'"
                     (click)="passwordFields.fourth = !passwordFields.fourth"></i>
                </div>
              </div>
            </div>
            <div class="form-group row m-t" *ngIf="data.identityServiceType !== 'LDAP-JOC'">
              <div class="col-md-12" translate>user.label.groupRolesMapping</div>
            </div>
            <div class="p-a b-a" *ngIf="data.identityServiceType !== 'LDAP-JOC'">
              <div class="form-group row">
                <label class="col-sm-4 form-control-label"
                       [nz-tooltip]="'user.tooltips.ldap.iamLdapSearchBase' | translate"
                       [nzTooltipMouseEnterDelay]="0.5"
                       translate>user.label.iamLdapSearchBase
                  <sup *ngIf="userObj.iamLdapWithMemberOf" class="text-danger text-sm">*</sup>
                </label>
                <div class="col-sm-6"
                     [ngClass]="{'has-error' : ((searchBase.dirty || searchBase.touched) && searchBase.invalid)}">
                  <input type="text" class="form-control" name="iamLdapSearchBase"
                         [required]="userObj.iamLdapWithMemberOf" #searchBase="ngModel"
                         [placeholder]="'user.placeholder.iamLdapSearchBase' | translate"
                         [(ngModel)]="currentObj.iamLdapSearchBase">
                </div>
              </div>
              <div class="form-group row">
                <label class="col-sm-4 form-control-label"
                       [nz-tooltip]="'user.tooltips.ldap.iamLdapGroupSearchBase' | translate"
                       [nzTooltipMouseEnterDelay]="0.5" translate>user.label.iamLdapGroupSearchBase</label>
                <div class="col-sm-6">
                  <input type="text" [disabled]="userObj.iamLdapWithMemberOf" class="form-control"
                         name="iamLdapGroupSearchBase"
                         [placeholder]="'user.placeholder.iamLdapGroupSearchBase' | translate"
                         [(ngModel)]="currentObj.iamLdapGroupSearchBase">
                </div>
              </div>
              <div class="form-group row">
                <label class="col-sm-4 form-control-label"
                       [nz-tooltip]="'user.tooltips.ldap.iamLdapGroupSearchFilter' | translate"
                       [nzTooltipMouseEnterDelay]="0.5" translate>user.label.iamLdapGroupSearchFilter</label>
                <div class="col-sm-6">
                  <input type="text" [disabled]="userObj.iamLdapWithMemberOf" class="form-control"
                         name="iamLdapGroupSearchFilter"
                         [placeholder]="'user.placeholder.iamLdapGroupSearchFilter' | translate"
                         [(ngModel)]="currentObj.iamLdapGroupSearchFilter">
                </div>
              </div>
              <div class="form-group row">
                <label class="col-sm-4 form-control-label"
                       [nz-tooltip]="'user.tooltips.ldap.iamLdapUserSearchFilter' | translate"
                       [nzTooltipMouseEnterDelay]="0.5" translate>user.label.iamLdapUserSearchFilter</label>
                <div class="col-sm-6">
                  <input type="text" class="form-control" name="iamLdapUserSearchFilter"
                         [placeholder]="'user.placeholder.iamLdapUserSearchFilter' | translate"
                         [(ngModel)]="currentObj.iamLdapUserSearchFilter">
                </div>
              </div>
              <div class="form-group row">
                <label class="col-sm-4 form-control-label"
                       [nz-tooltip]="'user.tooltips.ldap.iamLdapGroupNameAttribute' | translate"
                       [nzTooltipMouseEnterDelay]="0.5" translate>user.label.iamLdapGroupNameAttribute</label>
                <div class="col-sm-6">
                  <input type="text" class="form-control" name="iamLdapGroupNameAttribute"
                         (blur)="changeInput('GroupName')"
                         [placeholder]="'user.placeholder.iamLdapGroupNameAttribute' | translate"
                         [(ngModel)]="currentObj.iamLdapGroupNameAttribute">
                </div>
              </div>
              <div class="form-group row">
                <label class="col-sm-4 form-control-label"
                       [nz-tooltip]="'user.tooltips.ldap.iamLdapUserNameAttribute' | translate"
                       [nzTooltipMouseEnterDelay]="0.5" translate>user.label.iamLdapUserNameAttribute</label>
                <div class="col-sm-6">
                  <input type="text" class="form-control" name="iamLdapUserNameAttribute"
                         [placeholder]="'user.placeholder.iamLdapUserNameAttribute' | translate"
                         [(ngModel)]="currentObj.iamLdapUserNameAttribute">
                </div>
              </div>
              <div class="form-group row">
                <label class="col-sm-5 _600" [nz-tooltip]="'user.tooltips.ldap.iamLdapGroupRolesMap' | translate"
                       [nzTooltipMouseEnterDelay]="0.5" translate>user.label.iamLdapGroupRolesMap</label>
              </div>
              <div class="form-group row m-b-0"
                   *ngIf="currentObj.iamLdapGroupRolesMap && currentObj.iamLdapGroupRolesMap.items.length > 0">
                <div class="col-md-5 m-b-sm" translate>user.label.group</div>
                <div class="col-md-6 m-b-sm m-l-22" translate>user.label.roles</div>
              </div>
              <ng-container *ngIf="currentObj.iamLdapGroupRolesMap && currentObj.iamLdapGroupRolesMap.items.length > 0">
                <div class="form-group row m-b-0"
                     *ngFor="let item of currentObj.iamLdapGroupRolesMap.items; let i = index">
                  <div class="col-md-5 m-b-sm"
                       [ngClass]="{'has-error' : ((group.dirty || group.touched) && group.invalid)}">
                    <input #group="ngModel" type="text" class="form-control" name="group{{i}}"
                           [(ngModel)]="item.ldapGroupDn" placeholder="{{'user.placeholder.group' | translate}}">
                  </div>
                  <div class="col-md-6 m-b-sm"
                       [ngClass]="{'has-error' : ((roles.dirty || roles.touched) && roles.invalid)}">
                    <nz-select name="roles{{i}}" #roles="ngModel"
                               [required]="(item.ldapGroupDn && item.ldapGroupDn.length > 0) ? true : false"
                               nzShowSearch
                               nzMode="multiple" nzPlaceHolder="{{'user.placeholder.selectRoles' | translate}}"
                               [(ngModel)]="item.roles">
                      <nz-option *ngFor="let option of allRoles" [nzLabel]="option" [nzValue]="option"></nz-option>
                    </nz-select>
                  </div>
                  <div class="col-md-1">
                    <a class="cursor" (click)="removeGroupRoles(i)"><i
                      class="fa fa-times m-t-sm text-hover-color"></i></a>
                  </div>
                </div>
              </ng-container>
              <div class="row">
                <div class="col-sm-12">
                  <a class="text-u-l" (click)="addGroupRoles()" translate>user.button.addGroupRole</a>
                </div>
              </div>
            </div>
          </div>
        </nz-tab>
      </nz-tabset>
    </div>
    <!------------------------------------BEGIN OIDC--------------------------------------------->
    <div *ngIf="data && data.identityServiceType.match('OIDC')">
      <div class="form-group row">
        <label class="col-sm-4 form-control-label" [nz-tooltip]="'user.tooltips.oidc.iamOidcName' | translate"
               [nzTooltipMouseEnterDelay]="0.5" translate>user.label.iamOidcName
          <sup class="text-danger text-sm">*</sup>
        </label>
        <div class="col-sm-6"
             [ngClass]="{'has-error' : ((iamOidcName.dirty || iamOidcName.touched) && iamOidcName.invalid)}">
          <input [appAutofocus]="true" type="text" class="form-control" required #iamOidcName="ngModel"
                 name="iamOidcName"
                 [placeholder]="'user.placeholder.iamOidcName' | translate" [(ngModel)]="currentObj.iamOidcName">
          <div *ngIf="iamOidcName.invalid && (iamOidcName.dirty || iamOidcName.touched)" class="text-danger help-block">
            <div *ngIf="iamOidcName.errors.required">
              <div translate>common.message.requiredError</div>
            </div>
          </div>
        </div>
      </div>
      <div class="form-group row">
        <label class="col-sm-4 form-control-label"
               [nz-tooltip]="'user.tooltips.oidc.iamOidcAuthenticationUrl' | translate" [nzTooltipMouseEnterDelay]="0.5"
               translate>user.label.iamOidcAuthenticationUrl
          <sup class="text-danger text-sm">*</sup>
        </label>
        <div class="col-sm-6"
             [ngClass]="{'has-error' : ((iamOidcAuthenticationUrl.dirty || iamOidcAuthenticationUrl.touched) && iamOidcAuthenticationUrl.invalid)}">
          <input type="text" class="form-control" required #iamOidcAuthenticationUrl="ngModel"
                 name="iamOidcAuthenticationUrl" [placeholder]="'user.placeholder.iamOidcAuthenticationUrl' | translate"
                 [(ngModel)]="currentObj.iamOidcAuthenticationUrl">
          <div
            *ngIf="iamOidcAuthenticationUrl.invalid && (iamOidcAuthenticationUrl.dirty || iamOidcAuthenticationUrl.touched)"
            class="text-danger help-block">
            <div *ngIf="iamOidcAuthenticationUrl.errors.required">
              <div translate>common.message.requiredError</div>
            </div>
          </div>
        </div>
      </div>
      <div class="form-group row">
        <label class="col-sm-4 form-control-label" [nz-tooltip]="'user.tooltips.oidc.iamOidcClientId' | translate"
               [nzTooltipMouseEnterDelay]="0.5" translate>user.label.iamOidcClientId
          <sup class="text-danger text-sm">*</sup>
        </label>
        <div class="col-sm-6"
             [ngClass]="{'has-error' : ((iamOidcClientId.dirty || iamOidcClientId.touched) && iamOidcClientId.invalid)}">
          <input type="text" class="form-control" required #iamOidcClientId="ngModel" name="iamOidcClientId"
                 [placeholder]="'user.placeholder.iamOidcClientId' | translate"
                 [(ngModel)]="currentObj.iamOidcClientId">
          <div *ngIf="iamOidcClientId.invalid && (iamOidcClientId.dirty || iamOidcClientId.touched)"
               class="text-danger help-block">
            <div *ngIf="iamOidcClientId.errors.required">
              <div translate>common.message.requiredError</div>
            </div>
          </div>
        </div>
      </div>
      <div class="form-group row">
        <label class="col-sm-4 form-control-label" [nz-tooltip]="'user.tooltips.oidc.iamOidcClientSecret' | translate"
               [nzTooltipMouseEnterDelay]="0.5" translate>user.label.iamOidcClientSecret
          <sup class="text-danger text-sm">*</sup>
        </label>
        <div class="col-sm-6"
             [ngClass]="{'has-error' : ((iamOidcClientSecret.dirty || iamOidcClientSecret.touched) && iamOidcClientSecret.invalid)}">
          <input type="{{!passwordFields.fourth ? 'password' : 'text'}}" class="form-control" required
                 #iamOidcClientSecret="ngModel" name="iamOidcClientSecret"
                 [placeholder]="'user.placeholder.iamOidcClientSecret' | translate"
                 [(ngModel)]="currentObj.iamOidcClientSecret" autocomplete="off">
          <i class=" fa pswd-hide-icon2" [ngClass]="!passwordFields.fourth ? 'fa-eye' : 'fa-eye-slash'"
             (click)="passwordFields.fourth = !passwordFields.fourth"></i>
          <div *ngIf="iamOidcClientSecret.invalid && (iamOidcClientSecret.dirty || iamOidcClientSecret.touched)"
               class="text-danger help-block">
            <div *ngIf="iamOidcClientSecret.errors.required">
              <div translate>common.message.requiredError</div>
            </div>
          </div>
        </div>
      </div>
      <div class="form-group row">
        <label class="col-sm-4 form-control-label" [nz-tooltip]="'user.tooltips.oidc.iamOidcUserAttribute' | translate"
               [nzTooltipMouseEnterDelay]="0.5" translate>user.label.iamOidcUserAttribute
        </label>
        <div class="col-sm-6"
             [ngClass]="{'has-error' : ((iamOidcUserAttribute.dirty || iamOidcUserAttribute.touched) && iamOidcUserAttribute.invalid)}">
          <input type="text" class="form-control" #iamOidcUserAttribute="ngModel" name="iamOidcUserAttribute"
                 [placeholder]="'user.placeholder.iamOidcUserAttribute' | translate"
                 [(ngModel)]="currentObj.iamOidcUserAttribute" autocomplete="off">
          <div *ngIf="iamOidcUserAttribute.invalid && (iamOidcUserAttribute.dirty || iamOidcUserAttribute.touched)"
               class="text-danger help-block">
            <div *ngIf="iamOidcUserAttribute.errors.required">
              <div translate>common.message.requiredError</div>
            </div>
          </div>
        </div>
      </div>
      <div class="form-group row">
        <label class="col-sm-4" [ngClass]="{'form-control-label': imageUploader.queue.length > 0}"
               [nz-tooltip]="'user.tooltips.oidc.iamOidcImage' | translate"
               [nzTooltipMouseEnterDelay]="0.5" translate>user.label.iamOidcImage

        </label>
        <div class="col-sm-6">
          <div class="upload-btn-wrapper1" *ngIf="imageUploader.queue.length == 0 && !imageUrl">
            <button type="button" class="btn btn-default btn-sm ">
              <i nz-icon nzType="upload" nzTheme="outline"></i>&nbsp;
              {{'user.button.uploadImage' | translate}}
            </button>
            <input type="file" accept=".png, .PNG" ng2FileSelect (onFileSelected)="onImageSelected($event)"
                   [uploader]="imageUploader">
          </div>
          <div *ngFor="let item of imageUploader.queue; let first = first;">
            <img src="" thumbnail [image]="item?._file"/>
            {{ item?.file?.name }}
          </div>
          <div *ngIf="imageUrl">
            <img src="{{imageUrl}}" height="28px"/>
          </div>
        </div>
        <div class="col-sm-2" *ngIf="imageUploader.queue.length > 0 || imageUrl">
          <a *ngIf="imageUploader.queue.length > 0" class="text-hover-color pos-rel t-xs"
             (click)="imageUploader.clearQueue()"><i class="fa fa-trash"></i></a>
          <a *ngIf="imageUrl" class="text-hover-color pos-rel t-xs" (click)="deleteImage()"><i class="fa fa-trash"></i></a>
        </div>
      </div>

      <div class="p-a b-a">
        <div class="form-group row">
          <label class="col-sm-4 form-control-label"
                 [nz-tooltip]="'user.tooltips.oidc.iamOidcTruststorePath' | translate" [nzTooltipMouseEnterDelay]="0.5"
                 translate>user.label.iamOidcTruststorePath
          </label>
          <div class="col-sm-6">
            <input type="text" class="form-control" name="iamOidcTruststorePath"
                   [placeholder]="'user.placeholder.iamOidcTruststorePath' | translate"
                   [(ngModel)]="currentObj.iamOidcTruststorePath">
          </div>
        </div>
        <div class="form-group row">
          <label class="col-sm-4 form-control-label"
                 [nz-tooltip]="'user.tooltips.oidc.iamOidcTruststoreType' | translate" [nzTooltipMouseEnterDelay]="0.5"
                 translate>user.label.iamOidcTruststoreType
          </label>
          <div class="col-sm-6">
            <input type="text" class="form-control" name="iamOidcTruststoreType"
                   [placeholder]="'user.placeholder.iamOidcTruststoreType' | translate"
                   [(ngModel)]="currentObj.iamOidcTruststoreType" [nzAutocomplete]="auto"/>
            <nz-autocomplete #auto>
              <nz-auto-option *ngFor="let option of keyStoreTypes" [nzValue]="option" [nzLabel]="option">
                <span>{{option}}</span>
              </nz-auto-option>
            </nz-autocomplete>
          </div>
        </div>
        <div class="form-group row">
          <label class="col-sm-4 form-control-label"
                 [nz-tooltip]="'user.tooltips.oidc.iamOidcTruststorePassword' | translate"
                 [nzTooltipMouseEnterDelay]="0.5"
                 translate>user.label.iamOidcTruststorePassword
          </label>
          <div class="col-sm-6">

            <input type="{{!passwordFields.third ? 'password' : 'text'}}" class="form-control"
                   name="iamOidcTruststorePassword" autocomplete="off"
                   [(ngModel)]="currentObj.iamOidcTruststorePassword"
                   [placeholder]="'user.placeholder.iamOidcTruststorePassword' | translate">
            <i class="fa pswd-hide-icon2" [ngClass]="!passwordFields.third ? 'fa-eye' : 'fa-eye-slash'"
               (click)="passwordFields.third = !passwordFields.third"></i>
          </div>
        </div>
      </div>
    </div>
    <!------------------------------------BEGIN FIDO2-------------------------------------------->
    <div *ngIf="data && data.identityServiceType.match('FIDO2')">
      <div class="form-group row">
        <label class="col-sm-4 form-control-label"
               [nz-tooltip]="'user.tooltips.fido2.iamFido2Attestation' | translate" [nzTooltipMouseEnterDelay]="0.5"
               translate>user.label.iamFido2Attestation
        </label>
        <div class="col-sm-6">
          <nz-select name="iamFido2Attestation" [(ngModel)]="currentObj.iamFido2Attestation">
            <nz-option *ngFor="let option of iamFido2Attestation"
                       [nzLabel]="option.text" [nzValue]="option.value"></nz-option>
          </nz-select>
        </div>
      </div>
      <div class="form-group row">
        <label class="col-sm-4 form-control-label" [nz-tooltip]="'user.tooltips.fido2.iamFido2Timeout' | translate"
               [nzTooltipMouseEnterDelay]="0.5" translate>user.label.iamFido2Timeout
        </label>
        <div class="col-sm-6"
             [ngClass]="{'has-error' : ((iamFido2Timeout.dirty || iamFido2Timeout.touched) && iamFido2Timeout.invalid)}">
          <nz-input-number name="iamFido2Timeout"
                           [nzPlaceHolder]="'user.placeholder.iamFido2Timeout' | translate" [nzMin]="0"
                           #iamFido2Timeout="ngModel"
                           [(ngModel)]="currentObj.iamFido2Timeout"></nz-input-number>
        </div>
      </div>
      <div class="form-group row">
        <label class="col-sm-4 form-control-label" [nz-tooltip]="'user.tooltips.fido2.iamFido2Transports' | translate"
               [nzTooltipMouseEnterDelay]="0.5" translate>user.label.iamFido2Transports
        </label>
        <div class="col-sm-6">
          <nz-select name="iamFido2Transports" [(ngModel)]="currentObj.iamFido2Transports">
            <nz-option *ngFor="let option of iamFido2Transports"
                       [nzLabel]="option.text" [nzValue]="option.value"></nz-option>
          </nz-select>
        </div>

      </div>
      <div class="form-group row">
        <label class="col-sm-4 form-control-label"
               [nz-tooltip]="'user.tooltips.fido2.iamFido2UserVerification' | translate"
               [nzTooltipMouseEnterDelay]="0.5" translate>user.label.iamFido2UserVerification
        </label>
        <div class="col-sm-6">
          <nz-select name="iamFido2UserVerification" [(ngModel)]="currentObj.iamFido2UserVerification">
            <nz-option *ngFor="let option of iamFido2UserVerification"
                       [nzLabel]="option.text" [nzValue]="option.value"></nz-option>
          </nz-select>
        </div>
      </div>
      <div class="form-group row">
        <div class="col-md-12" translate>user.label.emailSettings</div>
      </div>
      <div class="p-a b-a" *ngIf="currentObj.iamFido2EmailSettings">
        <div class="form-group row" >
          <label class="col-sm-4 form-control-label"
                 [nz-tooltip]="'user.tooltips.fido2.subject' | translate" [nzTooltipMouseEnterDelay]="0.5"
                 translate>user.label.subject
            <sup class="text-danger text-sm">*</sup>
          </label>
          <div class="col-sm-6"
               [ngClass]="{'has-error' : ((subject.dirty || subject.touched) && subject.invalid)}">
            <input type="text" class="form-control" #subject="ngModel" name="subject"
                   [placeholder]="'user.placeholder.subject' | translate"
                   [(ngModel)]="currentObj.iamFido2EmailSettings.subject" autocomplete="off">
            <div *ngIf="subject.invalid && (subject.dirty || subject.touched)"
                 class="text-danger help-block">
              <div *ngIf="subject.errors.required">
                <div translate>common.message.requiredError</div>
              </div>
            </div>
          </div>
        </div>
        <div class="form-group row">
          <label class="col-sm-4 form-control-label"
                 [nz-tooltip]="'user.tooltips.fido2.body' | translate" [nzTooltipMouseEnterDelay]="0.5"
                 translate>user.label.body
            <sup class="text-danger text-sm">*</sup>
          </label>
          <div class="col-sm-6" [ngClass]="{'has-error' : ((body.dirty || body.touched) && body.invalid)}">
            <a class="btn btn-xs btn-default" style="box-shadow: none !important;" [ngClass]="{'text-primary': preview !== true}" (click)="preview = false;" translate>xml.button.sourceCode</a>
            <a class="btn btn-xs btn-default b-l" style="box-shadow: none !important;" [ngClass]="{'text-primary': preview === true}" (click)="preview = true;" translate>xml.button.preview</a>
            <textarea class="form-control" nz-input [hidden]="preview"
                      [placeholder]="'user.placeholder.body' | translate"
                      [(ngModel)]="currentObj.iamFido2EmailSettings.body"
                      [nzAutosize]="{ minRows: 5, maxRows:10}"
                      #body="ngModel"
                      name="body"
                      required
            ></textarea>
            <div class="b-a" style="min-height: 104px;max-height: 450px;overflow: auto" *ngIf="preview">
              <pre *ngIf="currentObj.iamFido2EmailSettings.body" [innerHTML]="currentObj.iamFido2EmailSettings.body | safeHtml"></pre>
            </div>
            <div *ngIf="body.invalid && (body.dirty || body.touched)"
                 class="text-danger help-block">
              <div *ngIf="body.errors.required">
                <div translate>common.message.requiredError</div>
              </div>
            </div>
          </div>
        </div>
        <div class=" row">
          <label class="col-sm-4 form-control-label" title="{{'workflow.label.jobResourceNames' | translate}}"
                 [nz-tooltip]="'inventory.tooltips.workflow.jobResourceNames' | translate"
                 [nzTooltipMouseEnterDelay]="0.5"
                 translate>workflow.label.jobResourceNames
            <sup class="text-danger text-sm">*</sup>
          </label>
          <div class="col-md-6" [ngClass]="{'has-error' : ((jobResource.dirty || jobResource.touched) && jobResource.invalid)}">
            <nz-select
              #jobResource="ngModel"
              name="jobResource"
              [(ngModel)]="currentObj.iamFido2EmailSettings.nameOfJobResource"
              nzShowSearch
              [nzAllowClear]="false"
              [nzDropdownClassName]="'group-list'"
              [nzPlaceHolder]="'workflow.placeholder.selectJobResources' | translate"
            >
              <nz-option-group [nzLabel]="nzTreeTemplate" *ngFor="let item of jobResourcesTree">
                <ng-template #nzTreeTemplate>
                  <div>
                    <i nz-icon [nzType]="'folder-open'" class="w-14 p-r-xs"></i>
                    {{item.name}}
                  </div>
                </ng-template>
                <nz-option nzCustomContent *ngFor="let option of item.list" [nzValue]="option.name"
                           [nzLabel]="option.name">
                  <div>
                    <i class="fa fa-circle-o text-xs w-11 m-t-xs"></i>
                    {{option.name}}<span *ngIf="option.notFound" class="m-l-sm label bg-danger" translate>inventory.label.objectNotExist</span>
                  </div>
                </nz-option>
              </nz-option-group>
            </nz-select>
          </div>
        </div>
      </div>
    </div>
    <!------------------------------------END FIDO2---------------------------------------------->
  </div>
  <div class="modal-footer">
    <button type="submit" class="btn btn-primary btn-sm"
            [disabled]="!myForm.form.valid || (required && !comments.comment) || submitted || !isLengthMatch">
      <i *ngIf="submitted" class="fa fa-spin fa-spinner p-r-xs"></i>
      {{'common.button.submit' | translate}}
    </button>
    <button type="button" class="btn btn-default btn-sm" *ngIf="data" (click)="copySetting()"
            translate>user.button.copySetting
    </button>
    <button type="button" class="btn btn-default btn-sm" *ngIf="isEnable" (click)="pasteSetting()"
            translate>user.button.pasteSetting
    </button>
    <button type="button" class="btn btn-grey btn-sm" (click)="activeModal.destroy()" translate>
      common.button.cancel
    </button>
    <div class="w-full" style="display: flex;justify-content: end;" *ngIf="data">
      <button type="button" class="btn btn-default btn-sm m-r-xxs" (click)="downloadSetting()" translate>
        <i nz-icon nzType="download" nzTheme="outline"></i>&nbsp;
        inventory.button.download
      </button>
      <div class="upload-btn-wrapper1">
        <button type="button" class="btn btn-default btn-sm m-l-sm" translate>
          <i nz-icon nzType="upload" nzTheme="outline"></i>&nbsp;
          inventory.button.upload
        </button>
        <input type="file" accept=".json" ng2FileSelect (onFileSelected)="onFileSelected($event)" [uploader]="uploader">
      </div>
    </div>
  </div>
</form>
