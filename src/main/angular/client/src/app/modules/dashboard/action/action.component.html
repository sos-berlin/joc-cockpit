<div class="btn-group dropdown">
  <button [nzDropdownMenu]="action" class="btn-drop more-option-h" nz-dropdown nzTrigger="click" type="button">
    <i class="fa fa-ellipsis-h"></i>
  </button>
  <nz-dropdown-menu #action="nzDropdownMenu">
    <ul nz-menu>
      @if (controllerPermission && controllerPermission.terminate && controller && controller.role !== 'STANDALONE' && controller.clusterNodeState._text === 'active') {
        <li nz-submenu nzTitle="{{'dashboard.button.terminate' | translate}}">
          <ul>
            <li (click)="clusterAction('terminate', controller,true)" nz-menu-item>
              <a [ngClass]="{'disable-link':!controller.isCoupled}" tabindex="-1"
              >{{'dashboard.button.withSwitchover' | translate}}</a>
            </li>
            <li (click)="clusterAction('terminate', controller,false)" nz-menu-item>
              <a tabindex="-1">{{'dashboard.button.withOutSwitchover' | translate}}</a>
            </li>
          </ul>
        </li>
      }
      @if (controllerPermission && controllerPermission.restart && controllerPermission.terminate && controller && controller.role !== 'STANDALONE' && controller.clusterNodeState._text === 'active') {
        <li nz-submenu nzTitle="{{'dashboard.button.terminateAndRestart' | translate}}">
          <ul>
            <li (click)="clusterAction('terminateAndRestart', controller,true)"
                nz-menu-item>
              <a [ngClass]="{'disable-link':!controller.isCoupled}"
                 tabindex="-1">{{'dashboard.button.withSwitchover' | translate}}</a>
            </li>
            <li (click)="clusterAction('terminateAndRestart', controller,false)"
                nz-menu-item>
              <a tabindex="-1">{{'dashboard.button.withOutSwitchover' | translate}}</a>
            </li>
          </ul>
        </li>
      }
      @if (controllerPermission && controllerPermission.terminate && controller && controller.role !== 'STANDALONE' && controller.clusterNodeState._text === 'active') {
        <li nz-submenu nzTitle="{{'dashboard.button.abort' | translate}}">
          <ul>
            <li (click)="clusterAction('abort', controller,true)"
                nz-menu-item>
              <a [ngClass]="{'disable-link':!controller.isCoupled}"
                 tabindex="-1">{{'dashboard.button.withFailover' | translate}}</a>
            </li>
          </ul>
        </li>
      }
      @if (controllerPermission && controllerPermission.restart && controllerPermission.terminate && controller && controller.role !== 'STANDALONE' && controller.clusterNodeState._text === 'active') {
        <li nz-submenu nzTitle="{{'dashboard.button.abortAndRestart' | translate}}">
          <ul>
            <li (click)="clusterAction('abortAndRestart', controller,true)"
                nz-menu-item>
              <a [ngClass]="{'disable-link':!controller.isCoupled}"
                 tabindex="-1">{{'dashboard.button.withApplicableFailover' | translate}}</a>
            </li>
          </ul>
        </li>
      }
      @if (controllerPermission && controllerPermission.terminate && controller && (controller.role === 'STANDALONE' || controller.clusterNodeState._text !== 'active')) {
        <li (click)="clusterAction('terminate', controller,false)" nz-menu-item>
          <a
            [ngClass]="{'disable-link': controller.componentState._text !== 'operational'}">{{'dashboard.button.terminate' | translate}}</a>
        </li>
      }
      @if (controllerPermission && controllerPermission.restart && controllerPermission.terminate && controller && (controller.role === 'STANDALONE' || controller.clusterNodeState._text !== 'active')) {
        <li (click)="clusterAction('terminateAndRestart', controller,false)" nz-menu-item>
          <a
            [ngClass]="{'disable-link': controller.componentState._text !== 'operational'}">{{'dashboard.button.terminateAndRestart' | translate}}</a>
        </li>
      }
      @if (controllerPermission && controllerPermission.terminate && controller && (controller.role === 'STANDALONE' || controller.clusterNodeState._text !== 'active')) {
        <li (click)="clusterAction('abort', controller, false)" nz-menu-item>
          <a [ngClass]="{'disable-link': controller.componentState._text !== 'operational'}" translate>dashboard.button.abort</a>
        </li>
      }
      @if (controllerPermission && controllerPermission.restart && controllerPermission.terminate && controller && (controller.role === 'STANDALONE' || controller.clusterNodeState._text !== 'active')) {
        <li (click)="clusterAction('abortAndRestart', controller, false)" nz-menu-item>
          <a [ngClass]="{'disable-link': controller.componentState._text !== 'operational'}" translate>dashboard.button.abortAndRestart</a>
        </li>
      }
      @if (controller && controllerPermission && controllerPermission.getLog) {
        <li (click)="clusterAction('downloadLog', controller, false)" nz-menu-item>
          <a [ngClass]="{'disable-link': controller.componentState._text !== 'operational'}"
             translate>dashboard.button.downloadLog</a>
        </li>
      }
    </ul>
  </nz-dropdown-menu>
</div>
