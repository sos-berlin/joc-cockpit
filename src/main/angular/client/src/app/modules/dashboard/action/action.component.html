<div class="btn-group dropdown">
  <button [nzDropdownMenu]="action" class="btn-drop more-option-h" nz-dropdown nzTrigger="click" type="button">
    <i class="fa fa-ellipsis-h"></i>
  </button>
  <nz-dropdown-menu #action="nzDropdownMenu">
    <ul nz-menu>
      <li *ngIf="controllerPermission && controllerPermission.terminate && controller && controller.role !== 'STANDALONE' && controller.clusterNodeState._text === 'active'" nz-submenu
          nzTitle="{{'dashboard.button.terminate' | translate}}">
        <ul>
          <li (click)="clusterAction('terminate', controller,true)" nz-menu-item>
            <a [ngClass]="{'disable-link':!controller.isCoupled}" tabindex="-1"
            >{{'dashboard.button.withSwitchover' | translate}}</a>
          </li>
          <li (click)="clusterAction('terminate', controller,false)" nz-menu-item>
            <a tabindex="-1">{{'dashboard.button.withOutSwitchover' | translate}}</a>
          </li>
        </ul>
      </li>
      <li *ngIf="controllerPermission && controllerPermission.restart && controllerPermission.terminate && controller && controller.role !== 'STANDALONE' && controller.clusterNodeState._text === 'active'" nz-submenu
          nzTitle="{{'dashboard.button.terminateAndRestart' | translate}}">
        <ul>
          <li (click)="clusterAction('terminateAndRestart', controller,true)"
              nz-menu-item>
            <a [ngClass]="{'disable-link':!controller.isCoupled}"
               tabindex="-1">{{'dashboard.button.withSwitchover' | translate}}</a>
          </li>
          <li (click)="clusterAction('terminateAndRestart', controller,false)"
              nz-menu-item>
            <a tabindex="-1">{{'dashboard.button.withOutSwitchover' | translate}}</a>
          </li>
        </ul>
      </li>
      <li *ngIf="controllerPermission && controllerPermission.terminate && controller && controller.role !== 'STANDALONE' && controller.clusterNodeState._text === 'active'" nz-submenu
          nzTitle="{{'dashboard.button.abort' | translate}}">
        <ul>
          <li (click)="clusterAction('abort', controller,true)"
              nz-menu-item>
            <a [ngClass]="{'disable-link':!controller.isCoupled}"
               tabindex="-1">{{'dashboard.button.withFailover' | translate}}</a>
          </li>
        </ul>
      </li>
      <li *ngIf="controllerPermission && controllerPermission.restart && controllerPermission.terminate && controller && controller.role !== 'STANDALONE' && controller.clusterNodeState._text === 'active'" nz-submenu
          nzTitle="{{'dashboard.button.abortAndRestart' | translate}}">
        <ul>
          <li (click)="clusterAction('abortAndRestart', controller,true)"
              nz-menu-item>
            <a [ngClass]="{'disable-link':!controller.isCoupled}"
               tabindex="-1">{{'dashboard.button.withApplicableFailover' | translate}}</a>
          </li>
        </ul>
      </li>
      <li (click)="clusterAction('terminate', controller,false)"
          *ngIf="controllerPermission && controllerPermission.terminate && controller && (controller.role === 'STANDALONE' || controller.clusterNodeState._text !== 'active')"
          nz-menu-item>
        <a
          [ngClass]="{'disable-link': controller.componentState._text !== 'operational'}">{{'dashboard.button.terminate' | translate}}</a>
      </li>
      <li (click)="clusterAction('terminateAndRestart', controller,false)"
          *ngIf="controllerPermission && controllerPermission.restart && controllerPermission.terminate && controller && (controller.role === 'STANDALONE' || controller.clusterNodeState._text !== 'active')"
          nz-menu-item>
        <a
          [ngClass]="{'disable-link': controller.componentState._text !== 'operational'}">{{'dashboard.button.terminateAndRestart' | translate}}</a>
      </li>
      <li (click)="clusterAction('abort', controller, false)"
          *ngIf="controllerPermission && controllerPermission.terminate && controller && (controller.role === 'STANDALONE' || controller.clusterNodeState._text !== 'active')"
          nz-menu-item>
        <a [ngClass]="{'disable-link': controller.componentState._text !== 'operational'}" translate>dashboard.button.abort</a>
      </li>
      <li (click)="clusterAction('abortAndRestart', controller, false)"
          *ngIf="controllerPermission && controllerPermission.restart && controllerPermission.terminate && controller && (controller.role === 'STANDALONE' || controller.clusterNodeState._text !== 'active')"
          nz-menu-item>
        <a [ngClass]="{'disable-link': controller.componentState._text !== 'operational'}" translate>dashboard.button.abortAndRestart</a>
      </li>
      <li (click)="clusterAction('downloadLog', controller, false)"
          *ngIf="controller && controllerPermission && controllerPermission.getLog"
          nz-menu-item>
        <a [ngClass]="{'disable-link': controller.componentState._text !== 'operational'}"
           translate>dashboard.button.downloadLog</a>
      </li>
    </ul>
  </nz-dropdown-menu>
</div>
