<div class="white box-shadow sub-header">
  <div class="row">
    <div class="col-md-12">
      <div class="padding">
        <div class="text-right ">
          <div class="pull-left">
            <app-breadcrumbs></app-breadcrumbs>
          </div>
          <div class="inline valign" *ngIf="monitorFilters.tabIndex == 2">
            <label nz-checkbox [(ngModel)]="monitorFilters.notification.filter.current" name="current" (nzCheckedChange)="controllerChange()">
              {{'common.label.currentController' | translate}}
            </label>
          </div>
          <div class="btn-group m-l-12 hidden-btn-group" *ngIf="monitorFilters.tabIndex == 2">
            <button class="btn btn-grey btn-sm" (click)="changeState('ALL')"
                    [ngClass]="{'btn-primary': monitorFilters.notification.filter.type=='ALL'}" translate>filters.button.all
            </button>
            <button class="btn btn-grey btn-sm" (click)="changeState('SUCCESS')"
                    [ngClass]="{'btn-primary': monitorFilters.notification.filter.type=='SUCCESS'}" translate>monitor.notification.button.success
            </button>
            <button class="btn btn-grey btn-sm" (click)="changeState('ERROR')"
                    [ngClass]="{'btn-primary': monitorFilters.notification.filter.type=='ERROR'}" translate>monitor.notification.button.error
            </button>
            <button class="btn btn-grey btn-sm" (click)="changeState('WARNING')"
                    [ngClass]="{'btn-primary': monitorFilters.notification.filter.type=='WARNING'}" translate>monitor.notification.button.warning
            </button>
            <button class="btn btn-grey btn-sm" (click)="changeState('RECOVERED')"
                    [ngClass]="{'btn-primary': monitorFilters.notification.filter.type=='RECOVERED'}" translate>monitor.notification.button.recovered
            </button>
          </div>
          <div class="btn-group m-l-12 hidden-btn-group" *ngIf="monitorFilters.tabIndex == 2">
            <button class="btn btn-grey btn-sm" (click)="changeDate('ALL')"
                    [ngClass]="{'btn-primary': monitorFilters.notification.filter.date=='ALL'}" translate>filters.button.all
            </button>
            <button class="btn btn-grey btn-sm" (click)="changeDate('0d')"
                    [ngClass]="{'btn-primary': monitorFilters.notification.filter.date=='0d'}" translate>filters.button.today
            </button>
            <button class="btn btn-grey btn-sm" (click)="changeDate('-1h')"
                    [ngClass]="{'btn-primary': monitorFilters.notification.filter.date=='-1h'}" translate>filters.button.last1
            </button>
            <button class="btn btn-grey btn-sm" (click)="changeDate('-6h')"
                    [ngClass]="{'btn-primary': monitorFilters.notification.filter.date=='-6h'}" translate>filters.button.last6
            </button>
            <button class="btn btn-grey btn-sm" (click)="changeDate('-12h')"
                    [ngClass]="{'btn-primary': monitorFilters.notification.filter.date=='-12h'}" translate>filters.button.last12
            </button>
          </div>
          <div class="btn-group dropdown hidden-dropdown" *ngIf="monitorFilters.tabIndex == 2">
            <button class="btn-drop btn btn-grey btn-sm m-l-12" nz-dropdown nzTrigger="click" [nzDropdownMenu]="menu" [nzPlacement]="'bottomRight'" type="button" translate>
              common.label.anyDate
              <i nz-icon nzType="caret-down" nzTheme="outline" class="caretDownIcon"></i>
            </button>
            <nz-dropdown-menu #menu="nzDropdownMenu" >
              <ul nz-menu>
                <li nz-menu-item [ngClass]="{'ant-select-dropdown-menu-item-active': monitorFilters.notification.filter.date=='ALL'}">
                  <a (click)="changeDate('ALL')" translate>filters.button.all</a>
                </li>
                <li nz-menu-item [ngClass]="{'ant-select-dropdown-menu-item-active': monitorFilters.notification.filter.date=='0d'}">
                  <a (click)="changeDate('0d')" translate>filters.button.today</a>
                </li>
                <li nz-menu-item [ngClass]="{'ant-select-dropdown-menu-item-active': monitorFilters.notification.filter.date=='-1h'}">
                  <a (click)="changeDate('-1h')" translate>filters.button.last1</a>
                </li>
                <li nz-menu-item [ngClass]="{'ant-select-dropdown-menu-item-active': monitorFilters.notification.filter.date=='-6h'}">
                  <a (click)="changeDate('-6h')" translate>filters.button.last6</a>
                </li>
                <li nz-menu-item [ngClass]="{'ant-select-dropdown-menu-item-active': monitorFilters.notification.filter.date=='-12h'}">
                  <a (click)="changeDate('-12h')" translate>filters.button.last12</a>
                </li>
              </ul>
            </nz-dropdown-menu>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>
<div class="scroll-y max-ht">
  <div class="padding p-b-0">
    <nz-tabset [(nzSelectedIndex)]="index" (nzSelectChange)="tabChange($event)">
      <nz-tab [nzTitle]="'monitor.label.controllerAvailability' | translate">
        <div *ngIf="index === 0">
          <app-controller-monitor [permission]="permission" [preferences]="preferences"
                                  [schedulerIds]="schedulerIds" [filters]="monitorFilters.controller"></app-controller-monitor>
        </div>
      </nz-tab>
      <nz-tab [nzTitle]="'monitor.label.agentAvailability' | translate">
        <div *ngIf="index === 1">
          <app-agent-monitor [permission]="permission" [preferences]="preferences"
                             [schedulerIds]="schedulerIds" [filters]="monitorFilters.agent"></app-agent-monitor>
        </div>
      </nz-tab>
      <nz-tab [nzTitle]="'monitor.label.notification' | translate">
        <div *ngIf="index === 2">
          <app-notification-monitor [permission]="permission" [preferences]="preferences"
                             [schedulerIds]="schedulerIds" [filters]="monitorFilters.notification"></app-notification-monitor>
        </div>
      </nz-tab>
    </nz-tabset>
  </div>
</div>
