<div class="modal-header">
  <h4 class="modal-title">
    <a (click)="activeModal.destroy()" *ngIf="recursiveCals.length > 1"><i nz-tooltip="{{'inventory.button.backToObject' | translate}}" class="fa fa-arrow-circle-left config-back-btn"></i></a>
    <span translate>workflow.label.showDependency</span> {{workflow.path}}
  </h4>
  <button type="button" class="close" aria-label="Close" (click)="closeAll();">
    <span aria-hidden="true" class="fa fa-times-circle"></span>
  </button>
</div>
<div class="modal-body p-a" style="min-height: calc(100vh - 120px); overflow: hidden">
  <div class="text-center m-t-lg m-b-md" *ngIf="loading">
    <nz-spin nzSimple></nz-spin>
  </div>
  <div *ngIf="!loading">
    <div class="m-b-12 text-center w-full">
      <button class="btn btn-grey btn-sm" [ngClass]="{'btn-primary': pageView=='grid'}" (click)="pageView = 'grid'"><i
        class="fa fa-sitemap"></i>
      </button>
      <button class="btn btn-grey btn-sm" [ngClass]="{'btn-primary': pageView=='list'}" (click)="pageView = 'list'">
        <i class="fa fa-bars"></i>
      </button>
    </div>
    <div *ngIf="pageView === 'grid'">
      <app-workflow-graphical [recursiveCals]="recursiveCals" [workFlowJson]="workFlowJson" [permission]="permission" [preferences]="preferences" [jobs]="workflow.jobs" [isModal]="true"
                              [controllerId]="controllerId" [orders]="workflow.orders" [orderPreparation]="workflow.orderPreparation"></app-workflow-graphical>
    </div>
    <div *ngIf="pageView === 'list'">
      <div class="hover" >
        <a class="text-primary" translate >workflow.label.start</a>
        <span class="expand-collapse-btn">
          <i class="cursor fa fa-lg fa-angle-double-down" [nz-tooltip]="'common.tooltip.expandAll' | translate" (click)="expandAll()"></i>
          <i class="cursor fa fa-lg fa-angle-double-up p-l-xs" [nz-tooltip]="'common.tooltip.collapseAll' | translate" (click)="collapseAll()"></i>
        </span>
      </div>
      <app-type [recursiveCals]="recursiveCals" [configuration]="workFlowJson" [jobs]="workflow.jobs" [orderPreparation]="workflow.orderPreparation" [permission]="permission"
                [preferences]="preferences" [schedulerId]="controllerId" [expandAll]="isExpandAll" [workflowFilters]="workflowFilters"
                [orders]="workflow.orders" [expectedNoticeBoards]="workFlowJson.expectedNoticeBoards" [postNoticeBoards]="workFlowJson.postNoticeBoards"></app-type>
    </div>
  </div>
</div>


