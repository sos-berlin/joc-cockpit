<div [hidden]="noticeBoardNames" class="modal-header">
  <h4 class="modal-title">
    <span class="drag-text" translate>workflow.label.showConfiguration</span>
    <i *ngIf="jobName">:</i>
    {{jobName}}
  </h4>
  <a [codeMirror]="cm" appMaximum class="max-btn">
    <i class="fa fa-window-maximize"></i>
  </a>
  <button (click)="activeModal.destroy()" aria-label="Close" class="close"
          type="button">
    <span aria-hidden="true" class="fa fa-times-circle"></span>
  </button>
</div>
<form spellcheck="false">
  <div class="modal-body p-a" style="min-height: 112px">
    <div *ngIf="noticeBoardNames" class="row">
      <div class="col-sm-12 text-center">
        <b class="b-b p-b-xs m-b-sm">{{type | translate}}</b>
        <div *ngIf="type === 'PostNotices'" class="m-t-md">
          <div *ngFor="let board of noticeBoardNames" class="text-muted">
            <i (click)="coreService.navToInventoryTab(board, 'NOTICEBOARD');"
               *ngIf="permission.joc && permission.joc.inventory.view"
               class="cursor fa fa-pencil text-hover-primary p-l-sm p-r-xs"></i>
            <a (click)="coreService.showBoard(board);" class="text-hover-primary">{{board}}</a>
          </div>
        </div>
        <div *ngIf="type === 'ExpectNotices'" class="m-t-md">
          <span [innerHTML]="coreService.getHtml(noticeBoardNames, permission) | safeHtml"></span>
        </div>
      </div>
    </div>
    <div *ngIf="!noticeBoardNames" class="row">
      <div *ngIf="agentName" class="col-sm-12 m-b-10">
        <span class="_600" translate>agent.label.agentName</span>:&nbsp;
        {{agentName}}
        <span *ngIf="subagentClusterId">
          <span class="m-l _600" translate>agent.label.subagentClusterId</span>:&nbsp;
          {{subagentClusterId}}
        </span>
      </div>
      <div *ngIf="isScript" class="col-md-12">
        <label *ngIf="!predicate" class="_600 m-b-xs" translate>workflow.label.script</label>
        <label *ngIf="predicate" class="_600 m-b-xs" translate>workflow.label.predicate</label>
        <a (click)="navToConfig()" *ngIf="permission && permission.joc.inventory.view"
           class="text-hover-primary p-l-sm"><i class="fa fa-pencil"></i></a>
        <div class="b-a" id="resizable">
          <ngx-codemirror #codeMirror [options]="cmOption"></ngx-codemirror>
          <div class="rg-right" style="background: transparent; margin-right: -16px"><span style="top:48%"></span></div>
          <div class="rg-bottom" style="bottom: -16px;background: transparent"><span></span></div>
        </div>
      </div>
      <div *ngIf="!isScript && data" class="col-md-12">
        <div class="form-group row">
          <label class="col-sm-3 form-control-label">{{'workflow.label.className' | translate}}
            <a (click)="navToConfig()" *ngIf="permission && permission.joc.inventory.view"
               class="text-hover-primary p-l-sm"><i class="fa fa-pencil"></i></a></label>
          <div class=" col-sm-8">
            <input [(ngModel)]="data" name="data" nz-input readonly>
          </div>
        </div>
      </div>
      <div *ngIf="periodList.length > 0 || schemeList.length > 0" [ngClass]="{'m-b-sm' : periodList.length > 0}"
           class="col-sm-3 m-t" translate>
        workflow.admissionTime.label.dailyPlanTimeZone
      </div>
      <div *ngIf="periodList.length > 0 || schemeList.length > 0" [ngClass]="{'m-b-sm' : periodList.length > 0}"
           class="col-sm-3 m-t b-r">
        {{dailyPlan.time_zone}}
      </div>
      <div *ngIf="periodList.length > 0 || schemeList.length > 0" [ngClass]="{'m-b-sm' : periodList.length > 0}"
           class="col-sm-3 m-t" translate>
        workflow.admissionTime.label.dailyPlanPeriodBegin
      </div>
      <div *ngIf="periodList.length > 0 || schemeList.length > 0" [ngClass]="{'m-b-sm' : periodList.length > 0}"
           class="col-sm-3 m-t">
        {{dailyPlan.period_begin}}
      </div>
      <div *ngIf="periodList.length > 0" class="col-sm-3" translate>workflow.label.workflowTimeZone</div>
      <div *ngIf="periodList.length > 0" class="col-sm-8">
        {{timezone}}
      </div>
      <div *ngIf="schedule" class="col-md-12 m-t-sm">
        <label class="_600 m-b-xs" translate>workflow.label.listOfSchemes</label>
        <a (click)="navToConfig()" *ngIf="permission && permission.joc.inventory.view"
           class="text-hover-primary p-l-sm"><i class="fa fa-pencil"></i></a>
        <div class="table-responsive">
          <table class="table table-hover table-bordered ">
            <thead>
            <tr>
              <th style="border-right: none"><span translate>workflow.admissionTime.label.frequency</span></th>
              <th style="border-left: none"><span translate>workflow.admissionTime.label.period</span></th>
              <th><span translate>workflow.label.repeat</span></th>
            </tr>
            </thead>
            <tbody>
            <tr *ngFor="let list of schemeList">
              <td colspan="2">
                <div *ngFor="let item of list.periodList">
                  <div class="row">
                    <div class="col-sm-5">
                      <span *ngIf="item.frequency"><span
                        translate>workflow.admissionTime.label.on</span> {{item.frequency}}</span>
                      <span *ngIf="!item.frequency" translate>workflow.admissionTime.label.everyDay</span>
                    </div>
                    <div class="col-sm-7">
                      <div *ngFor="let p of item.periods;">
                        <span>{{p.text}}</span>
                      </div>
                    </div>
                  </div>
                </div>
              </td>
              <td>
                <span>{{list.repeat.text}}</span>
              </td>
            </tr>
            </tbody>
          </table>
        </div>
      </div>
      <div *ngIf="periodList.length > 0" class="col-md-12 m-t-sm">
        <label class="_600 m-b-xs" translate>workflow.label.admissionTime</label>
        <div class="table-responsive">
          <table class="table table-hover table-bordered">
            <thead>
            <tr>
              <th><span translate>workflow.admissionTime.label.frequency</span></th>
              <th><span translate>workflow.admissionTime.label.period</span></th>
            </tr>
            </thead>
            <tbody>
            <tr *ngFor="let item of periodList;">
              <td><span>On {{item.frequency}}</span></td>
              <td>
                <div *ngFor="let p of item.periods;">
                  <span>{{p.text}}</span>
                </div>
              </td>
            </tr>
            </tbody>
          </table>
        </div>
      </div>
      <div *ngIf="periodList.length > 0 || schemeList.length > 0" class="col-md-12">
        <button (click)="showConvertTime()" *ngIf="tempPeriodList.length === 0" class="btn btn-default btn-sm"
                translate type="button">workflow.button.convertAdmissionTime
        </button>
        <button (click)="showOriginalTime()" *ngIf="tempPeriodList.length > 0" class="btn btn-default btn-sm"
                translate type="button">workflow.button.originalAdmissionTime
        </button>
      </div>
    </div>
  </div>
  <div [hidden]="noticeBoardNames" class="modal-footer">
    <button (click)="activeModal.destroy()" class="btn btn-grey btn-sm"
            translate type="button">
      common.button.close
    </button>
    <button (click)="copyToClipboard()" *ngIf="data" class="btn btn-default btn-sm"
            translate type="button">log.button.copyToClipboard
    </button>
  </div>
</form>
