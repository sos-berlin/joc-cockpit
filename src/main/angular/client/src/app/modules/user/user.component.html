<div class="white box-shadow sub-header">
  <div class="row">
    <div class="col-md-12">
      <div class="padding">
        <div class="text-right ">
          <div class="pull-left">
            <app-breadcrumbs></app-breadcrumbs>
          </div>
          <div class="show-inline">
            <button (click)="resetProfile();" class="btn btn-sm btn-grey" type="button">
              <i class="fa fa-refresh"></i>
              {{'profile.button.resetPreferences' | translate}}
            </button>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>
<div class="scroll-y max-ht">
  <div class="padding p-b-0">
    <div class="row m-t-sm">
      <div class="col-sm-12">
        <div class="box p-a p-b-md">
          <h5 translate>profile.label.userDetails</h5>
          <div class="row m-t">
            <div class="col-md-4 col-lg-3"><span class="text-dark" translate>profile.label.userName</span></div>
            <div class="col-md-8 col-lg-9">
              <span [innerHtml]="authService.currentUserData | decodeSpace" class="text-black-lt"></span>
            </div>
          </div>
          <div *ngIf="identityServiceType === 'JOC' || identityServiceType === 'VAULT-JOC-ACTIVE'" class="row m-t">
            <div class="col-md-4 col-lg-3"><span class="text-dark" translate>user.label.password</span></div>
            <div class="col-md-8 col-lg-9">
              <a (click)="changePassword()" class="text-u-l text-hover-primary"
                 translate>profile.button.changePassword</a>
            </div>
          </div>
          <div *ngIf="identityServiceType == 'FIDO'" class="row m-t">
            <div class="col-md-4 col-lg-3"><span class="text-dark" translate>user.button.addAuthenticatorDevice</span>
            </div>
            <div class="col-md-8 col-lg-9">
              <a (click)="addDevice()" class="text-u-l text-hover-primary"
                 translate><i class="fa fa-plus"></i></a>
            </div>
          </div>
          <hr>
          <h5 translate>profile.label.roles</h5>
          <div class="row m-t-sm">
            <div class="col-sm-6">
              <div *ngFor="let role of permission.roles" class="m-t-sm">
                <div class="col-sm-12 text-black-lt">{{role}}</div>
              </div>
            </div>
          </div>
          <hr>
          <nz-tabset (nzSelectChange)="tabChange($event)">
            <nz-tab [nzTitle]="'profile.label.preferences' | translate">
              <div class="m-l-12 p-b-xs">
                <div class="row">
                  <div class="col-md-4 col-lg-3 text-dark form-control-label" translate>profile.label.language</div>
                  <div class="col-md-8 col-lg-9">
                    <app-select-input (modelChange)="setLocale()" [attributeName]="'locale'" [classNames]="'w-xl'"
                                      [listArray]="coreService.locales" [name]="'language'" [object]="preferences"
                                      [optionLabel]="'name'" [optionValue]="'lang'"></app-select-input>
                  </div>
                </div>
                <div class="row m-t">
                  <div class="col-md-4 col-lg-3 text-dark form-control-label" translate>profile.label.timeZone</div>
                  <div class="col-md-8 col-lg-9">
                    <app-select-input (modelChange)="changeConfiguration()" [attributeName]="'zone'" [classNames]="'w-xl'"
                                      [extraLabelText]="'local '" [isSearchable]="true" [ignoreTranslate]="true"
                                      [listArray]="zones" [name]="'timeZone'"
                                      [object]="preferences"></app-select-input>

                  </div>
                </div>
                <div class="row m-t">
                  <div class="col-md-4 col-lg-3 text-dark form-control-label" translate>profile.label.dateTimeFormat
                  </div>
                  <div class="col-md-8 col-lg-9">
                    <app-select-input (modelChange)="changeConfiguration()" [attributeName]="'dateFormat'" [classNames]="'w-xl'"
                                      [listArray]="dateTimeFormat"
                                      [object]="preferences" [optionLabel]="'name'"
                                      [optionValue]="'value'"></app-select-input>
                    <div class="help-block">YYYY - 4 digit year, YY - 2 digit year, M / MM - month number, MMM / MMMM -
                      month name, D / DD - day of month
                    </div>
                    <div class="help-block">HH - 24 hour time, hh - 12 hour time, A - am and pm, mm - minutes, ss -
                      seconds
                    </div>
                  </div>
                </div>
                <div class="row m-t">
                  <div class="col-md-4 col-lg-3 text-dark form-control-label" translate>
                    profile.label.maxNumberOfHistoryEntries
                  </div>
                  <div class="col-md-6">
                    <nz-input-number (nzBlur)="changeConfiguration(isGroupBtnActive)" [(ngModel)]="preferences.maxRecords" [nzMin]="1" [nzStep]="5"
                                     class="w-xl"></nz-input-number>
                    <i (click)="isGroupBtnActive = false" *ngIf="isGroupBtnActive" class="fa fa-times p-l-sm"></i>
                    <a (click)="groupLimit()" *ngIf="!isGroupBtnActive" class="text-hover-primary p-l-sm" translate>profile.button.groupLimit</a>
                  </div>
                </div>
                <div class="row m-t">
                  <div class="col-md-4 col-lg-3 text-dark form-control-label"
                       translate>profile.label.maxNumberOfAuditLogEntries
                  </div>
                  <div class="col-md-6">
                    <nz-input-number (nzBlur)="changeConfiguration()" *ngIf="!isGroupBtnActive" [(ngModel)]="preferences.maxAuditLogRecords" [nzMin]="1"
                                     [nzStep]="5"
                                     class="w-xl"></nz-input-number>
                    <nz-input-number *ngIf="isGroupBtnActive" [(ngModel)]="preferences.maxRecords" class="w-xl"
                                     nzDisabled
                    ></nz-input-number>
                  </div>
                </div>
                <div class="row m-t">
                  <div class="col-md-4 col-lg-3 text-dark form-control-label"
                       translate>profile.label.maxNumberOfNotificationEntries
                  </div>
                  <div class="col-md-6">
                    <nz-input-number (nzBlur)="changeConfiguration()" *ngIf="!isGroupBtnActive" [(ngModel)]="preferences.maxNotificationRecords" [nzMin]="1"
                                     [nzStep]="5"
                                     class="w-xl"></nz-input-number>
                    <nz-input-number *ngIf="isGroupBtnActive" [(ngModel)]="preferences.maxRecords" class="w-xl"
                                     nzDisabled
                    ></nz-input-number>
                  </div>
                </div>
                <div class="row m-t">
                  <div class="col-md-4 col-lg-3 text-dark form-control-label"
                       translate>profile.label.maxNumberOfOverviewEntries
                  </div>
                  <div class="col-md-6">
                    <nz-input-number (nzBlur)="changeConfiguration()" *ngIf="!isGroupBtnActive" [(ngModel)]="preferences.maxOrderRecords" [nzMin]="1"
                                     [nzStep]="5"
                                     class="w-xl"></nz-input-number>
                    <nz-input-number *ngIf="isGroupBtnActive" [(ngModel)]="preferences.maxRecords" class="w-xl"
                                     nzDisabled
                    ></nz-input-number>
                  </div>
                </div>
                <div class="row m-t">
                  <div class="col-md-4 col-lg-3 text-dark form-control-label"
                       translate>profile.label.maxNumberOfDailyPlanEntries
                  </div>
                  <div class="col-md-6">
                    <nz-input-number (nzBlur)="changeConfiguration()" *ngIf="!isGroupBtnActive" [(ngModel)]="preferences.maxDailyPlanRecords" [nzMin]="1"
                                     [nzStep]="5"
                                     class="w-xl"></nz-input-number>
                    <nz-input-number *ngIf="isGroupBtnActive" [(ngModel)]="preferences.maxRecords" class="w-xl"
                                     nzDisabled
                    ></nz-input-number>
                  </div>
                </div>
                <div class="row m-t">
                  <div class="col-md-4 col-lg-3 text-dark form-control-label"
                       translate>profile.label.maxNumberOfWorkflowEntries
                  </div>
                  <div class="col-md-6">
                    <nz-input-number (nzBlur)="changeConfiguration()" *ngIf="!isGroupBtnActive" [(ngModel)]="preferences.maxWorkflowRecords" [nzMin]="1"
                                     [nzStep]="5"
                                     class="w-xl"></nz-input-number>
                    <nz-input-number *ngIf="isGroupBtnActive" [(ngModel)]="preferences.maxRecords" class="w-xl"
                                     nzDisabled
                    ></nz-input-number>
                  </div>
                </div>
                <div class="row m-t">
                  <div class="col-md-4 col-lg-3 text-dark form-control-label"
                       translate>profile.label.maxNumberOfFileTransferEntries
                  </div>
                  <div class="col-md-6">
                    <nz-input-number (nzBlur)="changeConfiguration()" *ngIf="!isGroupBtnActive" [(ngModel)]="preferences.maxFileTransferRecords" [nzMin]="1"
                                     [nzStep]="5"
                                     class="w-xl"></nz-input-number>
                    <nz-input-number *ngIf="isGroupBtnActive" [(ngModel)]="preferences.maxRecords" class="w-xl"
                                     nzDisabled
                    ></nz-input-number>
                  </div>
                </div>
                <div class="row m-t">
                  <div class="col-md-4 col-lg-3 text-dark form-control-label"
                       translate>profile.label.maxNumberOfResourceLockEntries
                  </div>
                  <div class="col-md-6">
                    <nz-input-number (nzBlur)="changeConfiguration()" *ngIf="!isGroupBtnActive" [(ngModel)]="preferences.maxLockRecords" [nzMin]="1"
                                     [nzStep]="5"
                                     class="w-xl"></nz-input-number>
                    <nz-input-number *ngIf="isGroupBtnActive" [(ngModel)]="preferences.maxRecords" class="w-xl"
                                     nzDisabled
                    ></nz-input-number>
                  </div>
                </div>
                <div class="row m-t">
                  <div class="col-md-4 col-lg-3 text-dark form-control-label"
                       translate>profile.label.maxNumberOfNoticeBoardEntries
                  </div>
                  <div class="col-md-6">
                    <nz-input-number (nzBlur)="changeConfiguration()" *ngIf="!isGroupBtnActive" [(ngModel)]="preferences.maxBoardRecords" [nzMin]="1"
                                     [nzStep]="5"
                                     class="w-xl"></nz-input-number>
                    <nz-input-number *ngIf="isGroupBtnActive" [(ngModel)]="preferences.maxRecords" class="w-xl"
                                     nzDisabled
                    ></nz-input-number>
                  </div>
                </div>
                <div class="row m-t">
                  <div class="col-md-4 col-lg-3 text-dark form-control-label"
                       translate>profile.label.maxNumberOfHistoryEntriesPerOrder
                  </div>
                  <div class="col-md-6">
                    <nz-input-number (nzBlur)="changeConfiguration()" [(ngModel)]="preferences.maxHistoryPerOrder" [nzMin]="1" [nzStep]="5"
                                     class="w-xl"></nz-input-number>
                  </div>
                </div>
                <div class="row m-t">
                  <div class="col-md-4 col-lg-3 text-dark form-control-label"
                       translate>profile.label.maxNumberOfHistoryEntriesPerTask
                  </div>
                  <div class="col-md-6">
                    <nz-input-number (nzBlur)="changeConfiguration()" [(ngModel)]="preferences.maxHistoryPerTask" [nzMin]="1" [nzStep]="5"
                                     class="w-xl"></nz-input-number>
                  </div>
                </div>
                <div class="row m-t">
                  <div class="col-md-4 col-lg-3 text-dark form-control-label"
                       translate>profile.label.maxNumberOfAuditLogPerObject
                  </div>
                  <div class="col-md-6">
                    <nz-input-number (nzBlur)="changeConfiguration()" [(ngModel)]="preferences.maxAuditLogPerObject" [nzMin]="1"
                                     [nzStep]="5"
                                     class="w-xl"></nz-input-number>
                  </div>
                </div>
                <div class="row m-t">
                  <div class="col-md-4 col-lg-3 text-dark form-control-label" translate>
                    profile.label.maxNumberOfFavoriteEntries
                  </div>
                  <div class="col-md-6">
                    <nz-input-number (nzBlur)="changeConfiguration()" [(ngModel)]="preferences.maxFavoriteEntries" [nzMin]="1"
                                     [nzStep]="5"
                                     class="w-xl"></nz-input-number>
                  </div>
                </div>
                <div class="row m-t">
                  <div class="col-md-4 col-lg-3 text-dark form-control-label" translate>profile.label.maxEntryPerPage
                  </div>
                  <div class="col-md-6">
                    <app-select-input (modelChange)="changeConfiguration()" [attributeName]="'maxEntryPerPage'" [classNames]="'w-xl'"
                                      [listArray]="maxEntryPerPage"
                                      [object]="preferences" [optionLabel]="'name'"
                                      [optionValue]="'value'"></app-select-input>

                  </div>
                </div>
                <div class="row m-t">
                  <div class="col-md-4 col-lg-3 text-dark form-control-label" translate>profile.label.entryPerPage</div>
                  <div class="col-md-6">
                    <app-select-input (modelChange)="changeConfiguration()" [attributeName]="'entryPerPage'" [classNames]="'w-xl'"
                                      [listArray]="entryPerPage"
                                      [object]="preferences" [optionLabel]="'name'"
                                      [optionValue]="'value'"></app-select-input>
                  </div>
                </div>
                <div class="row m-t">
                  <div class="col-md-4 col-lg-3 text-dark form-control-label" translate>profile.label.theme</div>
                  <div class="col-md-6">
                    <app-select-input (modelChange)="changeTheme(preferences.theme)" [attributeName]="'theme'" [classNames]="'w-xl'"
                                      [listArray]="themeArray" [object]="preferences"
                                      [optionLabel]="'name'"
                                      [optionValue]="'value'"></app-select-input>
                  </div>
                </div>
                <div *ngIf="this.preferences.theme === 'light'" class="row m-t">
                  <div class="col-md-4 col-lg-3 text-dark form-control-label" translate>profile.label.menuBarTheme</div>
                  <div class="col-md-6">
                    <app-select-input (modelChange)="changeMenuTheme()" [attributeName]="'headerColor'" [classNames]="'w-xl'"
                                      [isSearchable]="true"
                                      [listArray]="headerColor" [object]="preferences" [optionLabel]="'name'"
                                      [optionValue]="'value'"></app-select-input>
                  </div>
                </div>
                <div class="row m-t">
                  <div class="col-md-4 col-lg-3 text-dark form-control-label" translate>profile.label.themeTitle</div>
                  <div class="col-md-6">
                    <input (blur)="changeConfiguration()" [(ngModel)]="preferences.themeTitle" class="form-control w-xl"
                           type="text">
                  </div>
                </div>
                <div class="row m-t">
                  <div class="col-md-4 col-lg-3 text-dark form-control-label" translate>profile.label.tabSize</div>
                  <div class="col-md-6">
                    <input (blur)="changeConfiguration()" [(ngModel)]="preferences.tabSize" class="form-control w-xl"
                           type="text">
                  </div>
                </div>
                <div class="row m-t">
                  <div class="col-md-4 col-lg-3 text-dark form-control-label" translate>profile.label.listVariableCollapse</div>
                  <div class="col-md-6">
                     <label nz-checkbox [(ngModel)]="preferences.listVariableCollapse"
                             (ngModelChange)="changeConfiguration()"></label>
                  </div>
                </div>
                <div class="row m-t">
                  <div class="col-md-4 col-lg-3 text-dark" translate>profile.label.showLogs</div>
                  <div class="col-md-6">
                    <nz-radio-group [(ngModel)]="preferences.isNewWindow" (ngModelChange)="changeConfiguration()" >
                      <label nz-radio nzValue="newWindow"><span translate>profile.label.newWindow</span></label>
                      <label nz-radio nzValue="newTab"><span translate>profile.label.newTab</span></label>
                      <label nz-radio nzValue="download"><span translate>profile.label.download</span></label>
                    </nz-radio-group>
                  </div>
                </div>
                <div class="row m-t">
                  <div class="col-md-4 col-lg-3 text-dark" translate>profile.label.showDocumentations</div>
                  <div class="col-md-6">
                    <nz-radio-group [(ngModel)]="preferences.isDocNewWindow" (ngModelChange)="changeConfiguration()" >
                      <label nz-radio nzValue="newWindow"><span translate>profile.label.newWindow</span></label>
                      <label nz-radio nzValue="newTab"><span translate>profile.label.newTab</span></label>
                    </nz-radio-group>
                  </div>
                </div>
                <div class="row m-t">
                  <div class="col-md-4 col-lg-3 text-dark" translate>profile.label.showSubFolderAndFolderContents</div>
                  <div class="col-md-6">
                    <nz-radio-group [(ngModel)]="preferences.expandOption" (ngModelChange)="changeConfiguration()" >
                      <label nz-radio nzValue="single"><span translate>profile.label.folderContents</span></label>
                      <label nz-radio nzValue="both"><span
                        translate>profile.label.subFolderAndFolderContents</span></label>
                    </nz-radio-group>
                  </div>
                </div>
                <div class="row m-t">
                  <div class="col-md-4 col-lg-3 text-dark" translate>profile.label.showFilesImmediately</div>
                  <div class="col-md-6">
                    <label nz-checkbox [(ngModel)]="preferences.showFiles"
                           (ngModelChange)="changeConfiguration()"></label>
                  </div>
                </div>
                <div class="row m-t">
                  <div class="col-md-4 col-lg-3 text-dark" translate>profile.label.enableCommentsForAuditLog</div>
                  <div class="col-md-6">
                    <label nz-checkbox [(ngModel)]="preferences.auditLog" (ngModelChange)="changeConfiguration()" [disabled]="forceLoging"
                           ></label>
                  </div>
                </div>
                <div class="row m-t">
                  <div class="col-md-4 col-lg-3 text-dark" translate>profile.label.useTimezoneForLog</div>
                  <div class="col-md-6">
                    <label nz-checkbox [(ngModel)]="preferences.logTimezone"
                           (ngModelChange)="changeConfiguration()"></label>
                  </div>
                </div>
                <div class="row m-t">
                  <div class="col-md-4 col-lg-3 text-dark" translate>
                    profile.label.currentController
                  </div>
                  <div class="col-md-6">
                    <label nz-checkbox [(ngModel)]="preferences.currentController"
                           (ngModelChange)="changeConfiguration()"></label>
                  </div>
                </div>
                <div class="row m-t">
                  <div class="col-md-4 col-lg-3 text-dark" translate>
                    profile.label.showTooltipInfo
                  </div>
                  <div class="col-md-6">
                    <label nz-checkbox [(ngModel)]="preferences.showTooltipInfo"
                           (ngModelChange)="changeConfiguration()"></label>
                  </div>
                </div>
                <div class="row m-t">
                  <div class="col-md-4 col-lg-3 text-dark" translate>
                    profile.label.licenseWarningGotIt
                  </div>
                  <div class="col-md-6">
                    <label nz-checkbox [(ngModel)]="preferences.licenseExpirationWarning"
                           (ngModelChange)="changeConfiguration()"></label>
                  </div>
                </div>
                <div class="row m-t">
                  <div class="col-md-4 col-lg-3 text-dark" translate>
                    profile.label.showMoreOptions
                  </div>
                  <div class="col-md-6">
                    <label nz-checkbox [(ngModel)]="preferences.showMoreOptions"
                           (ngModelChange)="changeConfiguration()"></label>
                  </div>
                </div>
                <div class="row m-t">
                  <div class="col-md-4 col-lg-3 text-dark" translate>profile.label.showView</div>
                  <div class="col-md-6">
                    <nz-radio-group [(ngModel)]="preferences.pageView" (ngModelChange)="changeConfiguration();changeView()">
                      <label nz-radio nzValue="grid"><span translate>profile.label.asCard</span></label>
                      <label nz-radio nzValue="list"><span translate>profile.label.asList</span></label>
                    </nz-radio-group>
                  </div>
                </div>
                <div class="row m-t">
                  <div class="col-md-4 col-lg-3 text-dark" translate>profile.label.orderOverviewPageView</div>
                  <div class="col-md-6">
                    <nz-radio-group [(ngModel)]="preferences.orderOverviewPageView" (ngModelChange)="changeConfiguration();changeView()">
                      <label nz-radio nzValue="grid"><span translate>profile.label.asCard</span></label>
                      <label nz-radio nzValue="list"><span translate>profile.label.asList</span></label>
                      <label nz-radio nzValue="bulk"><span translate>profile.label.asBulk</span></label>
                    </nz-radio-group>
                  </div>
                </div>
              </div>
            </nz-tab>
            <nz-tab *ngIf="permission.joc"
                    [nzTitle]="'profile.label.permissions' | translate">
              <div class="m-l-12">
                <app-permission-view [permission]="permission" [schedulerIds]="schedulerIds"></app-permission-view>
              </div>
            </nz-tab>
            <nz-tab *ngIf="securityLevel !== 'LOW' && permission.joc && permission.joc.administration.certificates.view"
                    [nzTitle]="'profile.label.keyManagement' | translate">
              <div class="m-l-12">
                <div class="row m-t-sm p-b-xs">
                  <div class="col-sm-12">
                    <div *ngIf="caCertificates && permission.joc.administration.certificates.manage"
                         class="m-t-xs m-b-md">
                      <div class="row">
                        <div class="col-md-2">
                          <span class="text-dark _600" translate>profile.keyManagement.label.caCertificate</span>
                        </div>
                        <div class="col-md-10">
                          <span *ngIf="caCertificates.keyID || caCertificates.keyAlgorithm">
                            <span class="text-dark _600" style="padding-right: 10%"
                                  translate>{{caCertificates.keyID}}</span>
                            <span class="text-black-lt">
                              <i [ngClass]="{'fa-times text-danger': caCertificates.isKeyExpired}"
                                 class="fa fa-check text-success"></i>&nbsp;
                              <span *ngIf="!caCertificates.isKeyExpired"
                                    translate>profile.keyManagement.label.valid</span>
                              <span *ngIf="caCertificates.isKeyExpired"
                                    translate>profile.keyManagement.label.expiredKey</span>
                              <span *ngIf="caCertificates.validUntil">
                                <span class="m-l" translate>profile.keyManagement.label.validUntil</span>:
                                <span class="text-muted p-l-sm">{{caCertificates.validUntil | stringToDate}}</span>
                              </span>
                               <span *ngIf="!caCertificates.validUntil">
                                <span class="m-l" translate>profile.keyManagement.label.noValidDate</span>
                              </span>
                            </span>
                            <a (click)="showKey('certificate')"
                               [nz-tooltip]="'profile.keyManagement.label.showCertificate' | translate"
                               class="text-hover-primary m-l-12"><i class="fa fa-television"></i></a>
                          </span>
                          <span *ngIf="!caCertificates.keyID" translate>
                            profile.keyManagement.message.noCertificatePresent
                          </span>
                          <div class="inline pull-right m-t-n-xs" style="margin-bottom: 2px">
                            <button (click)="pasteKey('certificate')"
                                    *ngIf="permission.joc.administration.certificates.manage" [nz-tooltip]="'profile.keyManagement.tooltip.updateCertificate' | translate"
                                    class="btn btn-sm btn-grey m-l-12">
                              <i class="fa fa-paste"></i>
                            </button>
                            <button (click)="importKey('certificate')"
                                    *ngIf="permission.joc.administration.certificates.manage" [nz-tooltip]="'profile.keyManagement.tooltip.importCertificate' | translate"
                                    class="btn btn-sm btn-grey m-l-12">
                              <i nz-icon nzTheme="outline" nzType="upload"></i>
                            </button>
                          </div>
                        </div>
                      </div>
                    </div>
                    <div *ngIf="keys" class="m-t-xs">
                      <div class="row">
                        <div class="col-md-2">
                          <span class="text-dark _600" translate>profile.keyManagement.label.keysAndCertificates</span>
                        </div>
                        <div class="col-md-10">
                          <span *ngIf="keys.keyID || keys.keyAlgorithm">
                            <span class="text-dark _600" style="padding-right: 10%" translate>{{keys.keyID}}</span>
                            <span class="text-black-lt">
                              <i [ngClass]="{'fa-times text-danger': keys.isKeyExpired}"
                                 class="fa fa-check text-success"></i>&nbsp;
                              <span *ngIf="!keys.isKeyExpired" translate>profile.keyManagement.label.valid</span>
                              <span *ngIf="keys.isKeyExpired" translate>profile.keyManagement.label.expiredKey</span>
                              <span *ngIf="keys.validUntil">
                                <span class="m-l" translate>profile.keyManagement.label.validUntil</span>:
                                <span class="text-muted p-l-sm">{{keys.validUntil | stringToDate}}</span>
                              </span>
                               <span *ngIf="!keys.validUntil">
                                <span class="m-l" translate>profile.keyManagement.label.noValidDate</span>
                              </span>
                            </span>
                            <a (click)="showKey()"
                               [nz-tooltip]="'profile.keyManagement.label.showKey' | translate"
                               class="text-hover-primary m-l-12"><i class="fa fa-television"></i></a>
                          </span>
                          <span *ngIf="!keys.keyID && !keys.keyAlgorithm" translate>
                            profile.keyManagement.message.noKeyFound
                          </span>
                          <div class="inline pull-right m-t-n-xs" style="margin-bottom: 2px">
                            <button (click)="pasteKey()"
                                    *ngIf="permission.joc.administration.certificates.manage" [nz-tooltip]="'profile.keyManagement.tooltip.updateKey' | translate"
                                    class="btn btn-sm btn-grey m-l-12">
                              <i class="fa fa-paste"></i>
                            </button>
                            <button (click)="importKey()"
                                    *ngIf="permission.joc.administration.certificates.manage" [nz-tooltip]="'profile.keyManagement.tooltip.import' | translate"
                                    class="btn btn-sm btn-grey m-l-12">
                              <i nz-icon nzTheme="outline" nzType="upload"></i>
                            </button>
                            <button
                              (click)="showGenerateKeyModal()"
                              *ngIf="securityLevel ==='MEDIUM' && permission.joc.administration.certificates.manage"
                              [nz-tooltip]="'profile.keyManagement.tooltip.generate' | translate"
                              class="btn btn-sm btn-grey m-l-12">
                              <i nz-icon nzTheme="outline" nzType="file-protect"></i>
                            </button>
                          </div>
                        </div>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
            </nz-tab>
            <nz-tab *ngIf="permission.joc && permission.joc.administration.certificates.view"
                    [nzTitle]="'profile.label.caManagement' | translate">
              <div class="m-l-12">
                <div class="row m-t-sm p-b-xs">
                  <div class="col-sm-12">
                    <div *ngIf="certificates" class="m-t-xs">
                      <div class="row">
                        <div class="col-md-2">
                          <span class="text-dark _600" translate>profile.keyManagement.label.keysAndCertificates</span>
                        </div>
                        <div class="col-md-10">
                          <span *ngIf="certificates.keyID || certificates.keyAlgorithm">
                            <span class="text-dark _600" style="padding-right: 10%"
                                  translate>{{certificates.keyID}}</span>
                            <span class="text-black-lt">
                              <i [ngClass]="{'fa-times text-danger': certificates.isKeyExpired}"
                                 class="fa fa-check text-success"></i>&nbsp;
                              <span *ngIf="!certificates.isKeyExpired"
                                    translate>profile.keyManagement.label.valid</span>
                              <span *ngIf="certificates.isKeyExpired"
                                    translate>profile.keyManagement.label.expiredKey</span>
                              <span *ngIf="certificates.validUntil">
                                <span class="m-l" translate>profile.keyManagement.label.validUntil</span>:
                                <span class="text-muted p-l-sm">{{certificates.validUntil | stringToDate}}</span>
                              </span>
                               <span *ngIf="!certificates.validUntil">
                                <span class="m-l" translate>profile.keyManagement.label.noValidDate</span>
                              </span>
                            </span>
                            <a (click)="showKey('ca')"
                               [nz-tooltip]="'profile.keyManagement.label.showKey' | translate"
                               class="text-hover-primary m-l-12"><i class="fa fa-television"></i></a>
                          </span>
                          <span *ngIf="!certificates.keyID && !certificates.keyAlgorithm" translate>
                            profile.keyManagement.message.noCAFound
                          </span>
                          <div *ngIf="permission.joc.administration.certificates.manage" class="inline pull-right m-t-n-xs"
                               style="margin-bottom: 2px">
                            <button (click)="pasteKey('ca')" [nz-tooltip]="'profile.keyManagement.tooltip.updateKey' | translate"
                                    class="btn btn-sm btn-grey m-l-12">
                              <i class="fa fa-paste"></i>
                            </button>
                            <button (click)="importKey('ca')" [nz-tooltip]="'profile.keyManagement.tooltip.import' | translate"
                                    class="btn btn-sm btn-grey m-l-12">
                              <i nz-icon nzTheme="outline" nzType="upload"></i>
                            </button>
                            <button (click)="showGenerateKeyModal('ca')"
                                    [nz-tooltip]="'profile.keyManagement.tooltip.generate' | translate"
                                    class="btn btn-sm btn-grey m-l-12">
                              <i nz-icon nzTheme="outline" nzType="file-protect"></i>
                            </button>
                          </div>
                        </div>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
            </nz-tab>
            <nz-tab *ngIf="securityLevel !== 'LOW' && permission.joc && permission.joc.inventory.view"
                    [nzTitle]="'profile.label.gitManagement' | translate">
              <div class="m-l-12">
                <div class="row m-t-xs p-b-xs">
                  <div class="col-sm-12">
                    <div class="m-t-xs">
                      <div class="row">
                        <div class="col-md-12">
                          <div class="pos-abt r-12 t-n-xs z-index-99">
                            <button (click)="addGitCredential()" class="btn btn-sm btn-grey">
                              <i nz-icon nzTheme="outline" nzType="plus"></i>
                            </button>
                          </div>
                        </div>
                        <div class="col-md-12">
                          <span class="text-dark _600 font14" translate>profile.gitManagement.label.credentials</span>
                        </div>
                        <div *ngIf="gitCredentials.credentials" class="col-md-12 m-t-sm">
                          <div class="table-responsive m-t-xs">
                            <table class="table table-hover">
                              <thead>
                              <tr>
                                <th class="no-borders" style="width: 60px"><span translate>common.label.action</span>
                                </th>
                                <th class="no-borders" style="width: 22%"><span translate>profile.gitManagement.label.gitServer</span>
                                </th>
                                <th class="no-borders" style="width: 22%"><span translate>profile.gitManagement.label.gitAccount</span>
                                </th>
                                <th class="no-borders" style="width: 22%"><span translate>profile.gitManagement.label.userName</span>
                                </th>
                                <th class="no-borders"><span translate>profile.gitManagement.label.emailAddress</span>
                                </th>
                              </tr>
                              </thead>
                              <tbody>
                              <tr *ngFor="let cred of gitCredentials.credentials | orderBy:'gitAccount'; let i = index">
                                <td>
                                  <div class="btn-group dropdown">
                                    <button [nzDropdownMenu]="option" class="btn-drop more-option-h" nz-dropdown nzTrigger="click"
                                            type="button"><i
                                      class="fa fa-ellipsis-h"></i></button>
                                    <nz-dropdown-menu #option="nzDropdownMenu">
                                      <ul nz-menu>
                                        <li (click)="editCredential(cred)" nz-menu-item>
                                          <a translate>common.button.edit</a>
                                        </li>
                                        <li (click)="deleteCredential(cred)" class="bg-hover-color" nz-menu-item>
                                          <a translate>common.button.delete</a>
                                        </li>
                                      </ul>
                                    </nz-dropdown-menu>
                                  </div>
                                </td>
                                <td (click)="editCredential(cred)" class="cursor">{{cred.gitServer}}</td>
                                <td (click)="editCredential(cred)" class="cursor">{{cred.gitAccount}}</td>
                                <td (click)="editCredential(cred)" class="cursor">{{cred.username}}</td>
                                <td (click)="editCredential(cred)" class="cursor">{{cred.email}}</td>
                              </tr>
                              </tbody>
                            </table>
                          </div>
                        </div>
                        <div *ngIf="!gitCredentials.credentials || gitCredentials.credentials.length === 0"
                             class="col-md-12" translate>
                          <div class="text-center">
                            <app-empty-data title="profile.gitManagement.message.noCredentialFound"></app-empty-data>
                          </div>
                        </div>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
            </nz-tab>
            <nz-tab [nzTitle]="'profile.label.favoriteManagement' | translate">
              <div class="p-l-sm p-r-rm m-t-n-sm">
                <nz-tabset (nzSelectChange)="innnerTabChange($event)">
                  <nz-tab [nzTitle]="'profile.favoriteManagement.tab.agents' | translate">
                    <app-manage-favorite-list (reload)="reload($event)" [account]="authService.currentUserData" [favList]="favList"
                                              [filter]="favFilter.agent" [schedulerId]="schedulerIds"
                                              [sharedList]="sharedList"
                                              [type]="'AGENT'"></app-manage-favorite-list>
                  </nz-tab>
                  <nz-tab [nzTitle]="'profile.favoriteManagement.tab.facets' | translate">
                    <app-manage-favorite-list (reload)="reload($event)" [account]="authService.currentUserData" [favList]="favList"
                                              [filter]="favFilter.facet" [schedulerId]="schedulerIds"
                                              [sharedList]="sharedList"
                                              [type]="'FACET'"></app-manage-favorite-list>
                  </nz-tab>
                </nz-tabset>
              </div>
            </nz-tab>
          </nz-tabset>
        </div>
      </div>
    </div>
  </div>
</div>
