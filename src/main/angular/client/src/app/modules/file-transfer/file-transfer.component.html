<div class="white box-shadow sub-header">
  <div class="row">
    <div class="col-md-12">
      <div class="padding">
        <div class="text-right ">
          <div class="pull-left">
            <app-breadcrumbs></app-breadcrumbs>
          </div>
          <i (click)="helpPage()" [nzTooltipMouseEnterDelay]="0.5" [nz-tooltip]="'common.tooltip.help' | translate" class="help-info-common cur-point fa fa-info-circle text-20"></i>
          <div class="inline">
            <div class="inline valign">
              <label (ngModelChange)="changeController()" [(ngModel)]="yadeFilters.current" nz-checkbox>
                {{'common.label.currentController' | translate}}
              </label>
            </div>
            <div class="btn-group m-l-12 hidden-btn-group">
              <button (click)="loadYadeFiles('STATE','ALL')" [disabled]="savedFilter.selected"
                      [ngClass]="{'btn-primary': yadeFilters.filter.states=='ALL'}"
                      class="btn btn-grey btn-sm button-group-ellipsis" translate>common.button.allStatus
              </button>
              <button (click)="loadYadeFiles('STATE','SUCCESSFUL')" [disabled]="savedFilter.selected"
                      [ngClass]="{'btn-primary': yadeFilters.filter.states=='SUCCESSFUL'}"
                      class="btn btn-grey btn-sm button-group-ellipsis" translate>
                common.button.successful
              </button>
              <button (click)="loadYadeFiles('STATE','FAILED')" [disabled]="savedFilter.selected"
                      [ngClass]="{'btn-primary': yadeFilters.filter.states=='FAILED'}"
                      class="btn btn-grey btn-sm button-group-ellipsis" translate>common.button.failed
              </button>
              <button (click)="loadYadeFiles('STATE','INCOMPLETE')" [disabled]="savedFilter.selected"
                      [ngClass]="{'btn-primary': yadeFilters.filter.states=='INCOMPLETE'}"
                      class="btn btn-grey btn-sm button-group-ellipsis" translate>
                common.button.incomplete
              </button>
            </div>
            <div class="btn-group dropdown hidden-dropdown">
              <button [nzDropdownMenu]="state" [nzPlacement]="'bottomRight'" class="btn btn-grey btn-sm m-l-12" nz-dropdown
                      nzTrigger="click" translate
                      type="button">common.label.state
                <i class="caretDownIcon" nz-icon nzTheme="outline" nzType="caret-down"></i>
              </button>
              <nz-dropdown-menu #state="nzDropdownMenu">
                <ul nz-menu>
                  <li (click)="loadYadeFiles('STATE','ALL')" [ngClass]="{'ant-select-dropdown-menu-item-active': yadeFilters.filter.states=='ALL', 'disable-link':savedFilter.selected}"
                      nz-menu-item>
                    <a translate>common.button.allStatus</a>
                  </li>
                  <li (click)="loadYadeFiles('STATE','SUCCESSFUL')" [ngClass]="{'ant-select-dropdown-menu-item-active':yadeFilters.filter.states=='SUCCESSFUL', 'disable-link':savedFilter.selected}"
                      nz-menu-item>
                    <a translate>common.button.successful</a>
                  </li>
                  <li (click)="loadYadeFiles('STATE','FAILED')" [ngClass]="{'ant-select-dropdown-menu-item-active': yadeFilters.filter.states=='FAILED', 'disable-link':savedFilter.selected}"
                      nz-menu-item>
                    <a translate>common.button.failed</a>
                  </li>
                  <li (click)="loadYadeFiles('STATE','INCOMPLETE')" [ngClass]="{'ant-select-dropdown-menu-item-active': yadeFilters.filter.states=='INCOMPLETE', 'disable-link':savedFilter.selected}"
                      nz-menu-item>
                    <a translate>common.button.incomplete</a>
                  </li>
                </ul>
              </nz-dropdown-menu>
            </div>
            <div class="btn-group m-l-12 hidden-btn-group">
              <button (click)="loadYadeFiles('DATE','all')" [disabled]="savedFilter.selected"
                      [ngClass]="{'btn-primary': yadeFilters.filter.date=='all'}"
                      class="btn btn-grey btn-sm button-group-ellipsis" translate>filters.button.all
              </button>
              <button (click)="loadYadeFiles('DATE','today')" [disabled]="savedFilter.selected"
                      [ngClass]="{'btn-primary': yadeFilters.filter.date=='today'}"
                      class="btn btn-grey btn-sm button-group-ellipsis" translate>filters.button.today
              </button>
              <button (click)="loadYadeFiles('DATE','-1h')" [disabled]="savedFilter.selected"
                      [ngClass]="{'btn-primary': yadeFilters.filter.date=='-1h'}"
                      class="btn btn-grey btn-sm button-group-ellipsis" translate>filters.button.last1
              </button>
              <button (click)="loadYadeFiles('DATE','-12h')" [disabled]="savedFilter.selected"
                      [ngClass]="{'btn-primary': yadeFilters.filter.date=='-12h'}"
                      class="btn btn-grey btn-sm button-group-ellipsis" translate>filters.button.last12
              </button>
              <button (click)="loadYadeFiles('DATE','-24h')" [disabled]="savedFilter.selected"
                      [ngClass]="{'btn-primary': yadeFilters.filter.date=='-24h'}"
                      class="btn btn-grey btn-sm button-group-ellipsis" translate>filters.button.last24
              </button>
              <button (click)="loadYadeFiles('DATE','-7d')" [disabled]="savedFilter.selected"
                      [ngClass]="{'btn-primary': yadeFilters.filter.date=='-7d'}"
                      class="btn btn-grey btn-sm button-group-ellipsis" translate>filters.button.lastWeak
              </button>
            </div>
            <div class="btn-group dropdown hidden-dropdown">
              <button [nzDropdownMenu]="anyDate" [nzPlacement]="'bottomRight'" class="btn btn-grey btn-sm m-l-12"
                      nz-dropdown nzTrigger="click" translate type="button">
                common.label.anyDate
                <i class="caretDownIcon" nz-icon nzTheme="outline" nzType="caret-down"></i>
              </button>
              <nz-dropdown-menu #anyDate="nzDropdownMenu">
                <ul nz-menu>
                  <li (click)="loadYadeFiles('DATE','all')" [ngClass]="{'ant-select-dropdown-menu-item-active': yadeFilters.filter.date=='all', 'disable-link':savedFilter.selected}"
                      nz-menu-item>
                    <a translate>filters.button.all</a>
                  </li>
                  <li (click)="loadYadeFiles('DATE','today')" [ngClass]="{'ant-select-dropdown-menu-item-active': yadeFilters.filter.date=='today', 'disable-link':savedFilter.selected}"
                      nz-menu-item>
                    <a translate>filters.button.today</a>
                  </li>
                  <li (click)="loadYadeFiles('DATE','-1h')" [ngClass]="{'ant-select-dropdown-menu-item-active': yadeFilters.filter.date=='-1h', 'disable-link':savedFilter.selected}"
                      nz-menu-item>
                    <a translate>filters.button.last1</a>
                  </li>
                  <li (click)="loadYadeFiles('DATE','-12h')" [ngClass]="{'ant-select-dropdown-menu-item-active': yadeFilters.filter.date=='-12h', 'disable-link':savedFilter.selected}"
                      nz-menu-item>
                    <a translate>filters.button.last12</a>
                  </li>
                  <li (click)="loadYadeFiles('DATE','-24h')" [ngClass]="{'ant-select-dropdown-menu-item-active': yadeFilters.filter.date=='-24h', 'disable-link':savedFilter.selected}"
                      nz-menu-item>
                    <a translate>filters.button.last24</a>
                  </li>
                  <li (click)="loadYadeFiles('DATE','-7d')" [ngClass]="{'ant-select-dropdown-menu-item-active': yadeFilters.filter.date=='-7d', 'disable-link':savedFilter.selected}"
                      nz-menu-item>
                    <a translate>filters.button.lastWeak</a>
                  </li>
                </ul>
              </nz-dropdown-menu>
            </div>
            @if (permission.joc && permission.joc.administration.customization.view) {
              <div class="btn-group dropdown">
                <button [nzTooltipMouseEnterDelay]="0.5" [nz-tooltip]="selectedFiltered.account" [nzDropdownMenu]="customization" class="btn btn-grey btn-sm m-l-12"
                        nz-dropdown nzPlacement="bottomRight" nzTrigger="click" type="button">
                  {{'customization.label.customizations' | translate}}
                  <span [innerHtml]="selectedFiltered.name" class="text-primary"></span>
                  <i class="caretDownIcon" nz-icon nzTheme="outline" nzType="caret-down"></i>
                </button>
                <nz-dropdown-menu #customization="nzDropdownMenu">
                  <ul nz-menu>
                    @if (permission.joc && permission.joc.administration.customization.manage) {
                      <li (click)="createCustomization()" nz-menu-item>
                        <a translate>customization.label.createCustomization</a>
                      </li>
                    }
                    @if (filterList.length>0) {
                      <li (click)="editFilters()" nz-menu-item>
                        <a translate>customization.label.editExistingCustomizations</a>
                      </li>
                    }
                    @if (filterList.length>0) {
                      <li nz-menu-divider></li>
                    }
                    @for (filter of filterList | orderBy: 'name'; track filter) {
                      <li (click)="changeFilter(filter)" nz-menu-item>
                        <a>
                          <span [nzTooltipMouseEnterDelay]="0.5" [nz-tooltip]="filter.account">{{filter.name}}</span>
                          @if (savedFilter.selected == filter.id) {
                            <i (click)="changeFilter(null);$event.stopPropagation();"
                               [nzTooltipMouseEnterDelay]="0.5" [nz-tooltip]="'customization.tooltip.deactivateCustomization' | translate"
                               class="fa fa-times-circle-o remove"></i>
                          }
                        </a>
                      </li>
                    }
                  </ul>
                </nz-dropdown-menu>
              </div>
            }
          </div>
        </div>
      </div>
    </div>
  </div>
</div>
<div class="scroll-y max-ht">
  <div class="padding p-b-0">
    <div class="row m-b-12 m-t-xs">
      <div class="col-md-12">
        @if (data.length>0) {
          <button (click)="expandDetails()"
                  class="btn btn-sm btn-grey" nz-tooltip="{{'common.button.expandDetails' | translate}}">
            <i class="fa fa-expand text"></i>
          </button>
        }
        @if (data.length>0) {
          <button (click)="collapseDetails()"
                  class="btn btn-sm btn-grey m-l-12" nz-tooltip="{{'common.button.collapseDetails' | translate}}">
            <i class="fa fa-compress text"></i>
          </button>
        }
        @if (!showSearchPanel) {
          <button (click)="advancedSearch()" class="btn btn-sm inline pull-right m-l btn-grey">
            <span translate>common.button.advancedSearch</span>
            <i class="fa fa-caret-down p-l-xs"></i>
          </button>
        }
        @if (showSearchPanel) {
          <button (click)="cancel()" class="btn btn-sm inline pull-right m-l btn-grey">
            <span translate>common.button.advancedSearch</span>
            <i class="fa fa-caret-down p-l-xs"></i>
          </button>
        }
        <div class="search-box-field pull-right">
          <label>
            <input (keyup)="searchInResult()" [(ngModel)]="yadeFilters.searchText"
                   placeholder="{{'common.placeholder.search' | translate}}"
                   type="search">
          </label>
          <i (click)="yadeFilters.searchText = '';searchInResult()" [hidden]="!yadeFilters.searchText"
             class="fa fa-times search-close"></i>
        </div>
      </div>
    </div>
    @if (showSearchPanel) {
      <div class="row m-b">
        <div class="col-md-12">
          <div class="box p-a m-b-xs">
            <app-file-transfer-form-template (onCancel)="cancel()" (onSearch)="search()"
                                             [allFilter]="filterList"
                                             [filter]="searchFilter" [isSearch]="true"
                                             [permission]="permission" [preferences]="preferences"
                                             [schedulerIds]="schedulerIds"></app-file-transfer-form-template>
          </div>
        </div>
      </div>
    }
    <div class="m-t-sm box p-a">
      <div class="table-responsive" id="fileTransferMainTable">
        <nz-table
          #ajaxTable
          (nzPageIndexChange)="pageIndexChange($event)"
          (nzPageSizeChange)="pageSizeChange($event)"
          [nzBordered]="true"
          [nzData]="data"
          [nzLoading]="!isLoaded"
          [nzPageIndex]="yadeFilters.currentPage"
          [nzPageSizeOptions]="[10, 25, 50, 100 , +(preferences.maxEntryPerPage)]"
          [nzPageSize]="yadeFilters.entryPerPage || preferences.entryPerPage || 25"
          [nzShowPagination]="data.length > 0"
          [nzShowSizeChanger]="true"
          [nzSize]="'small'"
        >
          <thead>
          <tr class="main-header-row">
            <th class="menu">
              <span translate>common.label.action</span>
            </th>
            @if (!yadeFilters.current) {
              <th (click)="sort('controllerId')">
                <a>
                  <span class="p-r-xs" translate>common.label.controllerId</span>
                  @if (yadeFilters.filter.sortBy == 'controllerId' && !yadeFilters.reverse) {
                    <i class="fa fa-caret-up "></i>
                  }
                  @if (yadeFilters.filter.sortBy == 'controllerId' && yadeFilters.reverse) {
                    <i class="fa fa-caret-down "></i>
                  }
                </a>
              </th>
            }
            <th (click)="sort('state._text')"><a>
              <span class="p-r-xs" translate>fileTransfer.label.status</span>
              @if (yadeFilters.filter.sortBy == 'state._text' && !yadeFilters.reverse) {
                <i class="fa fa-caret-up "></i>
              }
              @if (yadeFilters.filter.sortBy == 'state._text' && yadeFilters.reverse) {
                <i class="fa fa-caret-down "></i>
              }</a>
            </th>
            <th (click)="sort('profile')"><a>
              <span class="p-r-xs" translate>fileTransfer.label.profileName</span>
              @if (yadeFilters.filter.sortBy == 'profile' && !yadeFilters.reverse) {
                <i class="fa fa-caret-up "></i>
              }
              @if (yadeFilters.filter.sortBy == 'profile' && yadeFilters.reverse) {
                <i class="fa fa-caret-down "></i>
              }</a>
            </th>
            <th (click)="sort('operation')" nzWidth="90px"><a>
              <span class="p-r-xs" translate>fileTransfer.label.operation</span>
              @if (yadeFilters.filter.sortBy == 'operation' && !yadeFilters.reverse) {
                <i class="fa fa-caret-up "></i>
              }
              @if (yadeFilters.filter.sortBy == 'operation' && yadeFilters.reverse) {
                <i class="fa fa-caret-down "></i>
              }</a>
            </th>
            <th (click)="sort('workflow')"><a>
              <span class="p-r-xs" translate>fileTransfer.label.workflow</span>
              @if (yadeFilters.filter.sortBy == 'workflow' && !yadeFilters.reverse) {
                <i class="fa fa-caret-up "></i>
              }
              @if (yadeFilters.filter.sortBy == 'workflow' && yadeFilters.reverse) {
                <i class="fa fa-caret-down "></i>
              }</a>
            </th>
            <th (click)="sort('orderId')"><a>
              <span class="p-r-xs" translate>fileTransfer.label.order</span>
              @if (yadeFilters.filter.sortBy == 'orderId' && !yadeFilters.reverse) {
                <i class="fa fa-caret-up "></i>
              }
              @if (yadeFilters.filter.sortBy == 'orderId' && yadeFilters.reverse) {
                <i class="fa fa-caret-down "></i>
              }</a>
            </th>
            <th (click)="sort('numOfFiles')" [nzTooltipMouseEnterDelay]="0.5" [nz-tooltip]="'fileTransfer.tooltip.totalNumberOfFiles' | translate"
                nzWidth="65px"><a>
              <span class="p-r-xs" translate>fileTransfer.label.total</span>
              @if (yadeFilters.filter.sortBy == 'numOfFiles' && !yadeFilters.reverse) {
                <i class="fa fa-caret-up "></i>
              }
              @if (yadeFilters.filter.sortBy == 'numOfFiles' && yadeFilters.reverse) {
                <i class="fa fa-caret-down "></i>
              }</a>
            </th>
            <th (click)="sort('error.message')" nzWidth="20%"><a>
              <span class="p-r-xs" translate>fileTransfer.label.lastErrorMessage</span>
              @if (yadeFilters.filter.sortBy == 'error.message' && !yadeFilters.reverse) {
                <i class="fa fa-caret-up "></i>
              }
              @if (yadeFilters.filter.sortBy == 'error.message' && yadeFilters.reverse) {
                <i class="fa fa-caret-down "></i>
              }</a>
            </th>
            <th (click)="sort('start')"><a>
              <span class="p-r-xs" translate>fileTransfer.label.startTime</span>
              @if (yadeFilters.filter.sortBy == 'start' && !yadeFilters.reverse) {
                <i class="fa fa-caret-up "></i>
              }
              @if (yadeFilters.filter.sortBy == 'start' && yadeFilters.reverse) {
                <i class="fa fa-caret-down "></i>
              }</a>
            </th>
            <th (click)="sort('end')"><a>
              <span class="p-r-xs" translate>fileTransfer.label.endTime</span>
              @if (yadeFilters.filter.sortBy == 'end' && !yadeFilters.reverse) {
                <i class="fa fa-caret-up "></i>
              }
              @if (yadeFilters.filter.sortBy == 'end' && yadeFilters.reverse) {
                <i class="fa fa-caret-down "></i>
              }</a>
            </th>
            <th (click)="sort('duration')" nzWidth="100px"><a>
              <span class="p-r-xs" translate>common.label.duration</span>
              @if (yadeFilters.filter.sortBy == 'duration' && !yadeFilters.reverse) {
                <i class="fa fa-caret-up "></i>
              }
              @if (yadeFilters.filter.sortBy == 'duration' && yadeFilters.reverse) {
                <i class="fa fa-caret-down "></i>
              }</a>
            </th>
          </tr>
          </thead>
          <tbody>
            @for (transfer of ajaxTable.data; track transfer) {
              <tr [ngClass]="{'light-bg':transfer.show}">
                <td>
                  <div class="btn-group dropdown">
                    <button [nzDropdownMenu]="menu" class="btn-drop more-option-h" nz-dropdown nzTrigger="click"
                            type="button">
                      <i class="fa fa-ellipsis-h"></i>
                    </button>
                    <nz-dropdown-menu #menu="nzDropdownMenu">
                      <ul nz-menu>
                        <li (click)="coreService.copyLink('fileTransfer',transfer.id)" nz-menu-item>
                          <a translate>common.button.copyLinkToObject</a>
                        </li>
                      </ul>
                    </nz-dropdown-menu>
                  </div>
                </td>
                @if (!yadeFilters.current) {
                  <td>
                  <span class="show-in-single-line">
                    @if (!transfer.show) {
                      <i (click)="showTransferFuc(transfer);" class="cursor fa fa-caret-down fa-lg p-l-xs p-r-xs"></i>
                    }
                    @if (transfer.show) {
                      <i (click)="transfer.show = false;" class="cursor fa fa-caret-up fa-lg p-l-xs p-r-xs"></i>
                    }&nbsp;
                    @if (!transfer.controllerId) {
                      <span [innerHtml]="schedulerIds.selected"></span>
                    }
                    @if (transfer.controllerId) {
                      <span [innerHtml]="transfer.controllerId"></span>
                    }
                  </span>
                  </td>
                }
                <td noWrap>
                <span>
                  @if (!transfer.show && yadeFilters.current) {
                    <i (click)="showTransferFuc(transfer);" class="cursor fa fa-caret-down fa-lg p-l-xs p-r-xs"></i>
                  }
                  @if (transfer.show && yadeFilters.current) {
                    <i (click)="transfer.show = false;" class="cursor fa fa-caret-up fa-lg p-l-xs p-r-xs"></i>
                  }
                  <span (click)="coreService.showLogWindow(null, transfer, null, transfer.controllerId, null,viewContainerRef);$event.stopPropagation()"
                        [innerHtml]="transfer.state._text | translate | highlight : yadeFilters.searchText"
                        [ngClass]="coreService.getColor(transfer.state.severity,'bg')"
                        class="label cursor p-l-xs"></span>
                </span>
                </td>
                <td [innerHtml]="transfer.profile| highlight : yadeFilters.searchText"></td>
                <td [innerHtml]="transfer._operation| highlight : yadeFilters.searchText"></td>
                <td>
                <span class="show-in-single-line w-full">
                  @if (permission.joc && permission.joc.inventory.view) {
                    <i (click)="navToWorkflowTab(transfer.workflowPath);$event.stopPropagation()"
                       class="cursor fa fa-pencil text-hover-primary p-r-xs"></i>
                  }
                  <span (click)="coreService.showWorkflow(transfer.workflowPath);$event.stopPropagation()"
                        [innerHtml]="transfer.workflowPath | highlight : yadeFilters.searchText"
                        class="text-hover-primary"></span>
                </span>
                </td>
                <td><span [innerHtml]="transfer.orderId| highlight : yadeFilters.searchText"></span></td>
                <td [innerHtml]="transfer.numOfFiles| highlight : yadeFilters.searchText"></td>
                <td class="text-danger">
                  @if (transfer.error) {
                    <span [innerHtml]="transfer.error.message"></span>
                  }
                </td>
                <td [innerHtml]="transfer.start | stringToDate"></td>
                <td [innerHtml]="transfer.end | stringToDate"></td>
                <td [innerHtml]="transfer.start | duration:transfer.end"></td>
              </tr>
              @if (transfer.show) {
                <tr>
                  <td></td>
                  <td colspan="12" style="padding: 0 !important;border-bottom: none!important;">
                    <nz-table [nzData]="['']" [nzFrontPagination]="false" [nzShowPagination]="false" [nzSize]="'small'"
                              class="m-a-0 inner-table" id="fileTransferTable">
                      <thead>
                      <tr>
                        <th class="order-history-template0" colspan="4" style="border-bottom: 1px solid #eee;"><span translate>fileTransfer.label.source</span>
                        </th>
                        <th class="order-history-template1" colspan="4" style="border-bottom: 1px solid #eee;"><span translate>fileTransfer.label.target</span>
                        </th>
                        <th class="order-history-template2" colspan="4" style="border-bottom: 1px solid #eee;"><span translate>fileTransfer.label.jump</span>
                        </th>
                      </tr>
                      <tr class="sub-header">
                        <th class="order-history-template0 dynamic-thead"><span translate>fileTransfer.label.host</span></th>
                        <th class="order-history-template0 dynamic-thead"><span translate>fileTransfer.label.account</span></th>
                        <th class="order-history-template0 dynamic-thead"><span translate>fileTransfer.label.port</span></th>
                        <th class="order-history-template0 dynamic-thead"><span translate>fileTransfer.label.protocol</span></th>
                        <th class="order-history-template1 dynamic-thead"><span translate>fileTransfer.label.host</span></th>
                        <th class="order-history-template1 dynamic-thead"><span translate>fileTransfer.label.account</span></th>
                        <th class="order-history-template1 dynamic-thead"><span translate>fileTransfer.label.port</span></th>
                        <th class="order-history-template1 dynamic-thead"><span translate>fileTransfer.label.protocol</span></th>
                        <th class="order-history-template2 dynamic-thead"><span translate>fileTransfer.label.host</span></th>
                        <th class="order-history-template2 dynamic-thead"><span translate>fileTransfer.label.account</span></th>
                        <th class="order-history-template2 dynamic-thead"><span translate>fileTransfer.label.port</span></th>
                        <th class="order-history-template2 dynamic-thead"><span translate>fileTransfer.label.protocol</span></th>
                      </tr>
                      </thead>
                      <tbody>
                      <tr>
                        <td>
                          @if (transfer.source) {
                            <span [innerHtml]="transfer.source.host"></span>
                          }
                        </td>
                        <td>
                          @if (transfer.source) {
                            <span [innerHtml]="transfer.source.account"></span>
                          }
                        </td>
                        <td>
                          @if (transfer.source) {
                            <span [innerHtml]="transfer.source.port"></span>
                          }
                        </td>
                        <td>
                          @if (transfer.source) {
                            <span [innerHtml]="transfer.source.protocol"></span>
                          }
                        </td>
                        <td>
                          @if (transfer.target) {
                            <span [innerHtml]="transfer.target.host"></span>
                          }
                        </td>
                        <td>
                          @if (transfer.target) {
                            <span [innerHtml]="transfer.target.account"></span>
                          }
                        </td>
                        <td>
                          @if (transfer.target) {
                            <span [innerHtml]="transfer.target.port"></span>
                          }
                        </td>
                        <td>
                          @if (transfer.target) {
                            <span [innerHtml]="transfer.target.protocol"></span>
                          }
                        </td>
                        <td>
                          @if (transfer.jump) {
                            <span [innerHtml]="transfer.jump.host"></span>
                          }
                        </td>
                        <td>
                          @if (transfer.jump) {
                            <span [innerHtml]="transfer.jump.account"></span>
                          }
                        </td>
                        <td>
                          @if (transfer.jump) {
                            <span [innerHtml]="transfer.jump.port"></span>
                          }
                        </td>
                        <td>
                          @if (transfer.jump) {
                            <span [innerHtml]="transfer.jump.protocol"></span>
                          }
                        </td>
                      </tr>
                      </tbody>
                    </nz-table>
                    <nz-table #innerChildTable [nzData]="transfer.files" [nzFrontPagination]="false" [nzLoading]="transfer.loading"
                              [nzShowPagination]="false" [nzWidthConfig]="transfer.widthArr" class="m-a-0 inner-table"
                              nzSize="small">
                      <thead>
                      <tr>
                        <th><span translate>fileTransfer.label.sourceFileName</span></th>
                        <th><span translate>fileTransfer.label.sourceFilePath</span></th>
                        <th><span translate>fileTransfer.label.targetFileName</span></th>
                        <th><span translate>fileTransfer.label.targetFilePath</span></th>
                        <th><span translate>fileTransfer.label.status</span></th>
                        <th><span translate>fileTransfer.label.size</span></th>
                        <th><span translate>fileTransfer.label.integrityHash</span></th>
                      </tr>
                      </thead>
                      <tbody>
                        @for (file of innerChildTable.data; track file) {
                          <tr>
                            <td>{{file.sourceName}}</td>
                            <td>{{file.sourcePath}}</td>
                            <td>{{file.targetName}}</td>
                            <td>{{file.targetPath}}</td>
                            <td>
                              @if (file.state) {
                                <span [innerHtml]="file.state._text | translate" [ngClass]="coreService.getColor(file.state.severity,'bg')"
                                      class="label"></span>
                              }
                            </td>
                            <td>{{file.size | byteToSize}}</td>
                            <td>{{file.integrityHash}}</td>
                          </tr>
                          @if (file.error) {
                            <tr>
                              <td class="text-danger" colspan="8"><span>{{file.error.message}}</span></td>
                            </tr>
                          }
                        }
                      </tbody>
                    </nz-table>
                  </td>
                </tr>
              }
            }
          </tbody>
        </nz-table>
      </div>
      @if (ajaxTable.data.length >0) {
        <div class="w-half label-top"><span translate>common.label.total</span> {{data.length}}
          @if (ajaxTable.data.length >1) {
            <span translate>fileTransfer.label.fileTransfersFound</span>
          }
          @if (ajaxTable.data.length ==1) {
            <span translate>fileTransfer.label.fileTransferFound</span>
          }
        </div>
      }
    </div>
  </div>
</div>
@if (!isLoaded || reloadState == 'yes') {
  <div (click)="reload()" class="bottom-btn">
    @if (reloadState == 'no') {
      <i class="fa fa-times"></i>
    }
    @if (reloadState == 'yes') {
      <i class="fa fa-refresh"></i>
    }
  </div>
}
