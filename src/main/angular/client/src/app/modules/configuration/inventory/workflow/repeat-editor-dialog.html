<div class="box-shadow-on-modal">
<div class="modal-header">
  <h4 class="modal-title">
    <span *ngIf="isNew" translate>workflow.repeat.label.addRepeat</span>
    <span *ngIf="!isNew" translate>workflow.repeat.label.editRepeat</span>
  </h4>
  <button type="button" class="close" aria-label="Close" (click)="activeModal.destroy()">
    <span aria-hidden="true" class="fa fa-times-circle"></span>
  </button>
</div>
<div class="modal-body p-a">
  <div class="row">
    <div class="col-sm-12">
      <form #myForm="ngForm" (ngSubmit)="onSubmit()" novalidate>
        <div>
          <div class="form-group row">
            <label class="col-sm-3 form-control-label"
                   [nz-tooltip]="isTooltipVisible ? ('inventory.tooltips.workflow.admissionTime.cycleType' | translate) : ''"
                   translate>workflow.repeat.label.cycleType</label>
            <div class="col-sm-6">
              <nz-select name="_value" [(ngModel)]="object.TYPE">
                <nz-option [nzLabel]="'workflow.repeat.label.periodical' | translate" nzValue="Periodic"></nz-option>
                <nz-option [nzLabel]="'workflow.repeat.label.continuous' | translate" nzValue="Continuous"></nz-option>
                <nz-option [nzLabel]="'workflow.repeat.label.ticking' | translate" nzValue="Ticking"></nz-option>
              </nz-select>
            </div>
          </div>
          <div class="form-group row" *ngIf="object.TYPE === 'Periodic'">
            <label class="col-sm-3 form-control-label"
                   [nz-tooltip]="isTooltipVisible ? ('inventory.tooltips.workflow.admissionTime.period' | translate) : ''"
                   translate>workflow.repeat.label.period
             <sup class="text-danger text-sm">*</sup>
            </label>
            <div class="col-sm-6" [ngClass]="{ 'has-error' : (((period.dirty || period.touched) && period.invalid))}">
              <input appValidateDuration required class="form-control" name="period"
                     #period="ngModel" [(ngModel)]="object.period"
                     placeholder="{{'workflow.placeholder.durationPeriod' | translate}}" type="text">
              <div *ngIf="period.invalid && (period.dirty || period.touched)" class="text-danger help-block">
                <div *ngIf="period.errors.required">
                  <div translate>common.message.requiredError</div>
                </div>
                <div *ngIf="period.errors.invalidDuration" translate>common.message.invalid</div>
              </div>
            </div>
          </div>
          <div class="form-group row" *ngIf="object.TYPE === 'Periodic'">
            <label class="col-sm-3 form-control-label"  [nz-tooltip]="isTooltipVisible ? ('inventory.tooltips.workflow.admissionTime.offsets' | translate) : ''"
                   translate>workflow.repeat.label.offsets
              <sup class="text-danger text-sm">*</sup>
            </label>
            <div class="col-sm-6" [ngClass]="{ 'has-error' : (((offsets.dirty || offsets.touched) && offsets.invalid))}">
              <input appValidateOffset required class="form-control" name="offsets"
                     #offsets="ngModel" [(ngModel)]="object.offsets"
                     placeholder="{{'workflow.placeholder.offset' | translate}}" type="text">
              <div *ngIf="offsets.invalid && (offsets.dirty || offsets.touched)" class="text-danger help-block">
                <div *ngIf="offsets.errors.required">
                  <div translate>common.message.requiredError</div>
                </div>
                <div *ngIf="offsets.errors.invalidOffset" translate>common.message.invalid</div>
              </div>
            </div>
          </div>
          <div class="form-group row" *ngIf="object.TYPE === 'Continuous'">
            <label class="col-sm-3 form-control-label" [nz-tooltip]="isTooltipVisible ? ('inventory.tooltips.workflow.admissionTime.pause' | translate) : ''"
                   translate>workflow.repeat.label.pause
             <sup class="text-danger text-sm">*</sup>
            </label>
            <div class="col-sm-6" [ngClass]="{ 'has-error' : (((pause.dirty || pause.touched) && pause.invalid))}">
              <input appValidateDuration required class="form-control" name="pause"
                     #pause="ngModel" [(ngModel)]="object.pause"
                     placeholder="{{'workflow.placeholder.durationPeriod' | translate}}" type="text">
              <div *ngIf="pause.invalid && (pause.dirty || pause.touched)" class="text-danger help-block">
                <div *ngIf="pause.errors.required">
                  <div translate>common.message.requiredError</div>
                </div>
                <div *ngIf="pause.errors.invalidDuration" translate>common.message.invalid</div>
              </div>
            </div>
          </div>
          <div class="form-group row" *ngIf="object.TYPE === 'Continuous'">
            <label class="col-sm-3 form-control-label"
                   [nz-tooltip]="isTooltipVisible ? ('inventory.tooltips.workflow.admissionTime.limit' | translate) : ''"
                   translate>workflow.repeat.label.limit</label>
            <div class="col-sm-6">
              <nz-input-number [nzMin]="1" [nzStep]="1" name="limit"
                               [(ngModel)]="object.limit"></nz-input-number>
            </div>
          </div>
          <div class="form-group row" *ngIf="object.TYPE === 'Ticking'">
            <label class="col-sm-3 form-control-label" [nz-tooltip]="isTooltipVisible ? ('inventory.tooltips.workflow.admissionTime.interval' | translate) : ''"
                   translate>workflow.repeat.label.interval
             <sup class="text-danger text-sm">*</sup>
            </label>
            <div class="col-sm-6" [ngClass]="{ 'has-error' : (((interval.dirty || interval.touched) && interval.invalid))}">
              <input appValidateDuration required class="form-control" name="interval"
                     #interval="ngModel" [(ngModel)]="object.interval"
                     placeholder="{{'workflow.placeholder.durationPeriod' | translate}}" type="text">
              <div *ngIf="interval.invalid && (interval.dirty || interval.touched)" class="text-danger help-block">
                <div *ngIf="interval.errors.required">
                  <div translate>common.message.requiredError</div>
                </div>
                <div *ngIf="interval.errors.invalidDuration" translate>common.message.invalid</div>
              </div>
            </div>
          </div>
        </div>
        <div>
          <button type="submit" class="btn btn-primary btn-sm" [disabled]="!myForm.form.valid">
            <span translate>common.button.save</span>
          </button>
          <button type="button" class="btn btn-grey btn-sm m-l-sm" (click)="cancel()" translate>
            common.button.cancel
          </button>
        </div>
      </form>
    </div>
  </div>
</div>
</div>
