<div class="white box-shadow sub-header">
  <div class="row">
    <div class="col-md-12">
      <div class="padding">
        <div class="text-right ">
          <div class="pull-left">
            <app-breadcrumbs></app-breadcrumbs>
          </div>
          <div class="inline">
            <div class="show-block">
              <app-toggle (messageEvent)="receiveMessage($event)"></app-toggle>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>
<div class="scroll-y max-ht1">
  <div class="padding p-b-0">
    <div class="row">
      <div class="col-sm-2" id="toolbarContainer">
        <ul *ngFor="let agent of agents">
          <li>
            <div class="draggable" draggable="true" ondragstart="drag($event)">
              <span>{{agent.name}}</span>
            </div>
          </li>
        </ul>
      </div>
      <div class="col-sm-10">
        <div id="toolbar" class="hide"></div>
        <div class="graph-container">
          <div class="inline" id="toolbar-icons">
            <ul class="nav navbar-nav navbar-nav-inline nav-active-border3 ">

              <li class="nav-item">
                <a class="nav-link" data-toggle="tooltip" title="{{'tooltip.zoomIn' | translate}}" (click)="zoomIn()">
                  <span class="nav-text"> <i class="icon1-Zoom-In"></i></span>
                </a>
              </li>
              <li class="nav-item dropdown-separator">
                <span class="separator"></span>
              </li>
              <li class="nav-item">
                <a class="nav-link" data-toggle="tooltip" title="{{'tooltip.zoomOut' | translate}}" (click)="zoomOut()">
                  <span class="nav-text"> <i class="icon1-Zoom-Out"></i></span>
                </a>
              </li>
              <li class="nav-item dropdown-separator">
                <span class="separator"></span>
              </li>
              <li class="nav-item">
                <a class="nav-link" data-toggle="tooltip" title="{{'tooltip.default' | translate}}" (click)="actual()">
                  <span class="nav-text"> <i class="icon1-Actual-size"></i></span>
                </a>
              </li>
              <li class="nav-item dropdown-separator">
                <span class="separator"></span>
              </li>
              <li class="nav-item">
                <a class="nav-link" data-toggle="tooltip" title="{{'tooltip.fit' | translate}}" (click)="fit()">
                  <span class="nav-text"> <i class="icon1-fit-to-width"></i></span>
                </a>
              </li>
              <li class="nav-item dropdown-separator">
                <span class="separator"></span>
              </li>
              <li class="nav-item" data-toggle="tooltip" title="{{'button.export' | translate}}">
                <a class="nav-link" data-toggle="dropdown">
                  <span class="nav-text"> <i class="fa fa-download" style="opacity: .8"></i></span>
                </a>
                <div class="dropdown-menu dropdown-menu-scale dropdown-ac dropdown-more pull-right">
                  <a class="dropdown-item" (click)="exportInPng()" translate>label.png</a>
                </div>
              </li>
            </ul>

          </div>
          <div class="box-shadow-z1" id="graph" ondragover="allowDrop($event)"></div>
          <div id="dropContainer" class="dropContainer">
            <div class="dropContainer" translate>agent.message.dropHereToDetach</div>
          </div>
          <div id="outlineContainer"></div>
        </div>
      </div>
    </div>
  </div>
</div>
<div class="spinner" *ngIf="isLoading">
  <div class="cssload-inner cssload-one"></div>
  <div class="cssload-inner cssload-two"></div>
  <div class="cssload-inner cssload-three"></div>
</div>
<script>
  function allowDrop(ev) {
    if (ev.target.tagName && ev.target.tagName.toLowerCase() === 'svg') {
      ev.preventDefault();
    } else if (ev.target.tagName && ev.target.tagName.toLowerCase() === 'div') {
      if (ev.target.className && (ev.target.className.match(/agent/))) {
        ev.preventDefault();
      } else if (ev.target.childElementCount > 0) {
        let className = ev.target.childNodes[0].className;
        if (className && (className.match(/agent/))) {
          ev.preventDefault();
        } else {
          return false;
        }
      }
    } else {
      return false;
    }
  }

  function drag(ev) {
    ev.dataTransfer.setData("data", ev.target.id);
    window.selectedAgent = ev.target.id;
  }

</script>